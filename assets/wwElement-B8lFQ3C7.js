import{_ as ne,j as Q,o as L,m as ae,k as $e,r as F,e as d,l as ft,c as M,a as Z,n as se,d as N,p as R,q as H,s as K,u as te,w as V,t as qe,F as Ke,v as Ot,x as he,y as it,z as We,h as rt,b as ue,A as tr,B as nr,C as ir,D as rr,E as ar,G as an,H as or,I as ri,J as Te,K as lr,L as Kt,M as sr,N as cr,f as on,O as B,T as ur,P as ht,Q as Dt,R as bt,S as dr,U as fr,V as hr,W as Bt}from"./main-BEqSrhKB.js";const mr={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},setup(e){const{getIcon:t}=wwLib.useIcons(),{hasLink:n,tag:i,properties:r}=wwLib.wwElement.useLink(),a=F(null),o=d(()=>e.wwElementState.props.icon||e.content.icon),l=d(()=>e.wwElementState.props.color||e.content.color),c=d(()=>`<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" fill="none" viewBox="0 0 24 24">
<path id="Vector" d="M14.4053 21H9.59375C9.10457 21 8.86006 20.9996 8.62988 20.9443C8.42581 20.8953 8.23099 20.815 8.05204 20.7053C7.85021 20.5817 7.67763 20.4091 7.33173 20.0632L3.9375 16.6689C3.59182 16.3233 3.41857 16.15 3.29492 15.9482C3.18526 15.7693 3.10425 15.5743 3.05526 15.3702C3 15.14 3 14.8945 3 14.4053V9.59375C3 9.10457 3 8.86006 3.05526 8.62988C3.10425 8.42581 3.18526 8.23098 3.29492 8.05204C3.41748 7.85205 3.58846 7.68107 3.92809 7.34144L3.9375 7.33173L7.33173 3.9375L7.3414 3.92813C7.68106 3.58847 7.85204 3.41748 8.05204 3.29492C8.23099 3.18526 8.42581 3.10425 8.62988 3.05526C8.86006 3 9.10457 3 9.59375 3H14.4053C14.8945 3 15.14 3 15.3702 3.05526C15.5743 3.10425 15.7693 3.18526 15.9482 3.29492C16.15 3.41857 16.3233 3.59181 16.6689 3.9375L20.0632 7.33173C20.409 7.67759 20.5817 7.85022 20.7053 8.05205C20.815 8.23099 20.8953 8.42581 20.9443 8.62988C20.9996 8.86006 21 9.10457 21 9.59375V14.4053M20.9996 14.4062C20.9996 14.8954 20.9996 15.14 20.9443 15.3702C20.8953 15.5743 20.815 15.7693 20.7053 15.9482C20.5817 16.1501 20.4091 16.323 20.0632 16.6689L16.6689 20.0632C16.323 20.4091 16.1501 20.5817 15.9482 20.7053C15.7693 20.815 15.5743 20.8953 15.3702 20.9443C15.14 20.9996 14.8954 20.9996 14.4062 20.9996" stroke="${l.value}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`);return ft(async()=>{try{a.value=await t(o.value)}catch{a.value=null}}),{getIcon:t,iconText:a,hasLink:n,tag:i,properties:r,color:l,placeholder:c}},computed:{iconHTML(){return this.iconText||this.placeholder},style(){return{"--icon-color":this.color}}}};function gr(e,t,n,i,r,a){return L(),Q($e(i.hasLink?i.tag:"div"),ae({innerHTML:a.iconHTML},i.properties,{style:a.style,class:["ww-icon",{"-link":i.hasLink}]}),null,16,["innerHTML","style","class"])}const od=ne(mr,[["render",gr],["__scopeId","data-v-ec5c837b"]]),vr={props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["update:content:effect","trigger-event","add-state","remove-state"],setup(e,{emit:t}){const{value:n,setValue:i}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",type:"boolean",defaultValue:d(()=>e.content.value===void 0?!1:e.content.value)}),r=R("_wwForm:useForm",()=>{}),a=d(()=>e.content.fieldName),o=d(()=>e.content.validation),l=d(()=>e.content.customValidation),c=d(()=>e.content.required);return r(n,{fieldName:a,validation:o,customValidation:l,required:c,initialValue:d(()=>e.content.value)},{elementState:e.wwElementState,emit:t,sidepanelFormPath:"form",setValue:i}),{variableValue:n,setValue:i}},computed:{isEditing(){return!1},value(){return!!this.variableValue},cssVariables(){const e=wwLib.wwUtils.getLengthUnit(this.content.selectorSize)[0],t=Math.min(Math.max(e,10),100),n=t/100,i=100-t;return{"--selector-size":n,"--transition-ajustement":`${i}%`,"--selector-color-off":this.content.selectorColorOff,"--selector-color-on":this.content.selectorColorOn,"--background-color":this.value?this.content.backgroundColorOn:this.content.backgroundColorOff}},isReadonly(){return this.wwElementState.props.readonly===void 0?this.content.readonly:this.wwElementState.props.readonly}},watch:{"content.value"(e){e=!!e,e!==this.value&&(this.setValue(e),this.$emit("trigger-event",{name:"initValueChange",event:{value:e}}))},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}},methods:{handleManualInput(e){const t=!this.value;this.setValue(t),this.$emit("trigger-event",{name:"change",event:{domEvent:e,value:t}})}}},yr=["aria-checked","disabled"],wr=["value","name","checked","required","disabled"];function br(e,t,n,i,r,a){return L(),M("button",{type:"button",class:se(["ww-webapp-toggle",{"-active":a.value}]),role:"switch","aria-checked":a.value,style:N(a.cssVariables),onClick:t[0]||(t[0]=o=>a.handleManualInput(o)),disabled:a.isReadonly},[Z("div",{class:se(["selector",{"-active":a.value}])},null,2),Z("input",{type:"checkbox",value:a.value,class:"ww-webapp-toggle__hidden",name:n.wwElementState.name,checked:a.value,required:n.content.required,disabled:a.isReadonly},null,8,wr)],14,yr)}const ld=ne(vr,[["render",br],["__scopeId","data-v-11c067a6"]]),pr={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0}},emits:["update:content","update:content:effect"],setup(){const{hasLink:e,tag:t,properties:n}=wwLib.wwElement.useLink();return{hasLink:e,linkTag:t,properties:n}},data(){return{dragingHandle:"start",dragingIndex:-1,style:this.getStyle(),direction:this.getDirection()}},computed:{tag(){return this.hasLink?this.linkTag:"div"},screenSize(){return this.wwFrontState.screenSize},isBound(){return!1},isEmpty(){return!1},isEditing(){return!1},wwObjectFlex(){const e={},t=this.content.type!=="mosaic"||this.content.alignItems==="stretch";return e.flexGrow=t?"1":"unset",this.content.type==="columns"&&(e.alignSelf="auto"),e},layoutStyle(){return{flexDirection:this.direction,...this.style}},children(){return!this.content.children||!Array.isArray(this.content.children)?[]:this.content.children}},watch:{screenSize(e,t){e!==t&&(this.style=this.getStyle(),this.direction=this.getDirection())}},mounted(){},methods:{getItemStyle(e){const t={flexShrink:"unset",justifyContent:""};if(this.content.reverse?t.order=this.children.length-1-e:t.order=e,this.content.pushLast&&(this.content.reverse?e===0:e===this.children.length-1)&&(this.content.direction==="column"?t.marginTop="auto":t.marginLeft="auto"),this.content.type!=="rows"){const n=this.getGridAt(e);t.width=`calc(${n} * 100% / ${this.content.lengthInUnit})`,t.flexShrink="0"}else t.width="100%";return this.content.type==="mosaic"&&this.content.alignItems!=="stretch"&&this.content.alignItems!=="baseline"&&(t.justifyContent=this.content.alignItems),t},getStyle(){return{flexWrap:this.content.type==="mosaic"?"wrap":"unset",justifyContent:this.content.type==="mosaic"?this.content.justifyContent:"unset",alignItems:this.content.type==="mosaic"?this.content.alignItems:"unset"}},getDirection(){return this.content.type==="rows"?"column":"row"},getInheritFromElement(){return this.content.type==="mosaic"?["width","display"]:[]},getWwObjectFlex(){return this.content.type!=="mosaic"||this.content.alignItems==="stretch"?"1":"unset"},getGridAt(e,t){return e=this.isBound?0:e,t=t||this.content.grid,t?e>=t.length?t[0]||1:t[e]:1},fit(e,t){if(this.isBound||this.content.type!=="columns")return;const n=e.reduce((l,c,s)=>l+this.getGridAt(s)||0,0),i=this.content.lengthInUnit;if(n===i&&e.length===t.length)return t;const r=Math.max(1,e.length),a=Math.floor(i/r),o=i-(r-1)*a;return e.map((l,c)=>c===0?o:a)},async update(e){},moveItem(e,t,n){const i=[...e],[r]=i.splice(t,1);return t<n&&n--,i.splice(n,0,r),i}}},Sr=["ww-responsive"];function _r(e,t,n,i,r,a){var c;const o=H("wwElement",!0),l=H("wwLayout");return L(),Q($e(a.tag),ae(i.properties,{class:["ww-columns",{editing:(c=e.wwEditorState)==null?void 0:c.canBeEdited,empty:a.isEmpty,"-link":i.hasLink&&!a.isEditing}]}),{default:K(()=>[te(l,{class:"ww-columns__dropzone",path:"children",direction:r.direction,style:N(a.layoutStyle),"ww-responsive":"wwLayout","onUpdate:list":a.update},{default:K(({item:s,index:u})=>{var f;return[Z("div",{class:se(["ww-columns__column",[{editing:(f=e.wwEditorState)==null?void 0:f.canBeEdited,draging:r.dragingIndex===u}]]),"ww-responsive":`index-${u}`,style:N(a.getItemStyle(u))},[te(o,ae(s,{class:"ww-columns__object","extra-style":a.wwObjectFlex,"ww-responsive":`wwobject-${u}`}),null,16,["extra-style","ww-responsive"])],14,Sr)]}),_:1},8,["direction","style","onUpdate:list"])]),_:1},16,["class"])}const sd=ne(pr,[["render",_r],["__scopeId","data-v-44d826a3"]]),Ir='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>',Or='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>',_n='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18M6 6l12 12"/></svg>',Tr={props:{content:{type:Object,required:!0}},emits:["remove-multiselect-value"],setup(e,{emit:t}){const{getIcon:n}=wwLib.useIcons(),i=R("_wwSelect:registerTriggerLocalContext"),r=R("_wwSelect:localContext"),a=d(()=>e.content.selectType==="single"),o=d(()=>wwLib.wwLang.getText(e.content.placeholder)),l=d(()=>{var x,D,C,O,k;return(k=(O=(C=(D=(x=r.value)==null?void 0:x.data)==null?void 0:D.select)==null?void 0:C.active)==null?void 0:O.details)==null?void 0:k.label}),c=d(()=>{var x,D,C,O,k,y,v,z,E,X;return!!((k=(O=(C=(D=(x=r.value)==null?void 0:x.data)==null?void 0:D.select)==null?void 0:C.active)==null?void 0:O.details)!=null&&k.label)||((X=(E=(z=(v=(y=r.value)==null?void 0:y.data)==null?void 0:v.select)==null?void 0:z.active)==null?void 0:E.details)==null?void 0:X.length)>0}),s=d(()=>{var x,D,C,O;return(O=(C=(D=(x=r.value)==null?void 0:x.data)==null?void 0:D.select)==null?void 0:C.utils)==null?void 0:O.isOpen}),u=F({placeholder:o});i({data:u,methods:{},markdown:"### Select Trigger local informations\n\n- `placeholder`: The placeholder text for the select trigger."});const h=d(()=>{const x=e.content.triggerBorder?{"border-top":e.content.triggerBorderTop,"border-right":e.content.triggerBorderRight,"border-bottom":e.content.triggerBorderBottom,"border-left":e.content.triggerBorderLeft}:{border:e.content.triggerBorderAll};return{padding:e.content.triggerPadding,margin:e.content.triggerMargin,"background-color":e.content.triggerBgColor,width:"100%",height:e.content.triggerHeight,"border-radius":e.content.triggerBorderRadius,"box-shadow":e.content.triggerShadows,cursor:"pointer",display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between",...x}}),S=d(()=>({width:e.content.triggerIconSize,color:e.content.triggerIconColor,display:"flex","align-items":"center","justify-content":"center","pointer-events":"none"})),_=d(()=>({"font-size":e.content.selectedFontSize,"font-family":e.content.selectedFontFamily,color:e.content.selectedFontColor,"font-weight":e.content.selectedFontWeight,"text-align":e.content.selectedTextAlign,width:"100%"})),m=d(()=>({"font-size":e.content.placeholderFontSize,"font-family":e.content.placeholderFontFamily,color:e.content.placeholderFontColor,"font-weight":e.content.placeholderFontWeight,"text-align":e.content.placeholderTextAlign,width:"100%"})),T=d(()=>{const x=e.content.chipBorder?{"border-top":e.content.chipBorderTop,"border-right":e.content.chipBorderRight,"border-bottom":e.content.chipBorderBottom,"border-left":e.content.chipBorderLeft}:{border:e.content.chipBorderAll};return{"font-size":e.content.chipFontSize,"font-family":e.content.chipFontFamily,color:e.content.chipFontColor,"font-weight":e.content.chipFontWeight,padding:e.content.chipPadding,"background-color":e.content.chipBgColor,"border-radius":e.content.chipBorderRadius,...x}}),b=F(null),g=F(null);V([s,()=>e.content.triggerIconOpen,()=>e.content.triggerIconClose],async()=>{const x=s.value?"triggerIconClose":"triggerIconOpen",D=s.value?Ir:Or;e.content[x]?b.value=await n(e.content[x])||D:b.value=D},{immediate:!0}),V(()=>e.content.chipIconUnselect,async x=>{x?g.value=await n(x)||_n:g.value=_n},{immediate:!0});const p=d(()=>({width:e.content.chipIconSize,color:e.content.chipIconColor,display:"flex","align-items":"center","justify-content":"center","pointer-events":"none"}));return{isSingleSelect:a,data:u,selectedLabel:l,isOptionSelected:c,localContext:r,triggerStyle:h,triggerIconStyle:S,selectedValueStyle:_,placeholderStyle:m,chipIcon:b,chipStyle:T,chipIconStyle:p,chipIconUnselect:g,isOpen:s,handleChipClick:(x,D)=>{x.stopPropagation(),t("remove-multiselect-value",D)}}}},xr={class:"ww-input-select__trigger"},Cr=["innerHTML"],Er={key:0,class:"ww-input-select__chip_container"},Dr=["onClick"],Lr=["innerHTML"],zr=["innerHTML"];function Fr(e,t,n,i,r,a){var o,l,c,s;return L(),M("div",xr,[i.isSingleSelect?(L(),M("div",{key:0,style:N(i.triggerStyle)},[i.isOptionSelected?(L(),M("span",{key:0,style:N(i.selectedValueStyle)},qe(i.selectedLabel),5)):(L(),M("span",{key:1,style:N(i.placeholderStyle)},qe(i.data.placeholder),5)),Z("div",{innerHTML:i.chipIcon,style:N(i.triggerIconStyle),"aria-hidden":"true"},null,12,Cr)],4)):(L(),M("div",{key:1,style:N(i.triggerStyle)},[i.isOptionSelected?(L(),M("div",Er,[(L(!0),M(Ke,null,Ot((s=(c=(l=(o=i.localContext)==null?void 0:o.data)==null?void 0:l.select)==null?void 0:c.active)==null?void 0:s.details,u=>(L(),M("div",{class:"ww-input-select__chip",key:u.value,onClick:f=>i.handleChipClick(f,u.value),style:N(i.chipStyle)},[Z("span",null,qe(u.label),1),Z("div",{innerHTML:i.chipIconUnselect,style:N(i.chipIconStyle),"aria-hidden":"true"},null,12,Lr)],12,Dr))),128))])):(L(),M("span",{key:1,style:N(i.placeholderStyle)},qe(i.data.placeholder),5)),Z("div",{innerHTML:i.chipIcon,style:N(i.triggerIconStyle),"aria-hidden":"true"},null,12,zr)],4))])}const kr=ne(Tr,[["render",Fr],["__scopeId","data-v-5e45f01d"]]);function Ar({emit:e,optionElement:t,content:n}){const i=wwLib.wwUtils.getUid(),r=`ww-select-option-${n.value}-${i}`,a=R("_wwSelect:activeDescendant",F("")),o=R("_wwSelect:focusFromOptionId",()=>{});return V(a,()=>{a.value===r&&he(()=>{t.value&&(t.value.focus(),t.value.scrollIntoView({block:"nearest",inline:"nearest"}))})}),{uid:i,optionId:r,focusFromOptionId:o}}function Gt(e,t){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)}}function In(e,t){return typeof t=="object"&&t!==null?e.findIndex(n=>typeof n!="object"||n===null?!1:JSON.stringify(n)===JSON.stringify(t)):e.indexOf(t)}function Xt(e,t){return typeof e=="object"&&e!==null&&typeof t=="object"&&t!==null?JSON.stringify(e)===JSON.stringify(t):e===t}const Pr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"/></svg>',jr={props:{content:{type:Object,required:!0},localData:{type:Object,default:()=>({})}},emits:["update:content","update:sidepanel-content","add-state","remove-state"],setup(e,{emit:t}){const n=d(()=>!1),{getIcon:i}=wwLib.useIcons(),{resolveMappingFormula:r}=wwLib.wwFormula.useFormula(),a=R("_wwSelect:registerOption",()=>{}),o=R("_wwSelect:unregisterOption",()=>{}),l=F(null),c=d(()=>{var me,ve;return(ve=(me=l.value)==null?void 0:me.componentRef)==null?void 0:ve.$el}),s=R("_wwSelect:value",F("")),u=R("_wwSelect:type",F("simple"));R("_wwSelect:setValue",()=>{});const f=R("_wwSelect:isDisabled",F(!1)),h=R("_wwSelect:isReadonly",F(!1)),S=R("_wwSelect:updateValue",()=>{}),_=R("_wwSelect:removeSpecificValue",()=>{}),m=R("_wwSelect:focusSelectElement",()=>{}),T=R("_wwSelect:activeDescendant",F(null)),b=R("_wwSelect:isMouseDownOnOption",F(!1)),g=R("_wwSelect:mappingLabel",F(null)),p=R("_wwSelect:mappingValue",F(null)),I=R("_wwSelect:mappingDisabled",F(null)),x=d(()=>({padding:e.content.optionPadding,"background-color":e.content.optionBgColor,color:e.content.optionFontColor,"font-family":e.content.optionFontFamily,"font-size":e.content.optionFontSize,"font-weight":e.content.optionFontWeight,cursor:e.content.optionCursor,"border-radius":e.content.optionBorderRadius,border:e.content.optionBorder,"--ww-select-option-bg-color-hover":e.content.optionBgColorHover,"--ww-select-option-bg-color-focused":e.content.optionBgColorFocused})),D=F(null);ft(async()=>{D.value=await i(e.content.optionIcon)||Pr});const C=d(()=>({width:e.content.optionIconSize,color:e.content.optionIconColor,display:"flex","align-items":"center","justify-content":"center","pointer-events":"none"})),O=d(()=>e.localData&&typeof e.localData=="object"&&"value"in e.localData&&"id"in e.localData&&Object.keys(e.localData).length===2?e.localData.value:typeof e.localData!="object"||e.localData===null?e.localData:r(it(g),e.localData)??e.content.label??e.localData),k=d(()=>e.localData&&typeof e.localData=="object"&&"value"in e.localData&&"id"in e.localData&&Object.keys(e.localData).length===2?e.localData.value:typeof e.localData!="object"||e.localData===null?e.localData:r(it(p),e.localData)??e.content.value??e.localData),y=d(()=>r(it(I),e.localData)),v=d(()=>E==T.value),z=d(()=>u.value==="single"?Xt(s.value,k.value):Array.isArray(s.value)&&s.value.some(me=>Xt(me,k.value))),{optionId:E,handleKeyDown:X,focusFromOptionId:Ee}=Ar({emit:t,optionElement:c,content:e.content}),U=d(()=>({optionId:E,label:O.value,value:k.value,disabled:y.value,isSelected:z.value,_data:e.localData}));o(E),a(E,We(U));const ie=d(()=>!n.value&&!y.value&&!f.value&&!h.value),De=()=>{z.value&&ie.value&&e.content.unselectOnClick?(Pe(),Ee(null)):!z.value&&ie.value&&e.content.selectOnClick&&(S(k.value),Ee(E),m())},ge=me=>{b.value=!0},Qe=()=>{he(()=>{b.value=!1})},et=()=>{b.value=!1},Pe=()=>{ie.value&&(u.value==="single"?S(null):_(k.value))},Me=F({isSelected:!1,isOptionDisabled:!1,label:"",value:"",_data:{}}),Re=()=>{ie.value&&S(k.value)};V([z,y,O,k],([me,ve,Be,lt])=>{Me.value={isSelected:me,isOptionDisabled:ve,label:Be,value:lt,_data:e.localData}},{immediate:!0});const ot={select:{description:"Select the current option",method:Re,editor:{label:"Select",group:"Select Option",icon:"cursor-click"}}};return rt(()=>o(E)),{optionRef:l,optionId:E,handleClick:De,handleMouseDown:ge,handleMouseUp:Qe,handleMouseLeave:et,handleKeyDown:X,isFocused:v,activeDescendant:T,option:U,optionStyles:x,optionIcon:D,optionIconStyle:C,contextMethods:ot,data:Me,contextMarkdown:"### Select Option local informations\n\n        // - `isSelected`: Boolean indicating if the option is selected\n        // - `isOptionDisabled`: Boolean indicating if the option is disabled\n        // - `label`: The label of the option (will be overwritten if defined in the Select root element)\n        // - `value`: The value of the option (will be overwritten if defined in the Select root element)",isOptionDisabled:y}}},Vr=["id","aria-selected","aria-disabled"],$r=["innerHTML"];function Mr(e,t,n,i,r,a){return L(),M("div",{class:se(["ww-select-option",i.isFocused?"focused":"",i.isOptionDisabled?"disabled":""]),style:N(i.optionStyles),ref:"optionRef",onClick:t[0]||(t[0]=(...o)=>i.handleClick&&i.handleClick(...o)),onMousedown:t[1]||(t[1]=(...o)=>i.handleMouseDown&&i.handleMouseDown(...o)),onMouseup:t[2]||(t[2]=(...o)=>i.handleMouseUp&&i.handleMouseUp(...o)),onMouseleave:t[3]||(t[3]=(...o)=>i.handleMouseLeave&&i.handleMouseLeave(...o)),onKeydown:t[4]||(t[4]=(...o)=>i.handleKeyDown&&i.handleKeyDown(...o)),role:"option",id:i.optionId,"aria-selected":e.isSelected,"aria-disabled":i.isOptionDisabled},[Z("span",null,qe(i.data.label),1),i.data.isSelected?(L(),M("div",{key:0,innerHTML:i.optionIcon,style:N(i.optionIconStyle),"aria-hidden":"true"},null,12,$r)):ue("",!0)],46,Vr)}const ai=ne(jr,[["render",Mr],["__scopeId","data-v-ced39687"]]);function Rr(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}let St;function Jt(){Jt.init||(Jt.init=!0,St=Rr()!==-1)}var Lt={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Jt(),he(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",St&&this.$el.appendChild(e),e.data="about:blank",St||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!St&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Br=ir();tr("data-v-b329ee4c");const Ur={class:"resize-observer",tabindex:"-1"};nr();const Nr=Br((e,t,n,i,r,a)=>(L(),Q("div",Ur)));Lt.render=Nr;Lt.__scopeId="data-v-b329ee4c";Lt.__file="src/components/ResizeObserver.vue";function _t(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(t){return typeof t}:_t=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(e)}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wr(e,t,n){return t&&qr(e.prototype,t),e}function On(e){return Kr(e)||Gr(e)||Xr(e)||Jr()}function Kr(e){if(Array.isArray(e))return Yt(e)}function Gr(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Xr(e,t){if(e){if(typeof e=="string")return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}}function Yt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yr(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function Zr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,a,o=function(c){for(var s=arguments.length,u=new Array(s>1?s-1:0),f=1;f<s;f++)u[f-1]=arguments[f];if(a=u,!(i&&c===r)){var h=n.leading;typeof h=="function"&&(h=h(c,r)),(!i||c!==r)&&h&&e.apply(void 0,[c].concat(On(a))),r=c,clearTimeout(i),i=setTimeout(function(){e.apply(void 0,[c].concat(On(a))),i=0},t)}};return o._clear=function(){clearTimeout(i),i=null},o}function oi(e,t){if(e===t)return!0;if(_t(e)==="object"){for(var n in e)if(!oi(e[n],t[n]))return!1;return!0}return!1}var Qr=(function(){function e(t,n,i){Hr(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,i)}return Wr(e,[{key:"createObserver",value:function(n,i){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Yr(n),this.callback=function(l,c){r.options.callback(l,c),l&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},o=a.leading;this.callback=Zr(this.callback,this.options.throttle,{leading:function(c){return o==="both"||o==="visible"&&c||o==="hidden"&&!c}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(l){var c=l[0];if(l.length>1){var s=l.find(function(f){return f.isIntersecting});s&&(c=s)}if(r.callback){var u=c.isIntersecting&&c.intersectionRatio>=r.threshold;if(u===r.oldResult)return;r.oldResult=u,r.callback(u,c)}},this.options.intersection),he(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e})();function li(e,t,n){var i=t.value;if(i)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Qr(e,i,n);e._vue_visibilityState=r}}function ea(e,t,n){var i=t.value,r=t.oldValue;if(!oi(i,r)){var a=e._vue_visibilityState;if(!i){si(e);return}a?a.createObserver(i,n):li(e,{value:i},n)}}function si(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var ta={beforeMount:li,updated:ea,unmounted:si};function na(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i&&i.push(n)||e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&i.splice(i.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map(function(i){i(n)}),(e.get("*")||[]).slice().map(function(i){i(t,n)})}}}var ia={itemsLimit:1e3},ra=/(auto|scroll)/;function ci(e,t){return e.parentNode===null?t:ci(e.parentNode,t.concat([e]))}var Ut=function(t,n){return getComputedStyle(t,null).getPropertyValue(n)},aa=function(t){return Ut(t,"overflow")+Ut(t,"overflow-y")+Ut(t,"overflow-x")},oa=function(t){return ra.test(aa(t))};function Tn(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=ci(e.parentNode,[]),n=0;n<t.length;n+=1)if(oa(t[n]))return t[n];return document.scrollingElement||document.documentElement}}function Zt(e){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(e)}var ui={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function di(){return this.items.length&&Zt(this.items[0])!=="object"}var Qt=!1;if(typeof window<"u"){Qt=!1;try{var la=Object.defineProperty({},"passive",{get:function(){Qt=!0}});window.addEventListener("test",null,la)}catch{}}let sa=0;var ln={name:"RecycleScroller",components:{ResizeObserver:Lt},directives:{ObserveVisibility:ta},props:{...ui,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,n=this.sizeField,i=this.minItemSize;let r=1e4,a=0,o;for(let l=0,c=t.length;l<c;l++)o=t[l][n]||i,o<r&&(r=o),a+=o,e[l]={accumulator:a,size:o};return this.$_computedMinItemSize=r,e}return[]},simpleArray:di,itemIndexByKey(){const{keyField:e,items:t}=this,n={};for(let i=0,r=t.length;i<r;i++)n[t[i][e]]=i;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,n,i,r){const a=ar({id:sa++,index:t,used:!0,key:i,type:r}),o=an({item:n,position:0,nr:a});return e.push(o),o},unuseView(e,t=!1){const n=this.$_unusedViews,i=e.nr.type;let r=n.get(i);r||(r=[],n.set(i,r)),r.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const n=this.itemSize,i=this.gridItems||1,r=this.itemSecondarySize||n,a=this.$_computedMinItemSize,o=this.typeField,l=this.simpleArray?null:this.keyField,c=this.items,s=c.length,u=this.sizes,f=this.$_views,h=this.$_unusedViews,S=this.pool,_=this.itemIndexByKey;let m,T,b,g,p;if(!s)m=T=g=p=b=0;else if(this.$_prerender)m=g=0,T=p=Math.min(this.prerender,c.length),b=null;else{const y=this.getScroll();if(t){let E=y.start-this.$_lastUpdateScrollPosition;if(E<0&&(E=-E),n===null&&E<a||E<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=y.start;const v=this.buffer;y.start-=v,y.end+=v;let z=0;if(this.$refs.before&&(z=this.$refs.before.scrollHeight,y.start-=z),this.$refs.after){const E=this.$refs.after.scrollHeight;y.end+=E}if(n===null){let E,X=0,Ee=s-1,U=~~(s/2),ie;do ie=U,E=u[U].accumulator,E<y.start?X=U:U<s-1&&u[U+1].accumulator>y.start&&(Ee=U),U=~~((X+Ee)/2);while(U!==ie);for(U<0&&(U=0),m=U,b=u[s-1].accumulator,T=U;T<s&&u[T].accumulator<y.end;T++);for(T===-1?T=c.length-1:(T++,T>s&&(T=s)),g=m;g<s&&z+u[g].accumulator<y.start;g++);for(p=g;p<s&&z+u[p].accumulator<y.end;p++);}else{m=~~(y.start/n*i);const E=m%i;m-=E,T=Math.ceil(y.end/n*i),g=Math.max(0,Math.floor((y.start-z)/n*i)),p=Math.floor((y.end-z)/n*i),m<0&&(m=0),T>s&&(T=s),g<0&&(g=0),p>s&&(p=s),b=Math.ceil(s/i)*n}}T-m>ia.itemsLimit&&this.itemsLimitError(),this.totalSize=b;let I;const x=m<=this.$_endIndex&&T>=this.$_startIndex;if(x)for(let y=0,v=S.length;y<v;y++)I=S[y],I.nr.used&&(e&&(I.nr.index=_[I.item[l]]),(I.nr.index==null||I.nr.index<m||I.nr.index>=T)&&this.unuseView(I));const D=x?null:new Map;let C,O,k;for(let y=m;y<T;y++){C=c[y];const v=l?C[l]:C;if(v==null)throw new Error(`Key is ${v} on item (keyField is '${l}')`);if(I=f.get(v),!n&&!u[y].size){I&&this.unuseView(I);continue}O=C[o];let z=h.get(O),E=!1;if(!I)x?z&&z.length?I=z.pop():I=this.addView(S,y,C,v,O):(k=D.get(O)||0,(!z||k>=z.length)&&(I=this.addView(S,y,C,v,O),this.unuseView(I,!0),z=h.get(O)),I=z[k],D.set(O,k+1)),f.delete(I.nr.key),I.nr.used=!0,I.nr.index=y,I.nr.key=v,I.nr.type=O,f.set(v,I),E=!0;else if(!I.nr.used&&(I.nr.used=!0,E=!0,z)){const X=z.indexOf(I);X!==-1&&z.splice(X,1)}I.item=C,E&&(y===c.length-1&&this.$emit("scroll-end"),y===0&&this.$emit("scroll-start")),n===null?(I.position=u[y-1].accumulator,I.offset=0):(I.position=Math.floor(y/i)*n,I.offset=y%i*r)}return this.$_startIndex=m,this.$_endIndex=T,this.emitUpdate&&this.$emit("update",m,T,g,p),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:x}},getListenerTarget(){let e=Tn(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,n=t==="vertical";let i;if(this.pageMode){const r=e.getBoundingClientRect(),a=n?r.height:r.width;let o=-(n?r.top:r.left),l=n?window.innerHeight:window.innerWidth;o<0&&(l+=o,o=0),o+l>a&&(l=a-o),i={start:o,end:o+l}}else n?i={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:i={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return i},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Qt?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const n=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/n)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,i,r;if(this.pageMode){const a=Tn(this.$el),o=a.tagName==="HTML"?0:a[t.scroll],l=a.getBoundingClientRect(),s=this.$el.getBoundingClientRect()[t.start]-l[t.start];n=a,i=t.scroll,r=e+o+s}else n=this.$el,i=t.scroll,r=e;n[i]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const ca={key:0,ref:"before",class:"vue-recycle-scroller__slot"},ua={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function da(e,t,n,i,r,a){const o=H("ResizeObserver"),l=or("observe-visibility");return ri((L(),M("div",{class:se(["vue-recycle-scroller",{ready:r.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...c)=>a.handleScroll&&a.handleScroll(...c))},[e.$slots.before?(L(),M("div",ca,[Te(e.$slots,"before")],512)):ue("v-if",!0),(L(),Q($e(n.listTag),{ref:"wrapper",style:N({[e.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:se(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:K(()=>[(L(!0),M(Ke,null,Ot(r.pool,c=>(L(),Q($e(n.itemTag),ae({key:c.nr.id,style:r.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${c.position}px) translate${e.direction==="vertical"?"X":"Y"}(${c.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&r.hoverKey===c.nr.key}]]},lr(n.skipHover?{}:{mouseenter:()=>{r.hoverKey=c.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:K(()=>[Te(e.$slots,"default",{item:c.item,index:c.nr.index,active:c.nr.used})]),_:2},1040,["style","class"]))),128)),Te(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(L(),M("div",ua,[Te(e.$slots,"after")],512)):ue("v-if",!0),te(o,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[l,a.handleVisibilityChange]])}ln.render=da;ln.__file="src/components/RecycleScroller.vue";var sn={name:"DynamicScroller",components:{RecycleScroller:ln},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let n,i;if(t.borderBoxSize){const r=t.borderBoxSize[0];n=r.inlineSize,i=r.blockSize}else n=t.contentRect.width,i=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,n,i)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...ui,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:di,itemsWithSize(){const e=[],{items:t,keyField:n,simpleArray:i}=this,r=this.vscrollData.sizes,a=t.length;for(let o=0;o<a;o++){const l=t[o],c=i?o:l[n];let s=r[c];typeof s>"u"&&!this.$_undefinedMap[c]&&(s=0),e.push({item:l,id:c,size:s})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const n=this.$el.scrollTop;let i=0,r=0;const a=Math.min(e.length,t.length);for(let l=0;l<a&&!(i>=n);l++)i+=t[l].size||this.minItemSize,r+=e[l].size||this.minItemSize;const o=r-i;o!==0&&(this.$el.scrollTop+=o)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=na()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const n=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function fa(e,t,n,i,r,a){const o=H("RecycleScroller");return L(),Q(o,ae({ref:"scroller",items:a.itemsWithSize,"min-item-size":n.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:a.onScrollerResize,onVisible:a.onScrollerVisible}),{default:K(({item:l,index:c,active:s})=>[Te(e.$slots,"default",Kt(sr({item:l.item,index:c,active:s,itemWithSize:l})))]),before:K(()=>[Te(e.$slots,"before")]),after:K(()=>[Te(e.$slots,"after")]),empty:K(()=>[Te(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}sn.render=fa;sn.__file="src/components/DynamicScroller.vue";var fi={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const n=this.vscrollData.sizes[t],i=this.vscrollData.sizes[e];n!=null&&n!==i&&this.applySize(n)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,n=this.$el.offsetHeight;this.applyWidthHeight(t,n)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const n=~~(this.vscrollParent.direction==="vertical"?t:e);n&&this.size!==n&&this.applySize(n)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,n){this.id===e&&this.applyWidthHeight(t,n)}},render(){return rr(this.tag,this.$slots.default())}};fi.__file="src/components/DynamicScrollerItem.vue";function ha(e,t){const i=an(new Map),r=(...u)=>JSON.stringify(u),a=(u,...f)=>(i.set(u,e(...f)),i.get(u)),o=(...u)=>a(r(...u),...u),l=(...u)=>{i.delete(r(...u))},c=()=>{i.clear()},s=(...u)=>{const f=r(...u);return i.has(f)?i.get(f):a(f,...u)};return s.load=o,s.delete=l,s.clear=c,s.generateKey=r,s.cache=i,s}const ma={components:{DynamicScroller:sn,DynamicScrollerItem:fi,"ww-element-option":ai},props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["update:sidepanel-content"],setup(e,{emit:t}){d(()=>!1);const n=d(()=>!1),i=R("_wwSelect:rawData",F([])),r=R("_wwSelect:searchState",F(null)),{updateSearch:a}=R("_wwSelect:useSearch",{}),o=R("_wwSelect:registerOptionProperties",()=>{}),l=d(()=>e.content.virtualScroll),c=d(()=>e.content.virtualScrollSizeDependencies),s=d(()=>e.content.virtualScrollMinItemSize||40),u=d(()=>e.content.virtualScrollBuffer||400),f=d(()=>wwLib.wwLang.getText(e.content.emptyStateText)),h=d(()=>{const g=i.value;return Array.isArray(g)?g:[]}),S=d(()=>!h.value||h.value.length===0?{}:h.value[0]),_=ha((g,p)=>g.filter(I=>{var D,C,O;if(typeof I!="object"||I===null){const k=I.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),y=p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return k.includes(y)}else return((C=(D=r.value)==null?void 0:D.searchBy)!=null&&C.length?(O=r.value)==null?void 0:O.searchBy:Object.keys(I)).some(y=>{const v=I[y];if(!v)return!1;const z=v.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),E=p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return z.includes(E)})})),m=d(()=>!r.value||!r.value.value?h.value:_(h.value,r.value.value)),T=d(()=>m.value.map((g,p)=>typeof g!="object"||g===null?{value:g,id:`id_${p}`}:{...g,id:g.id??`id_${p}`}));V(m,()=>{if(a){const g=r.value&&r.value.value?m.value:[];a({...r.value,searchMatches:g})}});const b=d(()=>({"font-family":e.content.emptyStateFontFamily,"font-size":e.content.emptyStateFontSize,"font-weight":e.content.emptyStateFontWeight,color:e.content.emptyStateFontColor,padding:e.content.emptyStatePadding,"text-align":e.content.emptyStateTextAlign,width:"100%"}));return V(S,g=>{t("update:sidepanel-content",{path:"optionProperties",value:g}),o&&o(g)},{immediate:!0}),{emptyStateText:f,filteredOptions:m,virtualScroll:l,virtualScrollSizeDependencies:c,virtualScrollMinItemSize:s,virtualScrollBuffer:u,showEmptyStateInEditor:n,dynamicScrollerItems:T,emptyStateStyle:b}}};function ga(e,t,n,i,r,a){const o=H("ww-element-option"),l=H("wwLayoutItemContext"),c=H("DynamicScrollerItem"),s=H("DynamicScroller");return L(),M(Ke,null,[i.filteredOptions.length>0?(L(),Q(s,{style:{height:"100%"},items:i.dynamicScrollerItems,"min-item-size":i.virtualScrollMinItemSize,buffer:i.virtualScrollBuffer,key:i.filteredOptions.length},{default:K(({item:u,index:f,active:h})=>[te(c,{item:u,active:h,"size-dependencies":JSON.stringify(u),"data-index":f},{default:K(()=>[(L(),Q(l,{key:f,"is-repeat":"",index:f,data:u},{default:K(()=>[Z("div",{style:N(f!=i.filteredOptions.length-1?{paddingBottom:n.content.optionSpacing}:{})},[te(o,{"local-data":u,content:n.content,wwEditorState:e.wwEditorState},null,8,["local-data","content","wwEditorState"])],4)]),_:2},1032,["index","data"]))]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items","min-item-size","buffer"])):ue("",!0),ri(Z("div",{style:N(i.emptyStateStyle)},[Z("span",null,qe(i.emptyStateText),1)],4),[[cr,i.filteredOptions.length===0||i.showEmptyStateInEditor]])],64)}const hi=ne(ma,[["render",ga]]),va={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["element-event","trigger-event","update:sidepanel-content"],setup(e,{emit:t}){const{updateHasSearch:n,updateSearchElement:i,updateSearch:r,autoFocusSearch:a,focusSearch:o,isSearchBarFocused:l}=R("_wwSelect:useSearch",{}),c=F(null),s=d(()=>c.value),u=d(()=>(e.content.searchBy||[]).filter(b=>b&&b.filter).map(b=>JSON.parse(b.filter.replace(/'/g,'"'))).flat()),f=Gt((b,g)=>{r&&r({value:b,searchBy:g})},300),h=d(()=>{const b=e.content.searchBorder?{"border-top":e.content.searchBorderTop,"border-right":e.content.searchBorderRight,"border-bottom":e.content.searchBorderBottom,"border-left":e.content.searchBorderLeft}:{border:e.content.searchBorderAll};return{width:e.content.searchWidth,height:e.content.searchHeight,"border-radius":e.content.searchBorderRadius,padding:e.content.searchPadding,margin:e.content.searchMargin,"background-color":e.content.searchBgColor,"font-family":e.content.searchFontFamily,"font-size":e.content.searchFontSize,"font-weight":e.content.searchFontWeight,color:e.content.searchFontColor,"--placeholder-color":e.content.searchPlaceholderColor,outline:e.content.searchOutline,"outline-offset":e.content.searchOutlineOffset,cursor:"text",...b}}),S=d(()=>wwLib.wwLang.getText(e.content.searchPlaceholder)),_=b=>{var g;f((g=b==null?void 0:b.target)==null?void 0:g.value,u)},m=()=>{l.value=!0},T=()=>{l.value=!1};return V(s,b=>{i&&i(b)}),on(()=>{n&&n(!0),r&&r({value:"",searchBy:u,searchMatches:[]})}),rt(()=>{n&&n(!1)}),{searchElementRef:c,handleInputChange:_,handleSearchFocus:m,handleSearchBlur:T,searchStyles:h,searchPlaceholder:S}}},ya=["placeholder"];function wa(e,t,n,i,r,a){return L(),M("input",{ref:"searchElementRef",name:"select-search",style:N([i.searchStyles]),class:se(["ww-select-search"]),onInput:t[0]||(t[0]=(...o)=>i.handleInputChange&&i.handleInputChange(...o)),onFocus:t[1]||(t[1]=(...o)=>i.handleSearchFocus&&i.handleSearchFocus(...o)),onBlur:t[2]||(t[2]=(...o)=>i.handleSearchBlur&&i.handleSearchBlur(...o)),placeholder:i.searchPlaceholder},null,44,ya)}const mi=ne(va,[["render",wa],["__scopeId","data-v-3b45a4ec"]]),ba={components:{"ww-element-options-list":hi,"ww-element-search":mi},props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},setup(e){const t=R("_wwSelect:updateDropdownConfig",()=>{}),n=d(()=>({side:e.content.side,align:e.content.align,offsetX:e.content.offsetX,offsetY:e.content.offsetY,autoPosition:e.content.autoPosition,boundOffset:e.content.boundOffset}));return V(n,()=>{t(n.value)},{immediate:!0,deep:!0}),{dropdownConfig:n}}};function pa(e,t,n,i,r,a){return Te(e.$slots,"default")}const Sa=ne(ba,[["render",pa]]);function _a({elementRef:e,options:t,isOpen:n,methods:{openDropdown:i,closeDropdown:r,toggleValue:a}}){const o=`ww-select-dropdown-${wwLib.wwUtils.getUid()}`,l=F(""),c=F(0),s=F(""),u=b=>{const g=t.value[b];c.value=b,s.value=g.value,l.value=g.optionId},f=b=>{if(b===null){h();return}const g=t.value.findIndex(p=>p.optionId===b);u(g)},h=()=>{l.value="",c.value=0,s.value=""},S=()=>{var b;(b=e.value)==null||b.focus()};V(t,()=>{if(h(),t.value.length>0){const b=t.value.find(g=>g.isSelected);if(b){const g=t.value.findIndex(p=>p.value===b.value);u(g)}}},{immediate:!0,deep:!0});const _=b=>{const g=t.value.length;if(g===0)return;let p;n.value?l.value===""?p=b>0?0:g-1:p=(c.value+b+g)%g:p=0,u(p)},m=b=>{const p={ArrowDown:()=>{b.preventDefault(),n.value?_(1):i()},ArrowUp:()=>{b.preventDefault(),n.value?_(-1):i()},Enter:()=>{b.preventDefault(),n.value&&s.value!=null&&s.value!==void 0&&s.value!==""?a(s.value):n.value||i()},Escape:()=>{b.preventDefault(),n.value&&(r(),h())}}[b.key];p&&p()},T=b=>{const g=t.value.findIndex(p=>p.value===b);g!==-1&&u(g)};return B("_wwSelect:activeDescendant",l),B("_wwSelect:focusedOptionIndex",c),B("_wwSelect:setInitialFocus",T),B("_wwSelect:focusFromOptionId",f),B("_wwSelect:focusSelectElement",S),{dropdownId:o,activeDescendant:l,handleKeydown:m,resetFocus:h,setInitialFocus:T}}function Ia(e,{updateSearch:t}){const n=F(!1),i=F(null),r=F(!1);function a(u){n.value=u}function o(u){i.value=u}function l(){he(()=>{i.value&&i.value.focus()})}function c(u){r.value=We(u)}function s(){i.value&&(i.value.value="",t({...e,value:""}))}return{hasSearch:n,autoFocusSearch:r,updateHasSearch:a,updateSearchElement:o,resetSearch:s,updateAutoFocusSearch:c,focusSearch:l}}const Oa={components:{SelectTriger:kr,SelectDropdown:Sa,SelectOption:ai,SelectOptionList:hi,SelectSearch:mi},props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","update:content","update:sidepanel-content","add-state","remove-state"],setup(e,{emit:t}){const n=F(0),i=d(()=>!1),r=d(()=>!1),a=ht(wwLib.getFrontDocument().querySelector("#app")),o=d(()=>e.content.selectType),l=d(()=>o.value==="single"?e.content.initValueSingle??null:e.content.initValueMulti||[]),{value:c,setValue:s}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",type:o.value==="single"?"any":"array",defaultValue:l}),{resolveMappingFormula:u}=wwLib.wwFormula.useFormula(),f=d(()=>e.content.fieldName||e.wwElementState.name),h=d(()=>e.content.validation),S=d(()=>e.content.customValidation);R("_wwForm:useForm",()=>{})(c,{fieldName:f,validation:h,customValidation:S,initialValue:l},{elementState:e.wwElementState,emit:t,sidepanelFormPath:"form",setValue:s});const m=F(null),T=F(null),b=d(()=>e.content.autoFocus),g=F(new Map),p=d(()=>Array.from(g.value.values())),I=F(!1),x=F(!1),D=F(!1),C=F(!1),O=d(()=>e.content.choices||[]),k=d(()=>x.value),y=d(()=>x.value||D.value),v=d(()=>e.content.disabled||!1),z=d(()=>e.content.readonly||!1),E=d(()=>e.content.unselectOnClick||!1),X=d(()=>e.content.initialState||"closed"),Ee=d(()=>e.content.closeOnClickOutside||!1),U=d(()=>e.content.manualTrigger||!1),ie=F(null),De=F({}),ge=F(null),Qe=F(0),et=F(0),Pe=F(!0),Me=d(()=>e.content.mappingLabel),Re=d(()=>e.content.mappingValue),ot=d(()=>e.content.mappingDisabled),tt=d(()=>e.content.showSearch),me=d(()=>e.content.allowScrollingWhenOpen),ve=()=>{if(!(m!=null&&m.value))return;const w=m.value.getBoundingClientRect();Be.value={position:"absolute",top:`${w.top+w.height+parseInt(e.content.offsetY)}px`,left:`${w.left+parseInt(e.content.offsetX)}px`}};let Be=F({});const lt=d(()=>I.value&&e.content.zIndexOpen?{zIndex:`${e.content.zIndexOpen} !important`}:{}),At=d(()=>{const w=e.content.dropdownBorder?{"border-top":e.content.dropdownBorderTop,"border-right":e.content.dropdownBorderRight,"border-bottom":e.content.dropdownBorderBottom,"border-left":e.content.dropdownBorderLeft}:{border:e.content.dropdownBorderAll};return{width:e.content.dropdownWidth,"max-height":e.content.dropdownMaxHeight,"border-radius":e.content.dropdownBorderRadius,padding:e.content.dropdownPadding,"background-color":e.content.dropdownBgColor,"box-shadow":e.content.dropdownShadows,overflow:"auto",...w}}),P=F(Date.now()),ee=(w,A)=>{g.value.set(w,A)},J=w=>{g.value.delete(w)},ye=w=>{w&&(De.value=w)},G=w=>{ie.value=w},Y=w=>{if(o.value==="single")Array.isArray(w)&&(console.warn("Single select component received an array value. Only the first value will be used."),w=w[0]),s(w),t("trigger-event",{name:"change",event:{value:w}});else{Array.isArray(w)||(w=[w]);const A=Array.isArray(c.value)?[...c.value]:[];for(let le of w)In(A,le)===-1&&(!e.content.limit||A.length<e.content.limit)&&A.push(le);s(A),t("trigger-event",{name:"change",event:{value:A}})}e.content.closeOnSelect&&oe()},re=w=>{var ce;if(w===""||w==null||w===void 0)return;const A=Array.from(g.value).find(([de,Ie])=>Ie.value===w);if(!A&&!(p!=null&&p.length)>1||(ce=A==null?void 0:A[1])!=null&&ce.disabled)return;o.value==="single"?c.value:[...Array.isArray(c.value)?c.value:[]];let le=!1,$;if(o.value==="single")c.value===w?e.content.unselectOnClick&&(s(null),le=!0,e.content.closeOnSelect&&oe()):e.content.selectOnClick&&(s(w),le=!0,e.content.closeOnSelect&&oe()),$=c.value;else{const de=Array.isArray(c.value)?[...c.value]:[];let Ie=-1;typeof w=="object"&&w!==null?Ie=de.findIndex(Rt=>typeof Rt!="object"||Rt===null?!1:JSON.stringify(Rt)===JSON.stringify(w)):Ie=de.indexOf(w),Ie>=0?e.content.unselectOnClick&&(de.splice(Ie,1),le=!0,e.content.closeOnSelect&&oe()):e.content.selectOnClick&&(de.push(w),le=!0,e.content.closeOnSelect&&oe()),s(de),$=de}le&&t("trigger-event",{name:"change",event:{value:$}})};function j(w){if(o.value!=="multiple"||v.value||z.value)return;Pe.value=!1;const A=Array.isArray(c.value)?[...c.value]:[],le=In(A,w);le!==-1&&(A.splice(le,1),s(A)),t("trigger-event",{name:"change",event:{value:A}}),e.content.closeOnSelect?(Pe.value=!0,oe()):he(()=>{Pe.value=!0})}const{hasSearch:pe,updateHasSearch:vt,updateSearchElement:Pt,resetSearch:nt,autoFocusSearch:st,updateAutoFocusSearch:Ce,focusSearch:je}=Ia(ie,{updateSearch:G});function Ue(){if(v.value||z.value)return;const w=m.value.getBoundingClientRect();Be.value={position:"absolute",top:`${w.top+w.height+parseInt(e.content.offsetY)}px`,left:`${w.left+parseInt(e.content.offsetX)}px`},I.value=!0,he(ve),st.value&&je()}function oe(){Pe.value&&(nt(),Gi(),I.value=!1)}function we(w=null){i.value||U.value&&w||(I.value?oe():Ue())}function Se(){s(l.value||null),t("trigger-event",{name:"change",event:{value:l.value||null}})}function fe(w){Ee.value&&I.value&&!m.value.contains(w.target)&&!T.value.contains(w.target)&&!i.value&&Date.now()>P.value+400&&oe()}function Ne(){v.value||z.value||(x.value=!0)}function Ve(){C.value||(x.value=!1)}function _e(){m.value&&!v.value&&!z.value&&m.value.focus()}const{dropdownId:yt,activeDescendant:Wi,handleKeydown:Ki,resetFocus:Gi,setInitialFocus:vn}=_a({elementRef:m,options:p,isOpen:I,methods:{openDropdown:Ue,closeDropdown:oe,toggleValue:re}});function yn(){c.value&&(o.value==="single"?vn(c.value):Array.isArray(c.value)&&c.value.length&&vn(c.value[0]))}const Xi=()=>{m.value&&(ge.value&&(ge.value.disconnect(),ge.value=null),ge.value=new ResizeObserver(Gt(w=>{if(w[0]){const A=m.value.getBoundingClientRect();Qe.value=A.width,et.value=A.height}},16)),ge.value.observe(m.value))},Ji=d(()=>{const w=new Map(O.value.map($=>{const ce=typeof $!="object"||$===null;let de,Ie;return ce?(de=$,Ie=$):(de=u(it(Re),$)??$.value??$,Ie=$),[de,Ie]})),A=$=>typeof $!="object"||$===null?{value:$,label:$,disabled:!1,data:$}:{value:u(it(Re),$)??$.value??$,label:u(it(Me),$)??$.label??$.value??$,disabled:$.disabled||!1,data:$||{}},le=$=>{const ce=Array.from(w.entries()).find(([de,Ie])=>Xt(de,$));return ce?ce[1]:null};if(o.value==="single"){const $=le(c.value);return $?A($):null}else return(Array.isArray(c.value)?c.value:[]).map(ce=>{const de=le(ce);return de?A(de):{value:ce,label:ce,isInOptions:!1,info:"This value is not in the defined options"}})}),Yi=d(()=>{var w;return((w=p.value)==null?void 0:w.map(({optionId:A,...le})=>le))||F([])}),jt=F({options:Yi,active:{value:c,details:Ji},utils:{type:o,isOpen:I,triggerWidth:Qe,triggerHeight:et}});let Vt=null,$t=null,wn=!1,ct=!1,Mt="";try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){wn=!0}}))}catch{}ct=wn?{passive:!1}:!1,Mt="onwheel"in document.createElement("div")?"wheel":"mousewheel";const He=w=>{w.preventDefault()},bn=w=>{if({37:1,38:1,39:1,40:1}[w.keyCode])return He(w),!1},Zi=()=>{const w=wwLib.getFrontWindow(),A=wwLib.getFrontDocument();!w||!A||(Vt={...A.documentElement.style},$t={...A.body.style},A.body.style.touchAction="none",w.addEventListener("DOMMouseScroll",He,!1),w.addEventListener(Mt,He,ct),w.addEventListener("touchmove",He,ct),w.addEventListener("keydown",bn,!1))},pn=()=>{const w=wwLib.getFrontDocument(),A=wwLib.getFrontWindow();!w||!A||Vt!==null&&$t!==null&&(w.body.style.touchAction="",w.body.style["touch-action"]="",A.removeEventListener("DOMMouseScroll",He,!1),A.removeEventListener(Mt,He,ct),A.removeEventListener("touchmove",He,ct),A.removeEventListener("keydown",bn,!1),Vt=null,$t=null)};V(pe,w=>{w?jt.value.search={value:d(()=>{var A;return((A=ie.value)==null?void 0:A.value)||""}),searchBy:d(()=>{var A;return((A=ie.value)==null?void 0:A.searchBy)||[]}),searchMatches:d(()=>{var A;return((A=ie.value)==null?void 0:A.searchMatches)||[]})}:delete jt.value.search},{immediate:!0}),V(b,w=>{Ce&&Ce(w)}),V(tt,()=>{vt(tt)}),V(x,(w,A)=>{w&&!A?t("trigger-event",{name:"focus",event:null}):!w&&A&&t("trigger-event",{name:"blur",event:null})}),V(y,w=>{t(w?"add-state":"remove-state","focus")},{immediate:!0}),V(I,()=>{he(ve),yn(),I.value?me.value||Zi():me.value||pn()}),V(c,()=>{he(ve)},{deep:!0}),V([l,o],()=>{l.value!==null&&l.value!==void 0||Array.isArray(l.value)&&l.value.length?(s(l.value),he(Gt(yn,300))):s(null),t("trigger-event",{name:"initValueChange",event:{value:l.value}})},{immediate:!0}),V(X,()=>{X.value&&X.value==="open"?Ue():r.value||oe()},{immediate:!0});const wt=F({}),Sn=w=>({data:A,markdown:le})=>{const $=wt.value,ce={data:{...$.data,[w]:A},methods:{},markdown:{...$.markdown,[w]:le}};wwLib.wwElement.useRegisterElementLocalContext("select",ce.data,ce.methods,ce.markdown),wt.value=ce},Qi=Sn("selectTrigger"),er=Sn("select");return B("_wwSelect:mappingLabel",Me),B("_wwSelect:mappingValue",Re),B("_wwSelect:mappingDisabled",ot),B("_wwSelect:rawData",O),B("_wwSelect:options",p),B("_wwSelect:type",o),B("_wwSelect:value",c),B("_wwSelect:setValue",s),B("_wwSelect:isDisabled",v),B("_wwSelect:isReadonly",z),B("_wwSelect:canUnselect",E),B("_wwSelect:searchState",ie),B("_wwSelect:optionProperties",De),B("_wwSelect:updateValue",Y),B("_wwSelect:removeSpecificValue",j),B("_wwSelect:registerOption",ee),B("_wwSelect:unregisterOption",J),B("_wwSelect:registerOptionProperties",ye),B("_wwSelect:registerTriggerLocalContext",Qi),B("_wwSelect:dropdownMethods",{closeDropdown:oe}),B("_wwSelect:useSearch",{updateHasSearch:vt,updateSearchElement:Pt,updateSearch:G,updateAutoFocusSearch:Ce,isSearchBarFocused:D}),B("_wwSelect:isMouseDownOnOption",C),B("_wwSelect:localContext",wt),er({data:jt,markdown:"### Select local informations\n\n            #### options\n            Array of all available options in the dropdown. Each option contains:\n            - `value`: Option's value\n            - `label`: Display text\n            - `disabled`: Boolean indicating if option is disabled\n            - `isSelected`: Boolean indicating if option is selected\n            - `data`: Data from the repeat context (optional)\n\n            #### active\n            Information about currently selected option(s):\n            - `value`: Current selection (single value or array for multiple select)\n            - `details`: Detailed information about selected option(s)\n\n            #### utils\n            Component state information:\n            - `type`: Select type ('single' or 'multiple')\n            - `isOpen`: Boolean indicating if dropdown is open\n            - `triggerWidth`: Width of trigger element\n            - `triggerHeight`: Height of trigger element\n\n            #### search (optional)\n            Present when search is enabled:\n            - `value`: Current search input value\n            - `searchBy`: Fields to search by\n            - `searchMatches`: Options matching search criteria"}),Ce(b),on(()=>{he(()=>{Xi()}),wwLib.getFrontDocument().addEventListener("click",fe),wwLib.getFrontWindow().addEventListener("scroll",ve)}),rt(()=>{ge.value&&(ge.value.disconnect(),ge.value=null),pn(),wwLib.getFrontDocument().removeEventListener("click",fe)}),V(De,w=>{t("update:sidepanel-content",{path:"optionProperties",value:w})},{immediate:!0,deep:!0}),{appDivRef:a,showSearch:tt,componentKey:n,isEditing:i,forceOpenInEditor:r,isOpen:I,isReallyFocused:x,isSearchBarFocused:D,isFocused:k,isAnySelectElementFocused:y,triggerElement:m,dropdownElement:T,floatingStyles:Be,dropdownStyles:At,dropdownId:yt,activeDescendant:Wi,isDisabled:v,selectType:o,handleKeydown:Ki,handleFocus:Ne,handleBlur:Ve,focusInput:_e,toggleDropdown:we,resizeObserver:ge,options:p,currentLocalContext:wt,variableValue:c,lastTriggeredComponentAction:P,selectStyles:lt,openDropdown:Ue,closeDropdown:oe,toggleDropdown:we,updateValue:Y,resetValue:Se,removeSpecificValue:j,resetSearch:nt}},methods:{resetLastTriggerComponentAction(){this.lastTriggeredComponentAction=Date.now()},actionOpenDropdown(){this.resetLastTriggerComponentAction(),this.openDropdown()},actionCloseDropdown(){this.resetLastTriggerComponentAction(),this.closeDropdown()},actionToggleDropdown(){this.resetLastTriggerComponentAction(),this.toggleDropdown()},actionUpdateValue(e){this.resetLastTriggerComponentAction(),this.updateValue(e)},actionResetValue(){this.resetLastTriggerComponentAction(),this.resetValue()},actionRemoveSpecificValue(e){this.resetLastTriggerComponentAction(),this.removeSpecificValue(e)},actionResetSearch(){this.resetLastTriggerComponentAction(),this.resetSearch()},actionFocusInput(){this.resetLastTriggerComponentAction(),this.focusInput()}}},Ta=["aria-haspopup","aria-expanded","aria-controls","aria-activedescendant","tabindex","aria-disabled"],xa=["id","role","aria-multiselectable"],Ca=["name","value","required"];function Ea(e,t,n,i,r,a){const o=H("SelectTriger"),l=H("SelectSearch"),c=H("SelectOptionList"),s=H("SelectDropdown");return L(),M("div",{class:se(["ww-select",{"ww-select-z-index":i.isOpen&&n.content.zIndexOpen}]),style:N({"--select-z-index":i.isOpen&&n.content.zIndexOpen?n.content.zIndexOpen:"auto"}),ref:"componentKey","data-ww-flag":"ww-select"},[Z("div",{class:"ww-select__trigger",ref:"triggerElement",onClick:t[0]||(t[0]=(...u)=>i.toggleDropdown&&i.toggleDropdown(...u)),onKeydown:t[1]||(t[1]=(...u)=>i.handleKeydown&&i.handleKeydown(...u)),onFocus:t[2]||(t[2]=(...u)=>i.handleFocus&&i.handleFocus(...u)),onBlur:t[3]||(t[3]=(...u)=>i.handleBlur&&i.handleBlur(...u)),role:"combobox","aria-haspopup":i.selectType==="single"?"listbox":"true","aria-expanded":i.isOpen,"aria-controls":i.dropdownId,"aria-activedescendant":i.activeDescendant,tabindex:i.isDisabled?-1:0,"aria-disabled":i.isDisabled},[te(o,{content:n.content,onRemoveMultiselectValue:i.removeSpecificValue},null,8,["content","onRemoveMultiselectValue"])],40,Ta),i.isOpen?(L(),Q(ur,{key:0,to:i.appDivRef},[Z("div",{class:"ww-select__dropdown__wrapper",style:N({pointerEvents:i.isEditing&&i.forceOpenInEditor?"none":"auto"})},[Z("div",{class:"ww-select__dropdown",ref:"dropdownElement",style:N([i.floatingStyles||{}]),id:i.dropdownId,role:i.selectType==="single"?"listbox":"group","aria-multiselectable":i.selectType==="multiple","aria-label":"Select options","inherit-component-style":""},[Z("div",{style:N([i.dropdownStyles])},[te(s,{content:n.content,wwEditorState:e.wwEditorState},{default:K(()=>[i.showSearch?(L(),Q(l,{key:0,content:n.content,wwEditorState:e.wwEditorState},null,8,["content","wwEditorState"])):ue("",!0),te(c,{content:n.content,wwEditorState:e.wwEditorState},null,8,["content","wwEditorState"])]),_:1},8,["content","wwEditorState"])],4)],12,xa)],4)],8,["to"])):ue("",!0),Z("input",{type:"input",name:n.content.fieldName,value:i.variableValue,required:n.content.required,tabindex:"-1",class:"fake-input"},null,8,Ca)],6)}const cd=ne(Oa,[["render",Ea],["__scopeId","data-v-ac036ed2"]]),Da={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event"],computed:{formName(){return this.wwElementState.name},isEditing(){return!1},isSelected(){return!1}},methods:{async onSubmit(){this.$emit("trigger-event",{name:"submit"})}}},La=["name","autocomplete"];function za(e,t,n,i,r,a){const o=H("wwLayout");return L(),M("form",{name:a.formName,autocomplete:n.content.autocomplete,class:se(["ww-form-container",{editing:a.isEditing,selected:a.isSelected}]),"data-ww-flag":"form-container",onSubmit:t[0]||(t[0]=Dt((...l)=>a.onSubmit&&a.onSubmit(...l),["prevent"]))},[te(o,{class:"ww-form-container__content",path:"formContent","ww-responsive":"wwLayout"})],42,La)}const ud=ne(Da,[["render",za],["__scopeId","data-v-92b74636"]]),Fa={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0},wwElementState:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["update:content:effect","trigger-event","add-state","remove-state"],setup(e){const{value:t,setValue:n}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",type:"boolean",defaultValue:d(()=>e.content.value===void 0?!1:e.content.value)});return{variableValue:t,setValue:n,uniqueId:wwLib.wwUtils.getUid()}},computed:{value(){return!!this.variableValue},isEditing(){return!1},isSelected(){return!1},cssVariables(){let e="row";return this.content.containerPosition==="left"||this.content.containerPosition==="right"?this.content.containerPosition==="left"?e="row-reverse":e="row":this.content.containerPosition==="top"?e="column-reverse":e="column",{"--container-direction":e}},isReadonly(){return this.wwElementState.props.readonly===void 0?this.content.readonly:this.wwElementState.props.readonly},attributes(){return this.wwElementState.props.attributes},checkboxStates(){const e=[];return this.value&&!this.isSelected&&e.push("checked"),this.isReadonly&&e.push("readonly"),e}},watch:{"content.value"(e){e=!!e,e!==this.value&&(this.setValue(e),this.$emit("trigger-event",{name:"initValueChange",event:{value:e}}))},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}},methods:{handleManualInput(e){const t=!!e.target.checked;t!==this.value&&(this.setValue(t),this.$emit("trigger-event",{name:"change",event:{domEvent:e,value:t}}))}}},ka=["id","checked","value","name","required","disabled"];function Aa(e,t,n,i,r,a){const o=H("wwElement",!0);return L(),Q($e(a.isEditing?"div":"label"),{class:se(["ww-webapp-checkbox",{editing:a.isEditing}]),style:N(a.cssVariables),for:`${n.wwElementState.name}-${i.uniqueId}-${n.uid}`},{default:K(()=>[Z("input",ae({id:`${n.wwElementState.name}-${i.uniqueId}-${n.uid}`,ref:"checkboxInput",checked:a.value,value:a.value,type:"checkbox",name:`${n.wwElementState.name}-${i.uniqueId}-${n.uid}`,class:n.content.checkbox&&"hidden",required:n.content.required,disabled:a.isReadonly},a.attributes,{onInput:t[0]||(t[0]=l=>a.handleManualInput(l)),onClick:t[1]||(t[1]=Dt(()=>{},["stop"]))}),null,16,ka),n.content.checkbox?(L(),Q($e(a.isEditing?"div":"label"),{key:0,for:`${n.wwElementState.name}-${i.uniqueId}-${n.uid}`},{default:K(()=>[te(o,ae(n.content.checkbox,{states:a.checkboxStates}),null,16,["states"])]),_:1},8,["for"])):ue("",!0),(L(),Q($e(a.isEditing?"div":"label"),{for:`${n.wwElementState.name}-${i.uniqueId}-${n.uid}`},{default:K(()=>[n.content.isEmbeddedContainer?(L(),Q(o,ae({key:0,class:"embedded-container"},n.content.embeddedContainer),null,16)):ue("",!0)]),_:1},8,["for"]))]),_:1},8,["style","class","for"])}const dd=ne(Fa,[["render",Aa],["__scopeId","data-v-102c3127"]]),Pa={center:"center",right:"flex-end",left:"flex-start",justify:"center"},ja={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["update:content","update:content:effect","change-menu-visibility","change-borders-style","add-state","remove-state","trigger-event"],setup(e){const{hasLink:t,tag:n,properties:i}=wwLib.wwElement.useLink({isDisabled:d(()=>e.content.disabled)});return{hasLink:t,linkTag:n,properties:i}},data(){return{isReallyFocused:!1}},computed:{buttonStyle(){return{justifyContent:Pa[this.content["_ww-text_textAlign"]]||"center"}},isEditing(){return!1},tag(){return this.isEditing?"div":this.hasLink?this.linkTag:this.content.buttonType==="submit"||this.content.buttonType==="reset"||this.content.buttonType==="button"?"button":"div"},buttonType(){return this.isEditing||this.hasLink?"":this.content.buttonType==="submit"||this.content.buttonType==="reset"||this.content.buttonType==="button"?this.content.buttonType:""},text(){return this.wwElementState.props.text},isFocused(){return this.isReallyFocused}},watch:{"content.disabled":{immediate:!0,handler(e){e?this.$emit("add-state","disabled"):this.$emit("remove-state","disabled")}},isReallyFocused(e,t){e&&!t?this.$emit("trigger-event",{name:"focus"}):!e&&t&&this.$emit("trigger-event",{name:"blur"})},isFocused:{immediate:!0,handler(e){e?this.$emit("add-state","focus"):this.$emit("remove-state","focus")}}},methods:{onBlur(){this.isReallyFocused=!1}}};function Va(e,t,n,i,r,a){const o=H("wwElement",!0),l=H("wwText");return L(),Q($e(a.tag),ae({class:["ww-button",{button:a.tag,"-link":i.hasLink&&!a.isEditing}],type:a.buttonType,style:a.buttonStyle,"data-ww-flag":"btn-"+n.content.buttonType,disabled:n.content.disabled},i.properties,{onFocus:t[0]||(t[0]=c=>r.isReallyFocused=!0),onBlur:t[1]||(t[1]=c=>a.onBlur(c))}),{default:K(()=>[n.content.hasLeftIcon&&n.content.leftIcon?(L(),Q(o,Kt(ae({key:0},n.content.leftIcon)),null,16)):ue("",!0),te(l,{tag:"span",text:a.text},null,8,["text"]),n.content.hasRightIcon&&n.content.rightIcon?(L(),Q(o,Kt(ae({key:1},n.content.rightIcon)),null,16)):ue("",!0)]),_:1},16,["class","type","style","data-ww-flag","disabled"])}const fd=ne(ja,[["render",Va],["__scopeId","data-v-b91f172c"]]);var gi=typeof bt=="object"&&bt&&bt.Object===Object&&bt,$a=typeof self=="object"&&self&&self.Object===Object&&self,xe=gi||$a||Function("return this")(),be=xe.Symbol,vi=Object.prototype,Ma=vi.hasOwnProperty,Ra=vi.toString,ut=be?be.toStringTag:void 0;function Ba(e){var t=Ma.call(e,ut),n=e[ut];try{e[ut]=void 0;var i=!0}catch{}var r=Ra.call(e);return i&&(t?e[ut]=n:delete e[ut]),r}var Ua=Object.prototype,Na=Ua.toString;function Ha(e){return Na.call(e)}var qa="[object Null]",Wa="[object Undefined]",xn=be?be.toStringTag:void 0;function Je(e){return e==null?e===void 0?Wa:qa:xn&&xn in Object(e)?Ba(e):Ha(e)}function ze(e){return e!=null&&typeof e=="object"}var Ka="[object Symbol]";function zt(e){return typeof e=="symbol"||ze(e)&&Je(e)==Ka}function yi(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}var Fe=Array.isArray,Cn=be?be.prototype:void 0,En=Cn?Cn.toString:void 0;function wi(e){if(typeof e=="string")return e;if(Fe(e))return yi(e,wi)+"";if(zt(e))return En?En.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ga=/\s/;function Xa(e){for(var t=e.length;t--&&Ga.test(e.charAt(t)););return t}var Ja=/^\s+/;function Ya(e){return e&&e.slice(0,Xa(e)+1).replace(Ja,"")}function Ge(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dn=NaN,Za=/^[-+]0x[0-9a-f]+$/i,Qa=/^0b[01]+$/i,eo=/^0o[0-7]+$/i,to=parseInt;function Ln(e){if(typeof e=="number")return e;if(zt(e))return Dn;if(Ge(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ge(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ya(e);var n=Qa.test(e);return n||eo.test(e)?to(e.slice(2),n?2:8):Za.test(e)?Dn:+e}function no(e){return e}var io="[object AsyncFunction]",ro="[object Function]",ao="[object GeneratorFunction]",oo="[object Proxy]";function bi(e){if(!Ge(e))return!1;var t=Je(e);return t==ro||t==ao||t==io||t==oo}var Nt=xe["__core-js_shared__"],zn=(function(){var e=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function lo(e){return!!zn&&zn in e}var so=Function.prototype,co=so.toString;function Ye(e){if(e!=null){try{return co.call(e)}catch{}try{return e+""}catch{}}return""}var uo=/[\\^$.*+?()[\]{}|]/g,fo=/^\[object .+?Constructor\]$/,ho=Function.prototype,mo=Object.prototype,go=ho.toString,vo=mo.hasOwnProperty,yo=RegExp("^"+go.call(vo).replace(uo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wo(e){if(!Ge(e)||lo(e))return!1;var t=bi(e)?yo:fo;return t.test(Ye(e))}function bo(e,t){return e==null?void 0:e[t]}function Ze(e,t){var n=bo(e,t);return wo(n)?n:void 0}var en=Ze(xe,"WeakMap");function po(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var So=800,_o=16,Io=Date.now;function Oo(e){var t=0,n=0;return function(){var i=Io(),r=_o-(i-n);if(n=i,r>0){if(++t>=So)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function To(e){return function(){return e}}var Tt=(function(){try{var e=Ze(Object,"defineProperty");return e({},"",{}),e}catch{}})(),xo=Tt?function(e,t){return Tt(e,"toString",{configurable:!0,enumerable:!1,value:To(t),writable:!0})}:no,Co=Oo(xo);function Eo(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}var Do=9007199254740991,Lo=/^(?:0|[1-9]\d*)$/;function zo(e,t){var n=typeof e;return t=t??Do,!!t&&(n=="number"||n!="symbol"&&Lo.test(e))&&e>-1&&e%1==0&&e<t}function pi(e,t,n){t=="__proto__"&&Tt?Tt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function cn(e,t){return e===t||e!==e&&t!==t}var Fo=Object.prototype,ko=Fo.hasOwnProperty;function Si(e,t,n){var i=e[t];(!(ko.call(e,t)&&cn(i,n))||n===void 0&&!(t in e))&&pi(e,t,n)}function Ao(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],c=void 0;c===void 0&&(c=e[l]),r?pi(n,l,c):Si(n,l,c)}return n}var Fn=Math.max;function Po(e,t,n){return t=Fn(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=Fn(i.length-t,0),o=Array(a);++r<a;)o[r]=i[t+r];r=-1;for(var l=Array(t+1);++r<t;)l[r]=i[r];return l[t]=n(o),po(e,this,l)}}var jo=9007199254740991;function _i(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jo}function Ii(e){return e!=null&&_i(e.length)&&!bi(e)}var Vo=Object.prototype;function Oi(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Vo;return e===n}function $o(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}var Mo="[object Arguments]";function kn(e){return ze(e)&&Je(e)==Mo}var Ti=Object.prototype,Ro=Ti.hasOwnProperty,Bo=Ti.propertyIsEnumerable,xi=kn((function(){return arguments})())?kn:function(e){return ze(e)&&Ro.call(e,"callee")&&!Bo.call(e,"callee")};function Uo(){return!1}var Ci=typeof exports=="object"&&exports&&!exports.nodeType&&exports,An=Ci&&typeof module=="object"&&module&&!module.nodeType&&module,No=An&&An.exports===Ci,Pn=No?xe.Buffer:void 0,Ho=Pn?Pn.isBuffer:void 0,xt=Ho||Uo,qo="[object Arguments]",Wo="[object Array]",Ko="[object Boolean]",Go="[object Date]",Xo="[object Error]",Jo="[object Function]",Yo="[object Map]",Zo="[object Number]",Qo="[object Object]",el="[object RegExp]",tl="[object Set]",nl="[object String]",il="[object WeakMap]",rl="[object ArrayBuffer]",al="[object DataView]",ol="[object Float32Array]",ll="[object Float64Array]",sl="[object Int8Array]",cl="[object Int16Array]",ul="[object Int32Array]",dl="[object Uint8Array]",fl="[object Uint8ClampedArray]",hl="[object Uint16Array]",ml="[object Uint32Array]",W={};W[ol]=W[ll]=W[sl]=W[cl]=W[ul]=W[dl]=W[fl]=W[hl]=W[ml]=!0;W[qo]=W[Wo]=W[rl]=W[Ko]=W[al]=W[Go]=W[Xo]=W[Jo]=W[Yo]=W[Zo]=W[Qo]=W[el]=W[tl]=W[nl]=W[il]=!1;function gl(e){return ze(e)&&_i(e.length)&&!!W[Je(e)]}function un(e){return function(t){return e(t)}}var Ei=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dt=Ei&&typeof module=="object"&&module&&!module.nodeType&&module,vl=dt&&dt.exports===Ei,Ht=vl&&gi.process,at=(function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||Ht&&Ht.binding&&Ht.binding("util")}catch{}})(),jn=at&&at.isTypedArray,Di=jn?un(jn):gl,yl=Object.prototype,wl=yl.hasOwnProperty;function Li(e,t){var n=Fe(e),i=!n&&xi(e),r=!n&&!i&&xt(e),a=!n&&!i&&!r&&Di(e),o=n||i||r||a,l=o?$o(e.length,String):[],c=l.length;for(var s in e)(t||wl.call(e,s))&&!(o&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||zo(s,c)))&&l.push(s);return l}function zi(e,t){return function(n){return e(t(n))}}var bl=zi(Object.keys,Object),pl=Object.prototype,Sl=pl.hasOwnProperty;function _l(e){if(!Oi(e))return bl(e);var t=[];for(var n in Object(e))Sl.call(e,n)&&n!="constructor"&&t.push(n);return t}function Il(e){return Ii(e)?Li(e):_l(e)}function Ol(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Tl=Object.prototype,xl=Tl.hasOwnProperty;function Cl(e){if(!Ge(e))return Ol(e);var t=Oi(e),n=[];for(var i in e)i=="constructor"&&(t||!xl.call(e,i))||n.push(i);return n}function El(e){return Ii(e)?Li(e,!0):Cl(e)}var Dl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ll=/^\w*$/;function zl(e,t){if(Fe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||zt(e)?!0:Ll.test(e)||!Dl.test(e)||t!=null&&e in Object(t)}var mt=Ze(Object,"create");function Fl(){this.__data__=mt?mt(null):{},this.size=0}function kl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Al="__lodash_hash_undefined__",Pl=Object.prototype,jl=Pl.hasOwnProperty;function Vl(e){var t=this.__data__;if(mt){var n=t[e];return n===Al?void 0:n}return jl.call(t,e)?t[e]:void 0}var $l=Object.prototype,Ml=$l.hasOwnProperty;function Rl(e){var t=this.__data__;return mt?t[e]!==void 0:Ml.call(t,e)}var Bl="__lodash_hash_undefined__";function Ul(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mt&&t===void 0?Bl:t,this}function Xe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Xe.prototype.clear=Fl;Xe.prototype.delete=kl;Xe.prototype.get=Vl;Xe.prototype.has=Rl;Xe.prototype.set=Ul;function Nl(){this.__data__=[],this.size=0}function Ft(e,t){for(var n=e.length;n--;)if(cn(e[n][0],t))return n;return-1}var Hl=Array.prototype,ql=Hl.splice;function Wl(e){var t=this.__data__,n=Ft(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():ql.call(t,n,1),--this.size,!0}function Kl(e){var t=this.__data__,n=Ft(t,e);return n<0?void 0:t[n][1]}function Gl(e){return Ft(this.__data__,e)>-1}function Xl(e,t){var n=this.__data__,i=Ft(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ke.prototype.clear=Nl;ke.prototype.delete=Wl;ke.prototype.get=Kl;ke.prototype.has=Gl;ke.prototype.set=Xl;var gt=Ze(xe,"Map");function Jl(){this.size=0,this.__data__={hash:new Xe,map:new(gt||ke),string:new Xe}}function Yl(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function kt(e,t){var n=e.__data__;return Yl(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Zl(e){var t=kt(this,e).delete(e);return this.size-=t?1:0,t}function Ql(e){return kt(this,e).get(e)}function es(e){return kt(this,e).has(e)}function ts(e,t){var n=kt(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Ae(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ae.prototype.clear=Jl;Ae.prototype.delete=Zl;Ae.prototype.get=Ql;Ae.prototype.has=es;Ae.prototype.set=ts;var ns="Expected a function";function dn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ns);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(dn.Cache||Ae),n}dn.Cache=Ae;var is=500;function rs(e){var t=dn(e,function(i){return n.size===is&&n.clear(),i}),n=t.cache;return t}var as=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,os=/\\(\\)?/g,ls=rs(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(as,function(n,i,r,a){t.push(r?a.replace(os,"$1"):i||n)}),t});function ss(e){return e==null?"":wi(e)}function fn(e,t){return Fe(e)?e:zl(e,t)?[e]:ls(ss(e))}function Fi(e){if(typeof e=="string"||zt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cs(e,t){t=fn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Fi(t[n++])];return n&&n==i?e:void 0}function hn(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var Vn=be?be.isConcatSpreadable:void 0;function us(e){return Fe(e)||xi(e)||!!(Vn&&e&&e[Vn])}function ds(e,t,n,i,r){var a=-1,o=e.length;for(n||(n=us),r||(r=[]);++a<o;){var l=e[a];n(l)?hn(r,l):r[r.length]=l}return r}function fs(e){var t=e==null?0:e.length;return t?ds(e):[]}function hs(e){return Co(Po(e,void 0,fs),e+"")}var ki=zi(Object.getPrototypeOf,Object),ms="[object Object]",gs=Function.prototype,vs=Object.prototype,Ai=gs.toString,ys=vs.hasOwnProperty,ws=Ai.call(Object);function bs(e){if(!ze(e)||Je(e)!=ms)return!1;var t=ki(e);if(t===null)return!0;var n=ys.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ai.call(n)==ws}function ps(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++i<r;)a[i]=e[i+t];return a}function Ss(){this.__data__=new ke,this.size=0}function _s(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Is(e){return this.__data__.get(e)}function Os(e){return this.__data__.has(e)}var Ts=200;function xs(e,t){var n=this.__data__;if(n instanceof ke){var i=n.__data__;if(!gt||i.length<Ts-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ae(i)}return n.set(e,t),this.size=n.size,this}function Le(e){var t=this.__data__=new ke(e);this.size=t.size}Le.prototype.clear=Ss;Le.prototype.delete=_s;Le.prototype.get=Is;Le.prototype.has=Os;Le.prototype.set=xs;var Pi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$n=Pi&&typeof module=="object"&&module&&!module.nodeType&&module,Cs=$n&&$n.exports===Pi,Mn=Cs?xe.Buffer:void 0;Mn&&Mn.allocUnsafe;function Es(e,t){return e.slice()}function Ds(e,t){for(var n=-1,i=e==null?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function ji(){return[]}var Ls=Object.prototype,zs=Ls.propertyIsEnumerable,Rn=Object.getOwnPropertySymbols,Vi=Rn?function(e){return e==null?[]:(e=Object(e),Ds(Rn(e),function(t){return zs.call(e,t)}))}:ji,Fs=Object.getOwnPropertySymbols,ks=Fs?function(e){for(var t=[];e;)hn(t,Vi(e)),e=ki(e);return t}:ji;function $i(e,t,n){var i=t(e);return Fe(e)?i:hn(i,n(e))}function Bn(e){return $i(e,Il,Vi)}function Mi(e){return $i(e,El,ks)}var tn=Ze(xe,"DataView"),nn=Ze(xe,"Promise"),rn=Ze(xe,"Set"),Un="[object Map]",As="[object Object]",Nn="[object Promise]",Hn="[object Set]",qn="[object WeakMap]",Wn="[object DataView]",Ps=Ye(tn),js=Ye(gt),Vs=Ye(nn),$s=Ye(rn),Ms=Ye(en),Oe=Je;(tn&&Oe(new tn(new ArrayBuffer(1)))!=Wn||gt&&Oe(new gt)!=Un||nn&&Oe(nn.resolve())!=Nn||rn&&Oe(new rn)!=Hn||en&&Oe(new en)!=qn)&&(Oe=function(e){var t=Je(e),n=t==As?e.constructor:void 0,i=n?Ye(n):"";if(i)switch(i){case Ps:return Wn;case js:return Un;case Vs:return Nn;case $s:return Hn;case Ms:return qn}return t});var Rs=Object.prototype,Bs=Rs.hasOwnProperty;function Us(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Bs.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Ct=xe.Uint8Array;function mn(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function Ns(e,t){var n=mn(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var Hs=/\w*$/;function qs(e){var t=new e.constructor(e.source,Hs.exec(e));return t.lastIndex=e.lastIndex,t}var Kn=be?be.prototype:void 0,Gn=Kn?Kn.valueOf:void 0;function Ws(e){return Gn?Object(Gn.call(e)):{}}function Ks(e,t){var n=mn(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}var Gs="[object Boolean]",Xs="[object Date]",Js="[object Map]",Ys="[object Number]",Zs="[object RegExp]",Qs="[object Set]",ec="[object String]",tc="[object Symbol]",nc="[object ArrayBuffer]",ic="[object DataView]",rc="[object Float32Array]",ac="[object Float64Array]",oc="[object Int8Array]",lc="[object Int16Array]",sc="[object Int32Array]",cc="[object Uint8Array]",uc="[object Uint8ClampedArray]",dc="[object Uint16Array]",fc="[object Uint32Array]";function hc(e,t,n){var i=e.constructor;switch(t){case nc:return mn(e);case Gs:case Xs:return new i(+e);case ic:return Ns(e);case rc:case ac:case oc:case lc:case sc:case cc:case uc:case dc:case fc:return Ks(e);case Js:return new i;case Ys:case ec:return new i(e);case Zs:return qs(e);case Qs:return new i;case tc:return Ws(e)}}var mc="[object Map]";function gc(e){return ze(e)&&Oe(e)==mc}var Xn=at&&at.isMap,vc=Xn?un(Xn):gc,yc="[object Set]";function wc(e){return ze(e)&&Oe(e)==yc}var Jn=at&&at.isSet,bc=Jn?un(Jn):wc,Ri="[object Arguments]",pc="[object Array]",Sc="[object Boolean]",_c="[object Date]",Ic="[object Error]",Bi="[object Function]",Oc="[object GeneratorFunction]",Tc="[object Map]",xc="[object Number]",Ui="[object Object]",Cc="[object RegExp]",Ec="[object Set]",Dc="[object String]",Lc="[object Symbol]",zc="[object WeakMap]",Fc="[object ArrayBuffer]",kc="[object DataView]",Ac="[object Float32Array]",Pc="[object Float64Array]",jc="[object Int8Array]",Vc="[object Int16Array]",$c="[object Int32Array]",Mc="[object Uint8Array]",Rc="[object Uint8ClampedArray]",Bc="[object Uint16Array]",Uc="[object Uint32Array]",q={};q[Ri]=q[pc]=q[Fc]=q[kc]=q[Sc]=q[_c]=q[Ac]=q[Pc]=q[jc]=q[Vc]=q[$c]=q[Tc]=q[xc]=q[Ui]=q[Cc]=q[Ec]=q[Dc]=q[Lc]=q[Mc]=q[Rc]=q[Bc]=q[Uc]=!0;q[Ic]=q[Bi]=q[zc]=!1;function It(e,t,n,i,r,a){var o;if(n&&(o=r?n(e,i,r,a):n(e)),o!==void 0)return o;if(!Ge(e))return e;var l=Fe(e);if(l)o=Us(e);else{var c=Oe(e),s=c==Bi||c==Oc;if(xt(e))return Es(e);if(c==Ui||c==Ri||s&&!r)o={};else{if(!q[c])return r?e:{};o=hc(e,c)}}a||(a=new Le);var u=a.get(e);if(u)return u;a.set(e,o),bc(e)?e.forEach(function(S){o.add(It(S,t,n,S,e,a))}):vc(e)&&e.forEach(function(S,_){o.set(_,It(S,t,n,_,e,a))});var f=Mi,h=l?void 0:f(e);return Eo(h||e,function(S,_){h&&(_=S,S=e[_]),Si(o,_,It(S,t,n,_,e,a))}),o}var Nc="__lodash_hash_undefined__";function Hc(e){return this.__data__.set(e,Nc),this}function qc(e){return this.__data__.has(e)}function Et(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ae;++t<n;)this.add(e[t])}Et.prototype.add=Et.prototype.push=Hc;Et.prototype.has=qc;function Wc(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Kc(e,t){return e.has(t)}var Gc=1,Xc=2;function Ni(e,t,n,i,r,a){var o=n&Gc,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var s=a.get(e),u=a.get(t);if(s&&u)return s==t&&u==e;var f=-1,h=!0,S=n&Xc?new Et:void 0;for(a.set(e,t),a.set(t,e);++f<l;){var _=e[f],m=t[f];if(i)var T=o?i(m,_,f,t,e,a):i(_,m,f,e,t,a);if(T!==void 0){if(T)continue;h=!1;break}if(S){if(!Wc(t,function(b,g){if(!Kc(S,g)&&(_===b||r(_,b,n,i,a)))return S.push(g)})){h=!1;break}}else if(!(_===m||r(_,m,n,i,a))){h=!1;break}}return a.delete(e),a.delete(t),h}function Jc(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n}function Yc(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}var Zc=1,Qc=2,eu="[object Boolean]",tu="[object Date]",nu="[object Error]",iu="[object Map]",ru="[object Number]",au="[object RegExp]",ou="[object Set]",lu="[object String]",su="[object Symbol]",cu="[object ArrayBuffer]",uu="[object DataView]",Yn=be?be.prototype:void 0,qt=Yn?Yn.valueOf:void 0;function du(e,t,n,i,r,a,o){switch(n){case uu:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cu:return!(e.byteLength!=t.byteLength||!a(new Ct(e),new Ct(t)));case eu:case tu:case ru:return cn(+e,+t);case nu:return e.name==t.name&&e.message==t.message;case au:case lu:return e==t+"";case iu:var l=Jc;case ou:var c=i&Zc;if(l||(l=Yc),e.size!=t.size&&!c)return!1;var s=o.get(e);if(s)return s==t;i|=Qc,o.set(e,t);var u=Ni(l(e),l(t),i,r,a,o);return o.delete(e),u;case su:if(qt)return qt.call(e)==qt.call(t)}return!1}var fu=1,hu=Object.prototype,mu=hu.hasOwnProperty;function gu(e,t,n,i,r,a){var o=n&fu,l=Bn(e),c=l.length,s=Bn(t),u=s.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:mu.call(t,h)))return!1}var S=a.get(e),_=a.get(t);if(S&&_)return S==t&&_==e;var m=!0;a.set(e,t),a.set(t,e);for(var T=o;++f<c;){h=l[f];var b=e[h],g=t[h];if(i)var p=o?i(g,b,h,t,e,a):i(b,g,h,e,t,a);if(!(p===void 0?b===g||r(b,g,n,i,a):p)){m=!1;break}T||(T=h=="constructor")}if(m&&!T){var I=e.constructor,x=t.constructor;I!=x&&"constructor"in e&&"constructor"in t&&!(typeof I=="function"&&I instanceof I&&typeof x=="function"&&x instanceof x)&&(m=!1)}return a.delete(e),a.delete(t),m}var vu=1,Zn="[object Arguments]",Qn="[object Array]",pt="[object Object]",yu=Object.prototype,ei=yu.hasOwnProperty;function wu(e,t,n,i,r,a){var o=Fe(e),l=Fe(t),c=o?Qn:Oe(e),s=l?Qn:Oe(t);c=c==Zn?pt:c,s=s==Zn?pt:s;var u=c==pt,f=s==pt,h=c==s;if(h&&xt(e)){if(!xt(t))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new Le),o||Di(e)?Ni(e,t,n,i,r,a):du(e,t,c,n,i,r,a);if(!(n&vu)){var S=u&&ei.call(e,"__wrapped__"),_=f&&ei.call(t,"__wrapped__");if(S||_){var m=S?e.value():e,T=_?t.value():t;return a||(a=new Le),r(m,T,n,i,a)}}return h?(a||(a=new Le),gu(e,t,n,i,r,a)):!1}function Hi(e,t,n,i,r){return e===t?!0:e==null||t==null||!ze(e)&&!ze(t)?e!==e&&t!==t:wu(e,t,n,i,Hi,r)}var Wt=function(){return xe.Date.now()},bu="Expected a function",pu=Math.max,Su=Math.min;function ti(e,t,n){var i,r,a,o,l,c,s=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(bu);t=Ln(t)||0,Ge(n)&&(u=!!n.leading,f="maxWait"in n,a=f?pu(Ln(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h);function S(D){var C=i,O=r;return i=r=void 0,s=D,o=e.apply(O,C),o}function _(D){return s=D,l=setTimeout(b,t),u?S(D):o}function m(D){var C=D-c,O=D-s,k=t-C;return f?Su(k,a-O):k}function T(D){var C=D-c,O=D-s;return c===void 0||C>=t||C<0||f&&O>=a}function b(){var D=Wt();if(T(D))return g(D);l=setTimeout(b,m(D))}function g(D){return l=void 0,h&&i?S(D):(i=r=void 0,o)}function p(){l!==void 0&&clearTimeout(l),s=0,i=c=r=l=void 0}function I(){return l===void 0?o:g(Wt())}function x(){var D=Wt(),C=T(D);if(i=arguments,r=this,c=D,C){if(l===void 0)return _(c);if(f)return clearTimeout(l),l=setTimeout(b,t),S(c)}return l===void 0&&(l=setTimeout(b,t)),o}return x.cancel=p,x.flush=I,x}function _u(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Iu(e,t){return t.length<2?e:cs(e,ps(t,0,-1))}function qi(e,t){return Hi(e,t)}function Ou(e,t){return t=fn(t,e),e=Iu(e,t),e==null||delete e[Fi(_u(t))]}function Tu(e){return bs(e)?void 0:e}var xu=1,Cu=2,Eu=4,Du=hs(function(e,t){var n={};if(e==null)return n;var i=!1;t=yi(t,function(a){return a=fn(a,e),i||(i=a.length>1),a}),Ao(e,Mi(e),n),i&&(n=It(n,xu|Cu|Eu,Tu));for(var r=t.length;r--;)Ou(n,t[r]);return n});function Lu(e){return e==null?!0:typeof e=="number"?Number.isNaN(e):typeof e=="string"?e.length===0:typeof e=="boolean"?e===!1:Array.isArray(e)?e.length===0:e instanceof Set||e instanceof Map?e.size===0:typeof e=="object"?Object.keys(e).length===0:!1}function zu(e,{fieldName:t,validation:n,customValidation:i=ht(!1),required:r=ht(!1),initialValue:a=void 0},{elementState:o,emit:l,sidepanelFormPath:c="form",setValue:s=null}){const u=R("_wwForm:info",null),f=R("_wwForm:registerInput",()=>{}),h=R("_wwForm:unregisterInput",()=>{}),S=R("_wwForm:updateInput",()=>{}),_=wwLib.wwUtils.getUid(),m=d(()=>(t==null?void 0:t.value)||o.name);function T(O){s?s(O):e.value=O}f(_,{[m.value]:{value:e.value,isValid:!r.value&&!i.value?!0:null,pending:!1,forceValidateField:C,updateValue:T,initialValue:We(a)}}),dr(a)&&V(a,O=>{S(_,k=>{k[m.value]&&(k[m.value].initialValue=O)})});const{resolveFormula:b}=wwLib.wwFormula.useFormula(),g=(O,k,y,v)=>{var X;const z=y&&v?(X=b(v))==null?void 0:X.value:!0,E=!Lu(O);return k?y&&v?E&&z:E:z};function p(O){S(_,k=>{if(!k[m.value]){console.warn("Field name not available, is the AI generating ?");return}k[m.value].isValid=O,k[m.value].pending=!1})}let I=ti(p,u.debounceDelay.value);V(()=>u.debounceDelay.value,()=>{I.flush(),I=ti(p,u.debounceDelay.value)});let x=!0;const D=d(()=>{const O=g(e.value,r.value,i.value,n.value);return x?(x=!1,null):O});V(D,O=>{u.validationType.value==="change"&&(S(_,k=>{if(!k[m.value]){console.warn("Field name not available, is the AI generating ?");return}k[m.value].pending=!0}),I(O))}),V(()=>u.validationType.value,O=>{O==="change"?p(g(e.value,r==null?void 0:r.value,i==null?void 0:i.value,n==null?void 0:n.value)):O==="submit"&&p(!0)}),rt(()=>{I.cancel()});function C(){I.cancel();const O=g(e.value,r==null?void 0:r.value,i==null?void 0:i.value,n==null?void 0:n.value);return p(O),O}return V(e,(O,k)=>{qi(O,k)||S(_,y=>{y[m.value].value=O})},{deep:!0}),V(m,(O,k)=>{S(_,y=>{const v=y[k];delete y[k],y[O]=v})}),rt(()=>{h(_)}),{selectForm:Fu}}function Fu(e,t){}function ku(){const e=ht(!1),t=ht(!1),n=F({});return{formState:an({isSubmitting:d(()=>e.value),isSubmitted:d(()=>t.value),isValid:d(()=>{const l=Object.values(n.value);return l.some(c=>c===null)?null:!l.some(c=>!c)})}),setFormState:l=>{"isSubmitting"in l&&(e.value=l.isSubmitting),"isSubmitted"in l&&(t.value=l.isSubmitted)},updateInputValidity:(l,c)=>{(typeof c=="boolean"||c===null)&&(n.value[l]=c)},removeInputValidity:l=>{delete n.value[l]}}}function Au({emit:e,forceValidateAllFields:t,formInputs:n,formName:i}){return{handleSubmit:async a=>{try{const o=t();if(o.isValid){const l=Object.fromEntries(Object.entries((n==null?void 0:n.value)||{}).map(([c,s])=>[c,s.value]));e("trigger-event",{name:"submit",event:a})}else{const c=o.invalidFields.map(s=>s.name).join(", ");e("trigger-event",{name:"submit-validation-error",event:a})}}catch(o){console.error("Form submission error",o)}}}}function Pu({updateInputValidity:e,removeInputValidity:t}){const n=F({}),i=d(()=>Object.fromEntries(Array.from(Object.values(n.value)).filter(s=>s&&typeof s=="object").map(s=>Object.entries(s)[0]).filter(([s,u])=>s!=="null"&&u!==null).map(([s,u])=>[s,Du(u,["forceValidateField","updateValue","pending","initialValue"])])));function r(s,u){n.value[s]=u;const[,f]=Object.entries(u)[0];e(s,f.isValid??null)}function a(s,u){var h,S;const f=n.value[s];f&&(u(f),e(s,((S=(h=Object.values(n.value[s]))==null?void 0:h[0])==null?void 0:S.isValid)??null))}function o(s){delete n.value[s],t(s)}V(n,()=>{for(const[s,u]of Object.entries(n.value)){const[,f]=Object.entries(u)[0];"isValid"in f&&e(s,f.isValid)}},{deep:!0,immediate:!0}),B("_wwForm:registerInput",r),B("_wwForm:unregisterInput",o),B("_wwForm:updateInput",a);function l(){const s={},u=[];for(const[h,S]of Object.entries(n.value))for(const[_,m]of Object.entries(S))if("forceValidateField"in m){const T=m.forceValidateField();s[h+_]=T,T||u.push({id:h,name:_,value:m.value,isValid:T,error:m.error||m.validationMessage||"Validation failed"})}return{isValid:Object.values(s).every(Boolean),invalidFields:u,validityMap:s}}function c(s={}){s||(s={});for(const[u,f]of Object.entries(n.value))for(const[h,S]of Object.entries(f))S&&typeof S=="object"&&a(u,_=>{if(_[h]){let m;s[h]!==void 0?m=s[h]:_[h].initialValue!==void 0?m=_[h].initialValue:Array.isArray(_[h].value)?m=[]:typeof _[h].value=="object"&&_[h].value!==null?m={}:typeof _[h].value=="boolean"?m=!1:typeof _[h].value=="number"?m=0:m="",_[h].value=m,_[h].updateValue&&_[h].updateValue(m),_[h].isValid=null,_[h].pending=!1}})}return{inputsMap:n,formInputs:i,updateInput:a,forceValidateAllFields:l,resetInputs:c}}const ju={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event"],setup(e,{emit:t}){const n=d(()=>!1),i=d(()=>!1),r=F(null),a=F(null),o=d(()=>e.wwElementState.name),l=d(()=>e.content.validation),c=d(()=>{if(!e.content.debounceDelay)return 0;const y=wwLib.wwUtils.getLengthUnit(e.content.debounceDelay)[0]||0;return y<1?0:y}),{formState:s,setFormState:u,updateInputValidity:f,removeInputValidity:h}=ku(),{formInputs:S,forceValidateAllFields:_,resetInputs:m}=Pu({updateInputValidity:f,removeInputValidity:h}),T=d(()=>s.isValid.value),b=F({});function g(){for(const y of Object.keys(b.value))y in S.value||delete b.value[y];for(const[y,{value:v}]of Object.entries(S.value))qi(b.value[y],v)||(b.value[y]=v)}V(S,y=>{g()},{deep:!0});const{handleSubmit:p}=Au({forceValidateAllFields:_,formState:{value:s,setFormState:u},emit:t,isValid:T,updateFormData:g,validationType:l,formInputs:S,formName:o});function I(y,v){u({isSubmitting:!!y,isSubmitted:!!v})}function x(y={}){m(y),u({isSubmitting:!1,isSubmitted:!1}),g()}const{setValue:D}=wwLib.wwVariable.useComponentVariable({uid:e.wwElementState.uid,name:"form",type:"object",defaultValue:{}}),C=d(()=>({formData:b.value,fields:S.value,isSubmitting:s.isSubmitting.value,isSubmitted:s.isSubmitted.value,isValid:T.value})),O={setFormState:{method:I,editor:{label:"Set form state",elementName:"Form",description:"Set isSubmitting and isSubmitted",args:[{name:"isSubmitting",type:"boolean"},{name:"isSubmitted",type:"boolean"}]}},submitForm:{method:p,editor:{label:"Submit form",elementName:"Form",description:"Submit the form",args:[]}},resetForm:{method:x,editor:{label:"Reset form",elementName:"Form",description:"Reset the form fields to their initial values",args:[{name:"initialValues",type:"object",description:"Optional object with initial values for specific fields",required:!1}]}}};return V(C,y=>D(y),{deep:!0,immediate:!0}),B("_wwForm:info",{uid:e.wwElementState.uid,componentId:a.value,name:o,validationType:l,debounceDelay:c}),B("_wwForm:useForm",zu),wwLib.wwElement.useRegisterElementLocalContext("form",C,O,`### Form local informations

#### inputs
Object containing all form inputs. Each input contains:
- \`value\`: Input's current value
- \`isValid\`: Boolean indicating if input passes validation (optional)`),on(()=>{var y;a.value=(y=r==null?void 0:r.value)==null?void 0:y.getAttribute("data-ww-component-id")}),{formRef:r,isEditing:n,isSelected:i,formName:o,handleSubmit:p,formState:s,_setFormState:I,resetForm:x}}},Vu=["name","autocomplete","aria-busy","aria-invalid"];function $u(e,t,n,i,r,a){const o=H("wwLayout");return L(),M("form",{ref:"formRef",name:i.formName,autocomplete:n.content.autocomplete,class:se(["ww-form-container",{editing:i.isEditing,selected:i.isSelected}]),"aria-busy":i.formState.isSubmitting,"aria-invalid":!i.formState.isValid,"data-ww-flag":"form-container",onSubmit:t[0]||(t[0]=Dt((...l)=>i.handleSubmit&&i.handleSubmit(...l),["prevent"]))},[te(o,{class:"ww-form-container__content",path:"formContent","ww-responsive":"wwLayout"})],42,Vu)}const hd=ne(ju,[["render",$u],["__scopeId","data-v-8d6bab0c"]]),Mu={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["update:content","trigger-event","update:sidepanel-content"],setup(e,{emit:t}){const n=d(()=>e.content.tabsList.length),{value:i,setValue:r}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"currentTab",type:"number",defaultValue:d(()=>e.content.value===void 0?0:Math.max(0,Math.min(e.content.value,n.value-1)))}),a=d({get(){const l=i.value;return Math.max(0,Math.min(l,n.value-1))},set(l){l=Math.max(0,Math.min(l,n.value-1)),l!==a.value&&(r(l),t("trigger-event",{name:"change",event:{value:l}}))}});return{variableValue:i,setValue:r,nbOfTabs:n,currentTabIndex:a,setCurrentTabIndex:l=>{l=Math.max(0,Math.min(l,n.value-1)),l!==a.value&&r(l)}}},data(){return{order:null,activeTransition:"fade"}},computed:{isEditing(){return!1},tabsObjectStyle(){const e={"--tab-transition-duration":this.content.transitionDuration+"s"};switch(this.content.tabsPosition){case"top":e["flex-direction"]="column";break;case"bottom":e["flex-direction"]="column-reverse";break;case"left":e["flex-direction"]="row";break;case"right":e["flex-direction"]="row-reverse";break}return e},getSublayoutHeight(){const e=wwLib.getFrontDocument().querySelectorAll(".tabs-sublayout-container");return e&&e.length&&e[this.currentTabIndex]?`${e[this.currentTabIndex].offsetHeight}px`:"24px"},tabsContainerStyle(){const e=this.content.tabsPosition==="top"||this.content.tabsPosition==="bottom",t={justifyContent:e?this.content.horizontalAlignment:this.content.verticalAlignment,alignItems:e?this.content.verticalAlignment:this.content.horizontalAlignment};return(this.content.tabsPosition==="left"||this.content.tabsPosition==="right")&&(t["flex-direction"]="column",t.width="auto",t["min-width"]="10px"),t}},watch:{"content.value"(e){const t=Math.max(0,Math.min(e,this.nbOfTabs-1));t!==this.currentTabIndex&&(this.currentTabIndex=t,this.$emit("trigger-event",{name:"initValueChange",event:{value:t}}))}},methods:{switchToTab(e){e=Math.max(0,Math.min(e,this.nbOfTabs-1)),e!==this.currentTabIndex&&(this.order=e>this.currentTabIndex?"after":"before",this.handleTransition(this.order),this.currentTabIndex=e)},handleTransition(e){switch(this.content.transition){case"fade":this.activeTransition="fade";break;case"none":this.activeTransition="";break;case"fadeTopBottom":this.activeTransition=e==="after"?"fadeTop":"fadeBottom";break;case"fadeLeftRight":this.activeTransition=e==="after"?"fadeLeft":"fadeRight";break;default:this.activeTransition="fade"}}}},Ru=["onClick"],Bu={class:"layout-sublayout"},Uu={class:"tab-contents"};function Nu(e,t,n,i,r,a){const o=H("wwElement",!0),l=H("wwLayoutItem"),c=H("wwLayout"),s=H("wwLocalContext");return L(),M("div",{class:se(["tabs-object",{editing:a.isEditing}]),style:N(a.tabsObjectStyle),"ww-responsive":"tabs-object"},[n.content.tabsList?(L(),M("div",{key:0,class:"tabs-container",style:N(a.tabsContainerStyle),"ww-responsive":"tabs-container"},[(L(!0),M(Ke,null,Ot(i.nbOfTabs,u=>{var f;return L(),M("div",{key:u,class:"layout-container",onClick:h=>a.switchToTab(u-1)},[te(s,{elementKey:"tab",data:{tabIndex:u-1,tabLabel:((f=n.content.tabLabels)==null?void 0:f[u-1])||`Tab ${u}`,isActive:u-1===i.currentTabIndex,totalTabs:i.nbOfTabs,tabPosition:n.content.tabsPosition}},{default:K(()=>[Z("div",Bu,[te(c,{class:"layout -layout",path:`tabsList[${u-1}]`},{default:K(({item:h})=>[te(l,null,{default:K(()=>[te(o,ae({ref_for:!0},h,{states:u-1===i.currentTabIndex?["active"]:[]}),null,16,["states"])]),_:2},1024)]),_:2},1032,["path"])])]),_:2},1032,["data"])],8,Ru)}),128))],4)):ue("",!0),Z("div",Uu,[te(fr,{name:r.activeTransition,mode:"out-in",tag:"div"},{default:K(()=>[(L(!0),M(Ke,null,Ot(i.nbOfTabs,u=>{var f;return L(),M(Ke,null,[i.currentTabIndex===u-1?(L(),M("div",{key:u,class:"tab-content"},[te(s,{elementKey:"tab",data:{tabIndex:u-1,tabLabel:((f=n.content.tabLabels)==null?void 0:f[u-1])||`Tab ${u}`,isActive:!0,totalTabs:i.nbOfTabs,tabPosition:n.content.tabsPosition}},{default:K(()=>[te(c,{class:se(["layout -layout",{isEditing:a.isEditing}]),path:`tabsContent[${u-1}]`},null,8,["class","path"])]),_:2},1032,["data"])])):ue("",!0)],64)}),256))]),_:1},8,["name"])])],6)}const md=ne(Mu,[["render",Nu],["__scopeId","data-v-319171db"]]),Hu={props:{content:{type:Object,required:!0}},computed:{style(){return{color:this.content.color,fontSize:`${this.content.fontSize}px`}}}};function qu(e,t,n,i,r,a){return L(),M("div",{class:"ww-checkbox",style:N(a.style)},[Z("div",{class:se([n.content.icon]),"aria-hidden":"true"},null,2)],4)}const gd=ne(Hu,[["render",qu],["__scopeId","data-v-58efe9d6"]]),Wu={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["update:content:effect","update:content","element-event"],setup(){const{hasLink:e,tag:t,properties:n}=wwLib.wwElement.useLink(),i=wwLib.wwElement.useBackgroundVideo();return{hasLink:e,properties:n,backgroundVideo:i,tag:t}},computed:{children(){return!this.content.children||!Array.isArray(this.content.children)?[]:this.content.children},isFixed(){return this.wwElementState.props.isFixed},noDropzone(){return this.wwElementState.props.noDropzone},isEditing(){return!1}},methods:{onElementClick(e){let t=e.currentTarget.dataset.wwFlexboxIndex,n=parseInt(t);isNaN(n)&&(n=0),this.$emit("element-event",{type:"click",index:n})}}};function Ku(e,t,n,i,r,a){const o=H("wwSimpleLayout"),l=H("wwBackgroundVideo"),c=H("wwElement",!0),s=H("wwLayout");return a.noDropzone?(L(),Q(o,ae({key:0,tag:i.tag,class:"ww-flexbox","ww-responsive":"wwLayoutSlot"},i.properties,{class:{"-link":i.hasLink&&!a.isEditing}}),{default:K(()=>[Te(e.$slots,"default",{},void 0,!0)]),_:3},16,["tag","class"])):(L(),Q(s,ae({key:1,class:"ww-flexbox",path:"children",direction:n.content.direction,"disable-edit":a.isFixed,"ww-responsive":"wwLayout",tag:i.tag},i.properties,{class:{"-link":i.hasLink&&!a.isEditing}}),{header:K(()=>[i.backgroundVideo?(L(),Q(l,{key:0,video:i.backgroundVideo},null,8,["video"])):ue("",!0),a.noDropzone?ue("",!0):Te(e.$slots,"default",{key:1},void 0,!0)]),default:K(({item:u,index:f,itemStyle:h})=>[te(c,ae(u,{"extra-style":h,class:"ww-flexbox__object","ww-responsive":`wwobject-${f}`,"data-ww-flexbox-index":f,onClick:a.onElementClick}),null,16,["extra-style","ww-responsive","data-ww-flexbox-index","onClick"])]),_:3},16,["direction","disable-edit","tag","class"]))}const vd=ne(Wu,[["render",Ku],["__scopeId","data-v-14f7a5a5"]]);function Gu(){function e(i,r){switch(i){case"fade":return"fade-transition";case"slide-in":switch(r){default:return"slide-in-left-transition";case"left":return"slide-in-left-transition";case"right":return"slide-in-right-transition";case"top":return"slide-in-top-transition";case"bottom":return"slide-in-bottom-transition"}case"zoom":return"zoom-transition";default:return""}}function t(i,r,a,o){const l={position:"fixed"};switch(i){case"left":l.left=0,l["--align-items"]="flex-start";break;case"right":l.right=0,l["--align-items"]="flex-end";break;case"custom":l.left=a,l["--align-items"]="flex-start";break;default:l.left="50%",l["--translate-x"]="-50%",l["--align-items"]="center";break}switch(r){case"top":l.top=0,l["--justify-content"]="flex-start";break;case"bottom":l.bottom=0,l["--justify-content"]="flex-end";break;case"custom":l.top=o,l["--justify-content"]="flex-start";break;default:l.top="50%",l["--translate-y"]="-50%",l["--justify-content"]="center";break}return l}function n(i){const r={position:"fixed"};switch(i){case"left":Object.assign(r,{height:"100dvh",top:0,bottom:0,left:0});break;case"right":Object.assign(r,{height:"100dvh",top:0,bottom:0,right:0});break;case"top":Object.assign(r,{width:"100dvw",top:0,left:0,right:0,"--content-flow":"column"});break;case"bottom":Object.assign(r,{width:"100dvw",bottom:0,left:0,right:0,"--content-flow":"column"});break}return r}return{getModalStyle:t,getSheetStyle:n,getTransitionName:e}}const gn={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}},events:[],setup(e,{emit:t}){const n=R("_wwPopupStacked",!1),i=d(()=>!1),{getModalStyle:r,getSheetStyle:a}=Gu();ft(()=>{e.content.preventScroll&&!i.value&&!We(n)?wwLib.getFrontDocument().documentElement.classList.add("ww-dialog-open"):wwLib.getFrontDocument().documentElement.classList.remove("ww-dialog-open")});const o=d(()=>e.content.animationDuration+"ms"),l=d(()=>e.content.animationEasing),c=d(()=>{let f={};switch(e.content.type){case"modal":f=r(e.content.sideModal,e.content.align,e.content.customPositionX,e.content.customPositionY);break;case"sheet":f=a(e.content.sideSheet);break}return f}),s=R("_wwLocalContext",null);function u(f){var h,S,_;i.value||f.key==="Escape"&&e.content.escClose&&((_=(S=(h=We(s))==null?void 0:h.methods)==null?void 0:S.popup)==null||_.close.method())}return ft(()=>{e.content.escClose&&!n?wwLib.getFrontDocument().addEventListener("keydown",u):wwLib.getFrontDocument().removeEventListener("keydown",u)}),rt(()=>{wwLib.getFrontDocument().removeEventListener("keydown",u),wwLib.getFrontDocument().documentElement.classList.remove("ww-dialog-open")}),{dialogStyle:c,animationClasses:d(()=>({"fade-animation":e.content.animation==="fade","zoomin-animation":e.content.animation==="zoom","slideDown-animation":e.content.animation==="slide-in"&&e.content.slideInDirection==="bottom","slideUp-animation":e.content.animation==="slide-in"&&e.content.slideInDirection==="top","slideLeft-animation":e.content.animation==="slide-in"&&e.content.slideInDirection==="left","slideRight-animation":e.content.animation==="slide-in"&&e.content.slideInDirection==="right"})),animationDuration:o,animationEasing:l,onRootClick:()=>{var f,h,S;i.value||e.content.overlay&&e.content.overlayClickCloses&&((S=(h=(f=We(s))==null?void 0:f.methods)==null?void 0:h.popup)==null||S.close.method())},onCloseInterceptorClick:f=>{var h,S,_;i.value||(f.stopPropagation(),e.content.clickOutsideCloses&&((_=(S=(h=We(s))==null?void 0:h.methods)==null?void 0:S.popup)==null||_.close.method()))},onInterceptorClick:f=>{i.value||e.content.preventInteractionsOutside&&(f.stopPropagation(),f.preventDefault())},isEditing:i,isStacked:n}}},ni=()=>{hr(e=>({"7e2415f7":e.content.overlayBackgroundColor,"1fa8899b":e.animationDuration,"6267cef2":e.animationEasing}))},ii=gn.setup;gn.setup=ii?(e,t)=>(ni(),ii(e,t)):ni;function Xu(e,t,n,i,r,a){const o=H("wwLayout");return i.isStacked?(L(),Q(o,{key:1,path:"children",role:"dialog"})):(L(),M("div",{key:0,class:se(["ww-dialog",[{overlay:n.content.overlay,"no-overlay":!n.content.overlay,transform:!n.content.overlay,"-modal":n.content.type==="modal","-editing":i.isEditing},!n.content.overlay&&i.animationClasses]]),style:N(!n.content.overlay&&i.dialogStyle),onClick:t[1]||(t[1]=Dt((...l)=>i.onRootClick&&i.onRootClick(...l),["self"]))},[n.content.overlay?ue("",!0):(L(),M(Ke,{key:0},[n.content.clickOutsideCloses?(L(),M("div",{key:0,onClick:t[0]||(t[0]=(...l)=>i.onCloseInterceptorClick&&i.onCloseInterceptorClick(...l)),class:"interceptor"})):ue("",!0)],64)),te(o,{path:"children",class:se(["content",[{transform:n.content.overlay,"-modal":n.content.type==="modal"},n.content.overlay&&i.animationClasses]]),role:"dialog",style:N(n.content.overlay&&i.dialogStyle)},null,8,["style","class"])],6))}const yd=ne(gn,[["render",Xu],["__scopeId","data-v-605c1e6a"]]),Ju={props:{content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["update-content","update:content:effect"],setup(){const{hasLink:e,tag:t,properties:n}=wwLib.wwElement.useLink();return{hasLink:e,linkTag:t,properties:n}},computed:{tag(){return this.hasLink?this.linkTag:this.content.tag},text(){return this.wwElementState.props.text},isEditing(){return!1}},methods:{}};function Yu(e,t,n,i,r,a){const o=H("wwText");return L(),Q(o,ae({tag:a.tag,text:a.text},i.properties,{class:{"-link":i.hasLink&&!a.isEditing}}),null,16,["tag","text","class"])}const wd=ne(Ju,[["render",Yu],["__scopeId","data-v-7b4f8102"]]);function Zu(e,t){const n=F(!1),i=F(!1),r=F(null);let a=null;const o=F(""),l=d(()=>Object.keys(e.wwElementState.props).includes("type")?e.wwElementState.props.type:e.content.type);function c(v){if(l.value!=="decimal")return v;if(v==null||v==="")return"";const z=`${v}`.replace(",","."),E=e.content.precision,X=E.includes(".")?E.split(".")[1].length:0;return Number(z).toFixed(X)}function s(v){return v===""||v===null||v===void 0?"":l.value==="decimal"||l.value==="number"?isNaN(parseFloat(v))?v:parseFloat(v):v}const u=d(()=>{const v=e.content.value===void 0?"":e.content.value;return l.value==="decimal"||l.value==="number"?s(v):v}),{value:f,setValue:h}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",type:d(()=>["decimal","number","currency"].includes(l.value)?"number":"string"),defaultValue:u});V(f,v=>{he(()=>{o.value=f.value}),n.value||(o.value=l.value==="decimal"?c(v):String(v??""))},{immediate:!0}),V(u,()=>{h(u.value)});const S=d(()=>e.content?e.content.type==="password"?e.content.displayPassword?"text":"password":e.content.type==="decimal"?"number":e.content.type:"text"),_=d(()=>e.wwElementState.props.readonly===void 0?e.content.readonly:e.wwElementState.props.readonly),m=d(()=>{const v={...wwLib.wwUtils.getTextStyleFromContent(e.content),"--placeholder-color":e.content.placeholderColor};return delete v.whiteSpaceCollapse,delete v.whiteSpace,v}),T=d(()=>l.value==="date"?e.content.minDate:e.content.min),b=d(()=>l.value==="date"?e.content.maxDate:e.content.max),g=d(()=>["decimal","number"].includes(l.value)?e.content.step:l.value==="time"&&e.content.timePrecision||1),p=d(()=>!n.value&&S.value==="number"?"any":g.value),I=d(()=>wwLib.wwUtils.getLengthUnit(e.content.debounceDelay)[0]);function x(v){if(l.value==="decimal"&&o.value!==""){const z=s(o.value),E=c(z);o.value=E,h(parseFloat(E)),z!==f.value&&t("trigger-event",{name:"change",event:{domEvent:v,value:z}})}}function D(v){const z=v.target.value;o.value=z;let E;if(S.value==="number"&&(z===0||z&&z.length))try{E=parseFloat(z),isNaN(E)&&(E=z)}catch{E=z}else E=z;E!==f.value&&(h(E),e.content.debounce?(i.value=!0,a&&clearTimeout(a),a=setTimeout(()=>{t("trigger-event",{name:"change",event:{domEvent:v,value:E}}),t("element-event",{type:"change",value:{domEvent:v,value:E}}),i.value=!1},I.value)):(t("trigger-event",{name:"change",event:{domEvent:v,value:E}}),t("element-event",{type:"change",value:{domEvent:v,value:E}})))}function C(v){x(v),n.value=!1}function O(){_.value||r.value&&r.value.focus()}function k(){r.value&&r.value.select()}V(n,(v,z)=>{v&&!z?t("trigger-event",{name:"focus"}):!v&&z&&t("trigger-event",{name:"blur"})});const y=d(()=>n.value);return V(y,v=>{t(v?"add-state":"remove-state","focus")},{immediate:!0}),V(_,v=>{t(v?"add-state":"remove-state","readonly")},{immediate:!0}),{inputRef:r,variableValue:f,displayValue:o,isReallyFocused:n,isDebouncing:i,type:l,step:g,inputType:S,isReadonly:_,style:m,min:T,max:b,stepAttribute:p,handleManualInput:D,focusInput:O,selectInput:k,onBlur:C,isFocused:y,setValue:h}}function Qu(e,{variableValue:t}={}){const n=d(()=>e.content.type==="currency"),i=d(()=>e.content.type==="currency"&&e.content.currencyShowSymbol),r=d(()=>e.content.currencySymbol||"$"),a=d(()=>e.content.currencySymbolPosition||"prefix"),o=d(()=>e.content.currencyDecimalPlaces??2),l=d(()=>e.content.currencyDecimalSeparator||"."),c=d(()=>e.content.currencyThousandsSeparator??","),s=F(null),u=F(""),{value:f,setValue:h}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"formatted value",isActive:n}),S=d(()=>({left:a.value==="prefix"?e.content.currencySymbolPadding??"0px":"auto",right:a.value==="suffix"?e.content.currencySymbolPadding??"0px":"auto",fontSize:e.content.currencySymbolFontSize||"inherit",color:e.content.currencySymbolColor||"inherit"})),_=()=>{if(!t.value)return"";const p=g(t.value);f.value!==p&&h(p)},m=()=>{if(!t.value)return"";const p=g(t.value);f.value!==p&&h(p)},T=async()=>{await he(),i.value&&s.value&&(u.value={[`padding-${a.value==="prefix"?"left":"right"}`]:`${e.content.currencySymbolPadding}`})},b=(p,I)=>{if(!p)return"";let x=p.replace(/\D/g,"");if(!I)return x;let D="";for(let C=0;C<x.length;C++)C>0&&(x.length-C)%3===0&&(D+=I),D+=x[C];return D},g=(p,I={})=>{const{padZeros:x=!0,includeSymbol:D=!0}=I;if(p==null||p==="")return"";let C=p.toString();const O=r.value;a.value==="prefix"&&C.startsWith(O)?C=C.substring(O.length):a.value==="suffix"&&C.endsWith(O)&&(C=C.substring(0,C.length-O.length));let k=-1;l.value&&C.includes(l.value)?k=C.lastIndexOf(l.value):k=Math.max(C.lastIndexOf("."),C.lastIndexOf(","));let y="",v="";k>=0?(y=C.substring(0,k),v=C.substring(k+1),v=v.replace(/\D/g,""),x?v=v.padEnd(o.value,"0").substring(0,o.value):v=v.substring(0,o.value)):(y=C,v=x?"0".repeat(o.value):"");const z=y.replace(/\D/g,"");y=b(z,c.value);let E=y;return(v||k>=0&&!x||x&&o.value>0)&&(E+=l.value+v),D&&i.value&&r.value&&(a.value==="prefix"?E=r.value+E:E=E+r.value),E};return V([i,()=>e.content.currencySymbol,()=>e.content.currencySymbolPosition,()=>e.content.currencySymbolPadding],async()=>{n.value&&await T()}),V([()=>e.content.currencyDecimalPlaces,()=>e.content.currencyDecimalSeparator,()=>e.content.currencyThousandsSeparator],async()=>{if(n.value){const p=g(t.value);f.value!==p&&h(p)}}),ft(async()=>{if(n.value){const p=g(t.value);f.value!==p&&h(p),await he(),await T()}},{immediate:!0}),{isCurrencyType:n,showCurrencySymbol:i,currencySymbol:r,symbolPosition:a,decimalPlaces:o,decimalSeparator:l,thousandsSeparator:c,currencySymbolRef:s,currencyInputStyle:u,currencySymbolStyle:S,updateCurrencyInputStyle:T,onCurrencyBlur:_,onCurrencyFocus:m,formattedCurrencyValue:f,formatCurrency:g}}const ed={props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["element-event","trigger-event","add-state","remove-state","update:content:effect","update:sidepanel-content"],setup(e,{emit:t}){const n=d(()=>!1),{inputRef:i,variableValue:r,displayValue:a,isReallyFocused:o,isDebouncing:l,type:c,step:s,inputType:u,isReadonly:f,style:h,min:S,max:_,stepAttribute:m,handleManualInput:T,focusInput:b,selectInput:g,onBlur:p,setValue:I}=Zu(e,t),x=d(()=>wwLib.wwUtils.getLengthUnit(e.content.debounceDelay)[0]),{showCurrencySymbol:D,currencySymbol:C,currencySymbolRef:O,currencySymbolStyle:k,currencyInputStyle:y,symbolPosition:v,onCurrencyBlur:z,onCurrencyFocus:E,formattedCurrencyValue:X,formatCurrency:Ee}=Qu(e,{variableValue:r}),U=F("");let ie=!1,De=null;V([()=>e.content.type,()=>e.content.value,r],([P,ee,J],[ye,G,Y])=>{const re=ee??J,j=ee!==G&&ee!==void 0&&ee!==null;if(P==="currency"&&(!ie||j))if(re!=null&&re!==""){const pe=Ee(re,{padZeros:!0,includeSymbol:!1});U.value!==pe&&(U.value=pe),j&&(ie=!1)}else U.value!==""&&(U.value="")},{immediate:!0});function ge(P){const ee=e.content.currencyDecimalSeparator||".",J=e.content.currencyDecimalPlaces??2;if(!([8,9,27,13,46].indexOf(P.keyCode)!==-1||P.keyCode===65&&P.ctrlKey===!0||P.keyCode===67&&P.ctrlKey===!0||P.keyCode===86&&P.ctrlKey===!0||P.keyCode===88&&P.ctrlKey===!0||P.keyCode>=35&&P.keyCode<=40)&&!(P.key===ee&&!P.target.value.includes(ee))){if(/^[0-9]$/.test(P.key)){const ye=P.target.value,G=P.target.selectionStart,Y=ye.indexOf(ee);if(Y>=0&&G>Y&&ye.substring(Y+1).length>=J){P.preventDefault();return}return}P.preventDefault()}}function Qe(P){if(e.content.type!=="currency")return;ie=!1;const J=P.target.value,ye=e.content.currencyDecimalSeparator||".",G=e.content.currencyDecimalPlaces??2;if(J&&G>0){const Y=J.split(ye),re=Y[0];let j=Y[1]||"";j.length<G&&(j=j.padEnd(G,"0"));const pe=re+ye+j;U.value!==pe&&(U.value=pe)}p(P)}function et(P){ie=!0;const ee=P.target,J=ee.value,ye=ee.selectionStart,G=e.content.currencyThousandsSeparator??",",Y=e.content.currencyDecimalSeparator||".",re=e.content.currencyDecimalPlaces??2;if(J===U.value)return;G===Y&&console.warn("⚠️ Warning: Thousands separator and decimal separator are the same:",G);let j=J,pe=!1;const vt=new RegExp(`[^\\d\\.,\\s'${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}${Y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}]`,"g");j=j.replace(vt,"");const Pt=[",","."];let nt=null;for(const fe of Pt)if(fe!==G&&j.includes(fe)){nt=fe,pe=!0;break}if(pe&&nt){const fe=j.lastIndexOf(nt);fe!==-1&&(j=j.substring(0,fe)+"."+j.substring(fe+1))}if(G)if(pe){const fe=j.lastIndexOf(".");if(fe!==-1){const Ne=j.substring(0,fe),Ve=j.substring(fe+1);let _e;G==="."?_e=Ne.replace(/\./g,""):_e=Ne.replace(new RegExp(`\\${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"g"),""),Ve||J.endsWith(Y)?j=_e+"."+Ve:j=_e}}else G==="."&&j.includes(".")?j=j.replace(/\./g,""):j=j.replace(new RegExp(`\\${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"g"),"");let st=j.split("."),Ce=st[0]||"",je=st[1]||"";je.length>re&&(je=je.substring(0,re));const Ue=Ce+(je?"."+je:""),oe=Ue===""?"":parseFloat(Ue)||0;Ce&&G&&(Ce=Ce.replace(/\B(?=(\d{3})+(?!\d))/g,G));let we=Ce;(st.length>1||J.includes(Y))&&(we+=Y+je),J.length,we.length;let Se;if(ye>=J.length)Se=we.length;else{const Ne=J.substring(0,ye).replace(new RegExp(`[^\\d${Y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}]`,"g"),"");let Ve=0;Se=0;for(let _e=0;_e<we.length;_e++){const yt=we[_e];if(/\d/.test(yt)||yt===Y)if(Ve<Ne.length)Ve++,Se=_e+1;else break}Ve<Ne.length&&(Se=we.length)}Se=Math.min(we.length,Math.max(0,Se)),I(oe),U.value!==we&&(U.value=we),he(()=>{ee.selectionStart!==Se&&ee.setSelectionRange(Se,Se)}),e.content.debounce?(l.value=!0,De&&clearTimeout(De),De=setTimeout(()=>{t("trigger-event",{name:"change",event:{domEvent:P,value:oe}}),t("element-event",{type:"change",value:{domEvent:P,value:oe}}),l.value=!1},x.value)):(t("trigger-event",{name:"change",event:{domEvent:P,value:oe}}),t("element-event",{type:"change",value:{domEvent:P,value:oe}}))}const Pe=R("_wwForm:useForm",()=>{}),Me=d(()=>e.content.fieldName),Re=d(()=>e.content.validation),ot=d(()=>e.content.customValidation),tt=d(()=>e.content.required);Pe(r,{fieldName:Me,validation:Re,customValidation:ot,required:tt,initialValue:d(()=>e.content.value)},{elementState:e.wwElementState,emit:t,sidepanelFormPath:"form",setValue:I});const me=d(()=>({...e.wwElementState.props.attributes,key:"ww-input-basic-"+s.value,value:e.content.type==="currency"?U.value:a.value,type:u.value,name:e.wwElementState.name,readonly:f.value||n.value,required:e.content.required,autocomplete:e.content.autocomplete?"on":"off",placeholder:wwLib.wwLang.getText(e.content.placeholder),style:h.value,min:S.value,max:_.value,step:m.value})),ve=d(()=>({...e.wwElementState.props.attributes,value:a.value,type:e.content.type,name:e.wwElementState.name,readonly:f.value||n.value,required:e.content.required,placeholder:wwLib.wwLang.getText(e.content.placeholder),rows:e.content.rows,style:[h.value,{resize:e.content.resize?"":"none"}]})),Be=d(()=>({hideArrows:e.content.hideArrows&&u.value==="number","date-placeholder":e.content.type==="date"&&!r.value,"-readonly":f.value,editing:n.value}));function lt(){t("trigger-event",{name:"onEnterKey",event:{value:r.value}})}function At(P){if(e.content.type==="color"&&(f.value||n.value))return P.preventDefault(),P.stopPropagation(),!1}return V(()=>e.content.value,P=>{t("trigger-event",{name:"initValueChange",event:{value:P}})}),V([()=>e.content.currencyThousandsSeparator,()=>e.content.currencyDecimalSeparator,()=>e.content.currencyDecimalPlaces],()=>{if(e.content.type==="currency"&&U.value){const P=e.content.currencyThousandsSeparator??",",ee=e.content.currencyDecimalSeparator||".",J=e.content.currencyDecimalPlaces??2;if(P===ee){console.warn("⚠️ Warning: Thousands separator and decimal separator are the same:",P);return}let Y=(r.value||0).toString().split("."),re=Y[0]||"",j=Y[1]||"";re&&P&&(re=re.replace(/\B(?=(\d{3})+(?!\d))/g,P)),J>0&&(j.length<J?j=j.padEnd(J,"0"):j.length>J&&(j=j.substring(0,J)),(j||Y.length>1)&&(re+=ee+j)),U.value!==re&&(U.value=re)}}),{inputRef:i,isReallyFocused:o,isDebouncing:l,type:c,step:s,inputType:u,isReadonly:f,style:h,isEditing:n,min:S,max:_,stepAttribute:m,handleManualInput:T,focusInput:b,selectInput:g,onBlur:p,inputBindings:me,textareaBindings:ve,inputClasses:Be,onEnter:lt,handleColorInputClick:At,handleCurrencyInput:et,handleCurrencyKeydown:ge,handleCurrencyBlur:Qe,currencyDisplayValue:U,showCurrencySymbol:D,currencySymbolStyle:k,currencySymbol:C,currencySymbolRef:O,currencyInputStyle:y,onCurrencyBlur:z,onCurrencyFocus:E,formattedCurrencyValue:X,symbolPosition:v}}};function td(e,t,n,i,r,a){return n.content.type=="currency"?(L(),M("div",{key:0,onClick:t[5]||(t[5]=(...o)=>i.focusInput&&i.focusInput(...o))},[Z("div",{class:se(["input-currency-wrapper",{"has-currency-symbol":i.showCurrencySymbol}]),style:N({"flex-direction":`${i.symbolPosition=="prefix"?"row":"row-reverse"}`})},[i.showCurrencySymbol?(L(),M("span",{key:0,ref:"currencySymbolRef",class:"currency-symbol",style:N([i.currencySymbolStyle,{padding:i.style.padding}])},qe(i.currencySymbol),5)):ue("",!0),Z("input",ae({ref:"inputRef"},i.inputBindings,{class:["ww-input-basic currency-type",[i.inputClasses]],style:i.showCurrencySymbol?i.currencyInputStyle:{},type:"text",onInput:t[0]||(t[0]=(...o)=>i.handleCurrencyInput&&i.handleCurrencyInput(...o)),onKeydown:t[1]||(t[1]=(...o)=>i.handleCurrencyKeydown&&i.handleCurrencyKeydown(...o)),onBlur:t[2]||(t[2]=o=>{i.isReallyFocused=!1,i.handleCurrencyBlur(o),i.onCurrencyBlur()}),onFocus:t[3]||(t[3]=()=>{i.isReallyFocused=!0,i.onCurrencyFocus()}),onKeyup:t[4]||(t[4]=Bt((...o)=>i.onEnter&&i.onEnter(...o),["enter"]))}),null,16)],6)])):n.content.type=="textarea"?(L(),M("textarea",ae({key:1,ref:"inputRef"},i.textareaBindings,{class:["ww-input-basic",{editing:i.isEditing}],onInput:t[6]||(t[6]=(...o)=>i.handleManualInput&&i.handleManualInput(...o)),onFocus:t[7]||(t[7]=o=>i.isReallyFocused=!0),onBlur:t[8]||(t[8]=(...o)=>i.onBlur&&i.onBlur(...o)),onKeyup:t[9]||(t[9]=Bt((...o)=>i.onEnter&&i.onEnter(...o),["enter"]))}),null,16)):(L(),M("input",ae({key:2,ref:"inputRef"},i.inputBindings,{class:["ww-input-basic",[i.inputClasses]],onInput:t[10]||(t[10]=(...o)=>i.handleManualInput&&i.handleManualInput(...o)),onBlur:t[11]||(t[11]=(...o)=>i.onBlur&&i.onBlur(...o)),onFocus:t[12]||(t[12]=o=>i.isReallyFocused=!0),onClick:t[13]||(t[13]=(...o)=>i.handleColorInputClick&&i.handleColorInputClick(...o)),onKeyup:t[14]||(t[14]=Bt((...o)=>i.onEnter&&i.onEnter(...o),["enter"]))}),null,16))}const bd=ne(ed,[["render",td],["__scopeId","data-v-71f82519"]]),nd={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}}};function id(e,t,n,i,r,a){return L(),M("div",{class:se(["skeleton-loader",{"skeleton-pulse":n.content.animationType==="pulse","skeleton-wave":n.content.animationType==="wave","skeleton-shimmer":n.content.animationType==="shimmer"}])},null,2)}const pd=ne(nd,[["render",id],["__scopeId","data-v-f1e00433"]]);export{ld as a,sd as b,cd as c,ud as d,od as e,dd as f,fd as g,hd as h,md as i,gd as j,vd as k,yd as l,wd as m,bd as n,pd as o};

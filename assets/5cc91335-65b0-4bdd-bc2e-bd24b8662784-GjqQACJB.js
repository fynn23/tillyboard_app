import{_ as ne,c as b,o as g,a as r,b as D,d as B,e as F,r as f,w as S,I as $,N as ee,n as te,t as A,Q as q,f as Te,h as Ve,i as c}from"./main-BEqSrhKB.js";import{e as Me}from"./wwElement-DbKnMvpV.js";import{e as Pe,a as Fe,b as ke,c as Ce,d as pe,f as Ee,g as xe,h as ze,i as je,j as He,k as Le,l as Be,m as Ne,n as Ae,o as qe}from"./wwElement-B8lFQ3C7.js";import{e as De,s as Se}from"./wwSection-m7dgndlv.js";import{e as Re}from"./wwElement-HEl49ywS.js";import{e as Ue}from"./wwElement-CqGNwdaD.js";import{e as Ie}from"./wwElement-Ceis49Lj.js";const Xe={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["trigger-event"],setup(o,{emit:n}){const i=F(()=>!1),{value:e,setValue:v}=wwLib.wwVariable.useComponentVariable({uid:o.uid,name:"currentTime",type:"number",defaultValue:F(()=>o.content.initialTime??0)}),d=F(()=>o.content.duration||100),a=F(()=>o.content.videoUrl||""),V=F(()=>o.content.previewUrl||o.content.videoUrl||""),u=f(!1),C=f(0),M=f(null),P=f(0),y=F(()=>d.value?e.value/d.value*100:0),O=h=>{if(i.value)return;const w=h.currentTarget.getBoundingClientRect(),U=h.clientX-w.left,p=Math.min(Math.max(U/w.width,0),1);C.value=U-50,P.value=p*d.value,M.value&&V.value&&(M.value.currentTime=P.value)},x=()=>{u.value=!1},Q=h=>{if(i.value)return;const w=parseFloat(h.target.value);v(w),n("trigger-event",{name:"change",event:{value:w}})};return S(()=>o.content.initialTime,h=>{h!==void 0&&h!==e.value&&(v(parseFloat(h)),n("trigger-event",{name:"initValueChange",event:{value:parseFloat(h)}}))}),{currentTime:e,duration:d,videoUrl:a,previewUrl:V,showPreview:u,previewPosition:C,previewVideo:M,previewTime:P,progressPercentage:y,handleMouseMove:O,hidePreview:x,updateTime:Q,setTime:h=>{if(typeof h!="number")return;const w=Math.min(Math.max(h,0),d.value);v(w)}}}},Oe=["max","value"],Qe=["src"];function Ge(o,n,i,e,v,d){return g(),b("div",{class:"video-range-slider",style:B({"--track-height":i.content.trackHeight,"--track-color":i.content.trackColor,"--progress-color":i.content.progressColor,"--thumb-color":i.content.thumbColor,"--thumb-size":i.content.thumbSize})},[r("div",{class:"slider-container",onMousemove:n[3]||(n[3]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a)),onMouseleave:n[4]||(n[4]=(...a)=>e.hidePreview&&e.hidePreview(...a))},[r("input",{type:"range",class:"range-slider",min:"0",max:e.duration,value:e.currentTime,step:"0.01",onInput:n[0]||(n[0]=(...a)=>e.updateTime&&e.updateTime(...a)),onMouseenter:n[1]||(n[1]=a=>e.showPreview=!0),onMouseleave:n[2]||(n[2]=a=>e.showPreview=!1)},null,40,Oe),r("div",{class:"progress-bar",style:B({width:e.progressPercentage+"%"})},null,4)],32),e.showPreview&&e.previewUrl?(g(),b("div",{key:0,class:"preview-container",style:B({left:e.previewPosition+"px"})},[r("video",{ref:"previewVideo",class:"preview-video",src:e.previewUrl,preload:"auto",muted:""},null,8,Qe)],4)):D("",!0)],4)}const Je=ne(Xe,[["render",Ge],["__scopeId","data-v-a8e1cce5"]]),Ke={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["trigger-event"],setup(o,{emit:n}){var W,Y,Z;const i=F(()=>!1),e=f(null),v=f(!1),d=f(((W=o.content)==null?void 0:W.startMuted)||!1),a=f((Y=o.content)!=null&&Y.startMuted?0:((Z=o.content)==null?void 0:Z.volume)||1),V=f(0),u=f(0),C=f(!1),M=f(!0),P=f(null),y=f(0),{value:O,setValue:x}=wwLib.wwVariable.useComponentVariable({uid:o.uid,name:"currentTime",type:"number",defaultValue:0}),{value:Q,setValue:R}=wwLib.wwVariable.useComponentVariable({uid:o.uid,name:"duration",type:"number",defaultValue:0}),{value:h,setValue:w}=wwLib.wwVariable.useComponentVariable({uid:o.uid,name:"isPlaying",type:"boolean",defaultValue:!1}),{value:U,setValue:p}=wwLib.wwVariable.useComponentVariable({uid:o.uid,name:"framerate",type:"number",defaultValue:0}),N=f(!1),G=f(0),J=f(0),ae=F(()=>{var t;return((t=o.content)==null?void 0:t.videoSrc)||""}),oe=F(()=>u.value<=0||isNaN(u.value)||!isFinite(u.value)?0:V.value/u.value*100);S(()=>{var t;return(t=o.content)==null?void 0:t.videoSrc},t=>{var l;t&&e.value&&(V.value=0,u.value=0,y.value=0,x(0),R(0),p(0),e.value.load(),(l=o.content)!=null&&l.autoplay&&!i.value&&H())}),S(()=>{var t;return(t=o.content)==null?void 0:t.volume},t=>{t!==void 0&&e.value&&!d.value&&(e.value.volume=t,a.value=t)}),S(()=>{var t;return(t=o.content)==null?void 0:t.startMuted},t=>{t!==void 0&&e.value&&(e.value.muted=t,d.value=t)});const le=t=>{if(isNaN(t)||!isFinite(t)||t<0)return"00:00";const l=Math.floor(t/60),s=Math.floor(t%60);return`${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},ie=()=>{e.value&&(V.value=e.value.currentTime,x(V.value))};let m=null,z=0,k=0,j=0;const I=()=>{if(!e.value||!v.value||i.value||y.value>0){cancelAnimationFrame(m),m=null;return}const t=e.value.currentTime,l=performance.now();(j===0||Math.abs(t-z-k*(1/30))>1)&&(j=l,z=t,k=0),k++;const s=t-z,T=(l-j)/1e3;if(s>=1&&k>=20){const _=Math.round(k/s);if(_>0&&_<120){y.value=_,p(y.value),cancelAnimationFrame(m),m=null;return}else if(T>=5&&_>0){y.value=_,p(y.value),cancelAnimationFrame(m),m=null;return}}m=requestAnimationFrame(I)},re=()=>{if(e.value){if(u.value=e.value.duration,R(u.value),e.value.videoTracks&&e.value.videoTracks.length>0){const t=e.value.videoTracks[0].frameRate;t>0&&(y.value=t,p(y.value))}y.value===0&&!i.value&&v.value&&(m||(z=e.value.currentTime,j=performance.now(),k=0,m=requestAnimationFrame(I))),n("trigger-event",{name:"loaded",event:{duration:u.value}})}},se=()=>{v.value=!0,w(!0),y.value===0&&!i.value&&(m||(z=e.value.currentTime,j=performance.now(),k=0,m=requestAnimationFrame(I))),n("trigger-event",{name:"play",event:{currentTime:V.value}}),L()},ue=()=>{v.value=!1,w(!1),cancelAnimationFrame(m),m=null,n("trigger-event",{name:"pause",event:{currentTime:V.value}}),L()},ce=()=>{var t;v.value=!1,w(!1),cancelAnimationFrame(m),m=null,n("trigger-event",{name:"ended",event:{}}),(t=o.content)!=null&&t.loop&&e.value&&(e.value.currentTime=0,H()),L()},ve=()=>{e.value&&(a.value=e.value.volume,d.value=e.value.muted,n("trigger-event",{name:"volumeChange",event:{volume:a.value,muted:d.value}}))},H=()=>{if(i.value||!e.value)return;const t=e.value.play();t!==void 0&&t.catch(l=>{var s,T;if(l.name==="NotAllowedError"&&((s=o.content)!=null&&s.autoplay)&&!((T=o.content)!=null&&T.startMuted)){console.warn("Autoplay was prevented (unmuted). Attempting muted autoplay."),e.value.muted=!0,d.value=!0;const _=e.value.play();_!==void 0&&_.catch(he=>{console.error("Error playing video (muted retry failed):",he),v.value=!1,w(!1)})}else l.name==="AbortError"?(console.log("Video play was aborted (e.g., user paused before promise resolved)."),v.value=!1,w(!1)):(console.error("Error playing video:",l),v.value=!1,w(!1))})},K=()=>{i.value||e.value&&e.value.pause()},de=()=>{i.value||e.value&&(v.value?K():H())},me=t=>{if(i.value||!e.value||u.value<=0||isNaN(u.value)||!isFinite(u.value))return;const s=t.currentTarget.getBoundingClientRect(),_=(t.clientX-s.left)/s.width*u.value;e.value.currentTime=_,V.value=_,x(_)},fe=t=>{if(!e.value||u.value<=0||isNaN(u.value)||!isFinite(u.value)){N.value=!1;return}const s=t.currentTarget.getBoundingClientRect(),T=t.clientX-s.left,_=Math.max(0,Math.min(1,T/s.width));N.value=!0,G.value=T,J.value=_*u.value},be=()=>{N.value=!1},ge=t=>{if(i.value||!e.value)return;const l=parseFloat(t),s=Math.max(0,Math.min(1,l));e.value.volume=s,a.value=s,s>0&&e.value.muted?(e.value.muted=!1,d.value=!1):s===0&&!e.value.muted&&(e.value.muted=!0,d.value=!0)},we=()=>{var t;i.value||e.value&&(e.value.muted=!e.value.muted,d.value=e.value.muted,!e.value.muted&&e.value.volume===0&&(e.value.volume=((t=o.content)==null?void 0:t.volume)||.5,a.value=e.value.volume))},_e=()=>{var l;if(i.value)return;const t=(l=e.value)==null?void 0:l.parentElement;if(t)if(!C.value)t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen();else{const s=wwLib.getFrontDocument();s.exitFullscreen?s.exitFullscreen():s.webkitExitFullscreen?s.webkitExitFullscreen():s.msExitFullscreen&&s.msExitFullscreen()}},L=()=>{var t,l;if(((t=o.content)==null?void 0:t.showControls)!==!1){if(i.value){M.value=!0;return}M.value=!0,X(),(l=o.content)!=null&&l.autoHideControls&&v.value&&(P.value=setTimeout(()=>{M.value=!1},3e3))}},ye=()=>{var t,l;((t=o.content)==null?void 0:t.showControls)!==!1&&(i.value||(l=o.content)!=null&&l.autoHideControls&&v.value&&(P.value=setTimeout(()=>{M.value=!1},1e3)))},X=()=>{P.value&&(clearTimeout(P.value),P.value=null)},E=()=>{const t=wwLib.getFrontDocument();C.value=!!(t.fullscreenElement||t.webkitFullscreenElement||t.msFullscreenElement),L()};return Te(()=>{var l,s,T;const t=wwLib.getFrontDocument();t.addEventListener("fullscreenchange",E),t.addEventListener("webkitfullscreenchange",E),t.addEventListener("msfullscreenchange",E),e.value&&(((l=o.content)==null?void 0:l.volume)!==void 0&&(e.value.volume=o.content.volume,a.value=o.content.volume),(s=o.content)!=null&&s.startMuted&&(e.value.muted=!0,d.value=!0),(T=o.content)!=null&&T.autoplay&&!i.value&&H())}),Ve(()=>{const t=wwLib.getFrontDocument();t.removeEventListener("fullscreenchange",E),t.removeEventListener("webkitfullscreenchange",E),t.removeEventListener("msfullscreenchange",E),X(),m&&(cancelAnimationFrame(m),m=null)}),{videoElement:e,isPlaying:v,isMuted:d,volume:a,currentTime:V,duration:u,isFullscreen:C,controlsVisible:M,isHovering:N,hoverPosition:G,hoverTime:J,framerate:y,videoSrc:ae,progressPercentage:oe,formatTime:le,onTimeUpdate:ie,onLoadedMetadata:re,onPlay:se,onPause:ue,onEnded:ce,onVolumeChange:ve,playVideo:H,pauseVideo:K,togglePlay:de,seekVideo:me,updateHoverPosition:fe,hideHover:be,setVolume:ge,toggleMute:we,toggleFullscreen:_e,showControls:L,hideControlsDelayed:ye,clearHideControlsTimeout:X,seekToTime:t=>{if(i.value||!e.value)return;const l=parseFloat(t);isNaN(l)||!isFinite(l)||(e.value.currentTime=Math.min(Math.max(0,l),u.value||0))},seekToPercentage:t=>{if(i.value||!e.value||u.value<=0||isNaN(u.value)||!isFinite(u.value))return;const l=parseFloat(t);if(isNaN(l)||!isFinite(l))return;const T=Math.min(Math.max(0,l),100)/100*u.value;e.value.currentTime=T}}}},We=["src","poster","muted","autoplay","loop","playsinline"],Ye={key:0,viewBox:"0 0 24 24",class:"play-icon"},Ze={key:1,viewBox:"0 0 24 24",class:"pause-icon"},$e={class:"progress-bar"},et={class:"hover-time"},tt={class:"controls-row"},nt={key:0,viewBox:"0 0 24 24",class:"play-icon"},at={key:1,viewBox:"0 0 24 24",class:"pause-icon"},ot={class:"time-display"},lt={key:0,class:"framerate-display"},it={class:"volume-control"},rt={key:0,viewBox:"0 0 24 24",class:"volume-mute-icon"},st={key:1,viewBox:"0 0 24 24",class:"volume-low-icon"},ut={key:2,viewBox:"0 0 24 24",class:"volume-high-icon"},ct={class:"volume-slider-container"},vt=["value"],dt={key:0,viewBox:"0 0 24 24",class:"fullscreen-icon"},mt={key:1,viewBox:"0 0 24 24",class:"fullscreen-exit-icon"};function ft(o,n,i,e,v,d){return g(),b("div",{class:te(["custom-video-player",{"controls-visible":e.controlsVisible,"is-playing":e.isPlaying}]),onMousemove:n[18]||(n[18]=(...a)=>e.showControls&&e.showControls(...a)),onMouseleave:n[19]||(n[19]=(...a)=>e.hideControlsDelayed&&e.hideControlsDelayed(...a))},[r("video",{ref:"videoElement",class:"video-element",src:e.videoSrc,poster:i.content.posterImage,muted:i.content.startMuted,autoplay:i.content.autoplay,loop:i.content.loop,playsinline:i.content.playInline,onTimeupdate:n[0]||(n[0]=(...a)=>e.onTimeUpdate&&e.onTimeUpdate(...a)),onLoadedmetadata:n[1]||(n[1]=(...a)=>e.onLoadedMetadata&&e.onLoadedMetadata(...a)),onPlay:n[2]||(n[2]=(...a)=>e.onPlay&&e.onPlay(...a)),onPause:n[3]||(n[3]=(...a)=>e.onPause&&e.onPause(...a)),onEnded:n[4]||(n[4]=(...a)=>e.onEnded&&e.onEnded(...a)),onVolumechange:n[5]||(n[5]=(...a)=>e.onVolumeChange&&e.onVolumeChange(...a)),onClick:n[6]||(n[6]=(...a)=>e.togglePlay&&e.togglePlay(...a))},null,40,We),i.content.showBigPlayButton?$((g(),b("div",{key:0,class:"big-play-button-container",onClick:n[7]||(n[7]=(...a)=>e.togglePlay&&e.togglePlay(...a))},[r("div",{class:te(["big-play-button",{"is-playing":e.isPlaying}])},[e.isPlaying?(g(),b("svg",Ze,n[21]||(n[21]=[r("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(g(),b("svg",Ye,n[20]||(n[20]=[r("path",{d:"M8 5v14l11-7z"},null,-1)])))],2)],512)),[[ee,!e.isPlaying||e.controlsVisible]]):D("",!0),$(r("div",{class:"video-controls",onMouseenter:n[16]||(n[16]=(...a)=>e.clearHideControlsTimeout&&e.clearHideControlsTimeout(...a)),onMouseleave:n[17]||(n[17]=(...a)=>e.hideControlsDelayed&&e.hideControlsDelayed(...a))},[r("div",{class:"progress-container",onClick:n[8]||(n[8]=(...a)=>e.seekVideo&&e.seekVideo(...a)),onMousemove:n[9]||(n[9]=(...a)=>e.updateHoverPosition&&e.updateHoverPosition(...a)),onMouseleave:n[10]||(n[10]=(...a)=>e.hideHover&&e.hideHover(...a))},[r("div",$e,[r("div",{class:"progress-fill",style:B({width:`${e.progressPercentage}%`})},null,4),e.isHovering?(g(),b("div",{key:0,class:"progress-hover",style:B({left:`${e.hoverPosition}px`})},[r("div",et,A(e.formatTime(e.hoverTime)),1)],4)):D("",!0)])],32),r("div",tt,[r("button",{class:"control-button play-pause",onClick:n[11]||(n[11]=q((...a)=>e.togglePlay&&e.togglePlay(...a),["stop"]))},[e.isPlaying?(g(),b("svg",at,n[23]||(n[23]=[r("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(g(),b("svg",nt,n[22]||(n[22]=[r("path",{d:"M8 5v14l11-7z"},null,-1)])))]),r("div",ot,[r("span",null,A(e.formatTime(e.currentTime)),1),n[24]||(n[24]=r("span",{class:"time-separator"},"/",-1)),r("span",null,A(e.formatTime(e.duration)),1),e.framerate>0?(g(),b("span",lt,A(e.framerate)+" fps",1)):D("",!0)]),r("div",it,[r("button",{class:"control-button volume-button",onClick:n[12]||(n[12]=q((...a)=>e.toggleMute&&e.toggleMute(...a),["stop"]))},[e.isMuted||e.volume===0?(g(),b("svg",rt,n[25]||(n[25]=[r("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,-1)]))):e.volume<.5?(g(),b("svg",st,n[26]||(n[26]=[r("path",{d:"M7 9v6h4l5 5V4l-5 5H7z"},null,-1)]))):(g(),b("svg",ut,n[27]||(n[27]=[r("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,-1)])))]),r("div",ct,[r("input",{type:"range",min:"0",max:"1",step:"0.01",class:"volume-slider",value:e.volume,onInput:n[13]||(n[13]=a=>e.setVolume(a.target.value)),onClick:n[14]||(n[14]=q(()=>{},["stop"]))},null,40,vt)])]),r("button",{class:"control-button fullscreen-button",onClick:n[15]||(n[15]=q((...a)=>e.toggleFullscreen&&e.toggleFullscreen(...a),["stop"]))},[e.isFullscreen?(g(),b("svg",mt,n[29]||(n[29]=[r("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)]))):(g(),b("svg",dt,n[28]||(n[28]=[r("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])))])])],544),[[ee,i.content.showControls!==!1&&e.controlsVisible]])],34)}const bt=ne(Ke,[["render",ft],["__scopeId","data-v-3c575389"]]);c.component("wwobject-14723a21-0178-4d92-a7e9-d1dfeaec29a7",Me);c.component("wwobject-1b1e2173-9b78-42cc-a8ee-a6167caea340",Pe);c.component("wwobject-1ba25bdf-dee9-4e0e-a0b8-b3f3128c3b65",Fe);c.component("wwobject-21881619-a984-4847-81a9-922c3dbb5853",ke);c.component("wwobject-3a7d6379-12d3-4387-98ff-b332bb492a63",De);c.component("wwobject-6145eb60-0af8-4e52-bcc6-dc0f6743654e",Ce);c.component("wwobject-69d0b3ef-b265-494c-8cd1-874da4aa1834",pe);c.component("wwobject-6ba133b6-a444-414f-93a5-25cd237dd398",Ee);c.component("wwobject-6f8796b1-8273-498d-95fc-7013b7c63214",xe);c.component("wwobject-83d890fb-84f9-4386-b459-fb4be89a8e15",Re);c.component("wwobject-90cd6854-c213-4f06-806c-be321342389b",Je);c.component("wwobject-9256b033-f4e8-4ab4-adce-dac3a940d7f5",Ue);c.component("wwobject-9ecb2cfc-cef7-4be8-b736-3e17a3b7e9ff",ze);c.component("wwobject-a311c0b1-c8ce-472b-abb1-e9b98b076e1b",Ie);c.component("wwobject-a3191a7e-88b6-4e90-a36a-d86ae4700a1f",bt);c.component("wwobject-a6cb6a4d-6af7-4cd6-b530-a15d9ec64488",je);c.component("wwobject-af811adf-94d9-49dd-ab22-e2f29ae30299",He);c.component("wwobject-b783dc65-d528-4f74-8c14-e27c934c39b1",Le);c.component("wwobject-c6c0c00e-49fd-4cb9-bd78-5bc09945721e",Be);c.component("wwobject-d7904e9d-fc9a-4d80-9e32-728e097879ad",Ne);c.component("wwobject-deb10a01-5eef-4aa1-9017-1b51c2ad6fd0",Ae);c.component("wwobject-f4c24d06-bc88-4b62-add3-4d1f8b42221c",qe);c.component("section-99586bd3-2b15-4d6b-a025-6a50d07ca845",Se);

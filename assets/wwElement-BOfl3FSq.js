import{_ as Te,p as nn,e as v,c as R,o as V,b as K,a as q,d as J,t as re,n as Ce,V as tn,D as an,H as ot,J as lt,F as st,q as ut,j as rn,U as ct,r as j,h as ft,S as Be,w as me,O as dt}from"./main-wZxHusq7.js";const Ee={props:{file:{type:Object,required:!0},status:{type:Object,required:!0},index:{type:Number,required:!0},isReadonly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},emits:["remove"],setup(e){const n=nn("_wwFileUpload",{files:v(()=>[]),content:v(()=>({})),isDisabled:v(()=>!1),isReadonly:v(()=>!1),isSingleMode:v(()=>!0),acceptedTypes:v(()=>"")}),a=v(()=>n.files.value.length),t=v(()=>{var c;return((c=n.content)==null?void 0:c.value)||{}}),o=v(()=>{var c;return(c=t.value)==null?void 0:c.showFileInfo}),l=v(()=>{var c,f,d;return{padding:((c=t.value)==null?void 0:c.fileItemPadding)||"12px",borderRadius:((f=t.value)==null?void 0:f.fileItemBorderRadius)||"6px",margin:((d=t.value)==null?void 0:d.fileItemMargin)||"0 0 8px 0",position:"relative",overflow:"hidden"}}),s=v(()=>{var c,f,d,F;return{fontFamily:((c=t.value)==null?void 0:c.fileNameFontFamily)||"inherit",fontSize:((f=t.value)==null?void 0:f.fileNameFontSize)||"14px",fontWeight:((d=t.value)==null?void 0:d.fileNameFontWeight)||500,color:((F=t.value)==null?void 0:F.fileNameColor)||"inherit"}}),u=v(()=>{var c,f,d,F;return{fontFamily:((c=t.value)==null?void 0:c.fileDetailsFontFamily)||"inherit",fontSize:((f=t.value)==null?void 0:f.fileDetailsFontSize)||"12px",fontWeight:((d=t.value)==null?void 0:d.fileDetailsFontWeight)||"normal",color:((F=t.value)==null?void 0:F.fileDetailsColor)||"#888"}}),r=v(()=>{var c,f,d,F,g;return{width:((c=t.value)==null?void 0:c.actionButtonSize)||"28px",height:((f=t.value)==null?void 0:f.actionButtonSize)||"28px",color:((d=t.value)==null?void 0:d.actionButtonColor)||"#666",borderRadius:((F=t.value)==null?void 0:F.actionButtonBorderRadius)||"4px",margin:((g=t.value)==null?void 0:g.actionButtonMargin)||"0 0 0 4px"}});return{formattedSize:v(()=>{const c=e.file.size||0;if(c===0)return"0 B";const f=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(2)} ${f[d]}`}),filesCount:a,fileItemStyles:l,fileNameStyles:s,fileDetailsStyles:u,actionButtonStyles:r,content:t,showFileInfo:o}}},Ye=()=>{tn(e=>{var n,a,t,o,l,s,u,r,y,c,f,d,F,g,p,D,C,m,b,I,B,M,T,E,_,x,O;return{"285f70a8":((n=e.content)==null?void 0:n.fileItemPadding)||"12px","46126a0e":((a=e.content)==null?void 0:a.fileItemBorderColor)||"#eee","64f5c8e8":((t=e.content)==null?void 0:t.fileItemBorderRadius)||"6px","19bad292":(((o=e.content)==null?void 0:o.fileItemMargin)||"0 0 8px 0").split(" ")[2]||"8px","78bf3cc7":((l=e.content)==null?void 0:l.fileItemBackground)||"#fff","8c8e9e28":((s=e.content)==null?void 0:s.fileItemShadow)||"0 2px 4px rgba(0, 0, 0, 0.05)",f9afa914:((u=e.content)==null?void 0:u.fileItemHoverBorderColor)||((r=e.content)==null?void 0:r.fileItemBorderColor)||"#ddd","00f6d954":((y=e.content)==null?void 0:y.fileItemHoverBackground)||((c=e.content)==null?void 0:c.fileItemBackground)||"#fff","2cd8e6f1":((f=e.content)==null?void 0:f.fileItemHoverShadow)||((d=e.content)==null?void 0:d.fileItemShadow)||"0 2px 4px rgba(0, 0, 0, 0.05)","3d35868e":((F=e.content)==null?void 0:F.fileNameFontSize)||"14px","895e7f4c":((g=e.content)==null?void 0:g.fileNameFontWeight)||500,cf050c8c:((p=e.content)==null?void 0:p.fileNameColor)||"inherit",be64ba00:((D=e.content)==null?void 0:D.fileDetailsFontSize)||"12px","63b99556":((C=e.content)==null?void 0:C.fileDetailsColor)||"#888","61558c28":((m=e.content)==null?void 0:m.actionButtonSize)||"28px",d41caed6:((b=e.content)==null?void 0:b.actionButtonBorderRadius)||"4px",f1c69ac0:((I=e.content)==null?void 0:I.actionButtonBorderColor)||((B=e.content)==null?void 0:B.fileItemBorderColor)||"#eee",f10f1bc0:((M=e.content)==null?void 0:M.actionButtonBackground)||"#fff","6e09a33b":((T=e.content)==null?void 0:T.actionButtonColor)||"#666","7b722e22":(((E=e.content)==null?void 0:E.actionButtonMargin)||"0 0 0 4px").split(" ")[3]||"4px",b884513e:((_=e.content)==null?void 0:_.actionButtonHoverBorderColor)||((x=e.content)==null?void 0:x.fileItemHoverBorderColor)||"#ddd",ca565914:((O=e.content)==null?void 0:O.actionButtonHoverBackground)||"#f8f8f8"}})},Ze=Ee.setup;Ee.setup=Ze?(e,n)=>(Ye(),Ze(e,n)):Ye;const vt=["aria-label"],gt={class:"ww-file-item__info"},mt={key:0},ht={class:"ww-file-item__actions"},yt=["disabled"];function pt(e,n,a,t,o,l){return V(),R("li",{class:Ce(["ww-file-item",{"ww-file-item--disabled":a.isDisabled}]),style:J(t.fileItemStyles),role:"listitem","aria-label":`File: ${a.file.name}, Size: ${t.formattedSize}`},[a.status&&a.status.uploadProgress!==void 0?(V(),R("div",{key:0,class:"ww-file-item__progress",style:J({width:`${Math.min(100,Math.round(a.status.uploadProgress))}%`,backgroundColor:t.content.progressBarColor||"#EEEEEE"})},null,4)):K("",!0),q("div",gt,[q("div",{class:"ww-file-item__name",style:J(t.fileNameStyles)},re(a.file.name),5),t.showFileInfo?(V(),R("div",{key:0,class:"ww-file-item__details",style:J(t.fileDetailsStyles)},[q("span",null,re(t.formattedSize),1),a.status&&a.status.uploadProgress!==void 0?(V(),R("span",mt," â€¢ "+re(`${Math.round(a.status.uploadProgress)}%`),1)):K("",!0)],4)):K("",!0)]),q("div",ht,[a.isReadonly?K("",!0):(V(),R("button",{key:0,type:"button",class:"ww-file-item__btn ww-file-item__btn--remove",disabled:a.isDisabled||a.isReadonly,onClick:n[0]||(n[0]=s=>e.$emit("remove")),style:J(t.actionButtonStyles),"aria-label":"Remove file"},n[1]||(n[1]=[q("div",{class:"fas fa-times"},null,-1)]),12,yt))])],14,vt)}const bt=Te(Ee,[["render",pt],["__scopeId","data-v-05194b7a"]]),wt={name:"FileList",components:{FileItem:bt},props:{files:{type:Array,required:!0},status:{type:Object,required:!0},type:{type:String,default:"single",validator:e=>["single","multi"].includes(e)},isReadonly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},emits:["remove"],setup(e){return{getFileStatus:a=>!(a!=null&&a.name)||!e.status?{}:e.status[a.name]||{}}}},Ft={class:"ww-file-list",role:"list","aria-label":"Uploaded files"};function Mt(e,n,a,t,o,l){const s=an("FileItem");return V(),R("div",Ft,[ot(ct,{name:"file-list-transition",tag:"div",class:"ww-file-list__inner"},{default:lt(()=>[(V(!0),R(st,null,ut(a.files,(u,r)=>(V(),rn(s,{key:u.id||`file-${r}-${u.name}-${u.size}`,file:u,status:t.getFileStatus(u),index:r,"is-readonly":a.isReadonly,"is-disabled":a.isDisabled,onRemove:y=>e.$emit("remove",r)},null,8,["file","status","index","is-readonly","is-disabled","onRemove"]))),128))]),_:1})])}const xt=Te(wt,[["render",Mt],["__scopeId","data-v-b4350705"]]);function St(e,n={}){const{maxFileSize:a,minFileSize:t,maxTotalFileSize:o,currentTotalSize:l=0,acceptedTypes:s=""}=n,u=e.size/(1024*1024),r=l/(1024*1024);return t&&u<t?{valid:!1,reason:`File size (${u.toFixed(2)} MB) is less than the minimum allowed size (${t} MB)`,constraint:"MIN_SIZE",details:{minSize:t,actualSize:u}}:a&&u>a?{valid:!1,reason:`File size (${u.toFixed(2)} MB) exceeds the maximum allowed size (${a} MB)`,constraint:"MAX_SIZE",details:{maxSize:a,actualSize:u}}:o&&o>0&&r+u>o?{valid:!1,reason:`Total file size (${(r+u).toFixed(2)} MB) would exceed the maximum allowed (${o} MB)`,constraint:"MAX_TOTAL_SIZE",details:{maxTotalSize:o,currentTotalSize:r,newFileSize:u,resultingTotalSize:r+u}}:s&&!Bt(e,s)?{valid:!1,reason:`File type "${e.type}" is not accepted. Allowed types: ${s}`,constraint:"INVALID_TYPE",details:{allowedTypes:s,fileType:e.type,fileExtension:Dt(e.name,e.type)}}:{valid:!0}}function Bt(e,n){if(!n||!e||!e.type)return!n;const a=n.split(",").map(l=>l.trim().toLowerCase()),t=e.type.split("/")[0]+"/*";if(a.includes(t)||a.includes(e.type.toLowerCase()))return!0;const o="."+e.name.split(".").pop().toLowerCase();return a.includes(o)}function Dt(e,n){return e&&e.includes(".")?e.split(".").pop().toLowerCase():n?{"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","application/pdf":"pdf","text/csv":"csv","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/json":"json","text/plain":"txt"}[n]||n.split("/").pop():""}function Ct(e){return new Promise((n,a)=>{const t=new FileReader;t.onload=()=>n(t.result),t.onerror=()=>a(new Error("Failed to convert file to Base64")),t.readAsDataURL(e)})}function It(e){return new Promise((n,a)=>{const t=new FileReader;t.onload=()=>n(t.result),t.onerror=()=>a(new Error("Failed to convert file to binary")),t.readAsArrayBuffer(e)})}var on={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},_e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},zt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],he={CSS:{},springs:{}};function Y(e,n,a){return Math.min(Math.max(e,n),a)}function ue(e,n){return e.indexOf(n)>-1}function De(e,n){return e.apply(null,n)}var h={arr:function(e){return Array.isArray(e)},obj:function(e){return ue(Object.prototype.toString.call(e),"Object")},pth:function(e){return h.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||h.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return h.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return h.hex(e)||h.rgb(e)||h.hsl(e)},key:function(e){return!on.hasOwnProperty(e)&&!_e.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function ln(e){var n=/\(([^)]+)\)/.exec(e);return n?n[1].split(",").map(function(a){return parseFloat(a)}):[]}function sn(e,n){var a=ln(e),t=Y(h.und(a[0])?1:a[0],.1,100),o=Y(h.und(a[1])?100:a[1],.1,100),l=Y(h.und(a[2])?10:a[2],.1,100),s=Y(h.und(a[3])?0:a[3],.1,100),u=Math.sqrt(o/t),r=l/(2*Math.sqrt(o*t)),y=r<1?u*Math.sqrt(1-r*r):0,c=1,f=r<1?(r*u+-s)/y:-s+u;function d(g){var p=n?n*g/1e3:g;return r<1?p=Math.exp(-p*r*u)*(c*Math.cos(y*p)+f*Math.sin(y*p)):p=(c+f*p)*Math.exp(-p*u),g===0||g===1?g:1-p}function F(){var g=he.springs[e];if(g)return g;for(var p=1/6,D=0,C=0;;)if(D+=p,d(D)===1){if(C++,C>=16)break}else C=0;var m=D*p*1e3;return he.springs[e]=m,m}return n?d:F}function Tt(e){return e===void 0&&(e=10),function(n){return Math.ceil(Y(n,1e-6,1)*e)*(1/e)}}var Et=(function(){var e=11,n=1/(e-1);function a(c,f){return 1-3*f+3*c}function t(c,f){return 3*f-6*c}function o(c){return 3*c}function l(c,f,d){return((a(f,d)*c+t(f,d))*c+o(f))*c}function s(c,f,d){return 3*a(f,d)*c*c+2*t(f,d)*c+o(f)}function u(c,f,d,F,g){var p,D,C=0;do D=f+(d-f)/2,p=l(D,F,g)-c,p>0?d=D:f=D;while(Math.abs(p)>1e-7&&++C<10);return D}function r(c,f,d,F){for(var g=0;g<4;++g){var p=s(f,d,F);if(p===0)return f;var D=l(f,d,F)-c;f-=D/p}return f}function y(c,f,d,F){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var g=new Float32Array(e);if(c!==f||d!==F)for(var p=0;p<e;++p)g[p]=l(p*n,c,d);function D(C){for(var m=0,b=1,I=e-1;b!==I&&g[b]<=C;++b)m+=n;--b;var B=(C-g[b])/(g[b+1]-g[b]),M=m+B*n,T=s(M,c,d);return T>=.001?r(C,M,c,d):T===0?M:u(C,m,m+n,c,d)}return function(C){return c===f&&d===F||C===0||C===1?C:l(D(C),f,F)}}return y})(),un=(function(){var e={linear:function(){return function(t){return t}}},n={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Expo:function(){return function(t){return t?Math.pow(2,10*t-10):0}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var o,l=4;t<((o=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((o*3-2)/22-t,2)}},Elastic:function(t,o){t===void 0&&(t=1),o===void 0&&(o=.5);var l=Y(t,1,10),s=Y(o,.1,2);return function(u){return u===0||u===1?u:-l*Math.pow(2,10*(u-1))*Math.sin((u-1-s/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/s)}}},a=["Quad","Cubic","Quart","Quint"];return a.forEach(function(t,o){n[t]=function(){return function(l){return Math.pow(l,o+2)}}}),Object.keys(n).forEach(function(t){var o=n[t];e["easeIn"+t]=o,e["easeOut"+t]=function(l,s){return function(u){return 1-o(l,s)(1-u)}},e["easeInOut"+t]=function(l,s){return function(u){return u<.5?o(l,s)(u*2)/2:1-o(l,s)(u*-2+2)/2}},e["easeOutIn"+t]=function(l,s){return function(u){return u<.5?(1-o(l,s)(1-u*2))/2:(o(l,s)(u*2-1)+1)/2}}}),e})();function Le(e,n){if(h.fnc(e))return e;var a=e.split("(")[0],t=un[a],o=ln(e);switch(a){case"spring":return sn(e,n);case"cubicBezier":return De(Et,o);case"steps":return De(Tt,o);default:return De(t,o)}}function cn(e){try{var n=document.querySelectorAll(e);return n}catch{return}}function ye(e,n){for(var a=e.length,t=arguments.length>=2?arguments[1]:void 0,o=[],l=0;l<a;l++)if(l in e){var s=e[l];n.call(t,s,l,e)&&o.push(s)}return o}function pe(e){return e.reduce(function(n,a){return n.concat(h.arr(a)?pe(a):a)},[])}function Qe(e){return h.arr(e)?e:(h.str(e)&&(e=cn(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function ke(e,n){return e.some(function(a){return a===n})}function Pe(e){var n={};for(var a in e)n[a]=e[a];return n}function Ie(e,n){var a=Pe(e);for(var t in e)a[t]=n.hasOwnProperty(t)?n[t]:e[t];return a}function be(e,n){var a=Pe(e);for(var t in n)a[t]=h.und(e[t])?n[t]:e[t];return a}function _t(e){var n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return n?"rgba("+n[1]+",1)":e}function Lt(e){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=e.replace(n,function(u,r,y,c){return r+r+y+y+c+c}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),o=parseInt(t[1],16),l=parseInt(t[2],16),s=parseInt(t[3],16);return"rgba("+o+","+l+","+s+",1)"}function kt(e){var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(n[1],10)/360,t=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,l=n[4]||1;function s(d,F,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?d+(F-d)*6*g:g<1/2?F:g<2/3?d+(F-d)*(2/3-g)*6:d}var u,r,y;if(t==0)u=r=y=o;else{var c=o<.5?o*(1+t):o+t-o*t,f=2*o-c;u=s(f,c,a+1/3),r=s(f,c,a),y=s(f,c,a-1/3)}return"rgba("+u*255+","+r*255+","+y*255+","+l+")"}function Pt(e){if(h.rgb(e))return _t(e);if(h.hex(e))return Lt(e);if(h.hsl(e))return kt(e)}function G(e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(n)return n[1]}function Ot(e){if(ue(e,"translate")||e==="perspective")return"px";if(ue(e,"rotate")||ue(e,"skew"))return"deg"}function ze(e,n){return h.fnc(e)?e(n.target,n.id,n.total):e}function Z(e,n){return e.getAttribute(n)}function Oe(e,n,a){var t=G(n);if(ke([a,"deg","rad","turn"],t))return n;var o=he.CSS[n+a];if(!h.und(o))return o;var l=100,s=document.createElement(e.tagName),u=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;u.appendChild(s),s.style.position="absolute",s.style.width=l+a;var r=l/s.offsetWidth;u.removeChild(s);var y=r*parseFloat(n);return he.CSS[n+a]=y,y}function fn(e,n,a){if(n in e.style){var t=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[n]||getComputedStyle(e).getPropertyValue(t)||"0";return a?Oe(e,o,a):o}}function Ae(e,n){if(h.dom(e)&&!h.inp(e)&&(!h.nil(Z(e,n))||h.svg(e)&&e[n]))return"attribute";if(h.dom(e)&&ke(zt,n))return"transform";if(h.dom(e)&&n!=="transform"&&fn(e,n))return"css";if(e[n]!=null)return"object"}function dn(e){if(h.dom(e)){for(var n=e.style.transform||"",a=/(\w+)\(([^)]*)\)/g,t=new Map,o;o=a.exec(n);)t.set(o[1],o[2]);return t}}function At(e,n,a,t){var o=ue(n,"scale")?1:0+Ot(n),l=dn(e).get(n)||o;return a&&(a.transforms.list.set(n,l),a.transforms.last=n),t?Oe(e,l,t):l}function Ve(e,n,a,t){switch(Ae(e,n)){case"transform":return At(e,n,t,a);case"css":return fn(e,n,a);case"attribute":return Z(e,n);default:return e[n]||0}}function je(e,n){var a=/^(\*=|\+=|-=)/.exec(e);if(!a)return e;var t=G(e)||0,o=parseFloat(n),l=parseFloat(e.replace(a[0],""));switch(a[0][0]){case"+":return o+l+t;case"-":return o-l+t;case"*":return o*l+t}}function vn(e,n){if(h.col(e))return Pt(e);if(/\s/g.test(e))return e;var a=G(e),t=a?e.substr(0,e.length-a.length):e;return n?t+n:t}function Re(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Vt(e){return Math.PI*2*Z(e,"r")}function jt(e){return Z(e,"width")*2+Z(e,"height")*2}function Rt(e){return Re({x:Z(e,"x1"),y:Z(e,"y1")},{x:Z(e,"x2"),y:Z(e,"y2")})}function gn(e){for(var n=e.points,a=0,t,o=0;o<n.numberOfItems;o++){var l=n.getItem(o);o>0&&(a+=Re(t,l)),t=l}return a}function Ht(e){var n=e.points;return gn(e)+Re(n.getItem(n.numberOfItems-1),n.getItem(0))}function mn(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Vt(e);case"rect":return jt(e);case"line":return Rt(e);case"polyline":return gn(e);case"polygon":return Ht(e)}}function Nt(e){var n=mn(e);return e.setAttribute("stroke-dasharray",n),n}function Wt(e){for(var n=e.parentNode;h.svg(n)&&h.svg(n.parentNode);)n=n.parentNode;return n}function hn(e,n){var a=n||{},t=a.el||Wt(e),o=t.getBoundingClientRect(),l=Z(t,"viewBox"),s=o.width,u=o.height,r=a.viewBox||(l?l.split(" "):[0,0,s,u]);return{el:t,viewBox:r,x:r[0]/1,y:r[1]/1,w:s,h:u,vW:r[2],vH:r[3]}}function Ut(e,n){var a=h.str(e)?cn(e)[0]:e,t=n||100;return function(o){return{property:o,el:a,svg:hn(a),totalLength:mn(a)*(t/100)}}}function qt(e,n,a){function t(c){c===void 0&&(c=0);var f=n+c>=1?n+c:0;return e.el.getPointAtLength(f)}var o=hn(e.el,e.svg),l=t(),s=t(-1),u=t(1),r=a?1:o.w/o.vW,y=a?1:o.h/o.vH;switch(e.property){case"x":return(l.x-o.x)*r;case"y":return(l.y-o.y)*y;case"angle":return Math.atan2(u.y-s.y,u.x-s.x)*180/Math.PI}}function Ke(e,n){var a=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,t=vn(h.pth(e)?e.totalLength:e,n)+"";return{original:t,numbers:t.match(a)?t.match(a).map(Number):[0],strings:h.str(e)||n?t.split(a):[]}}function He(e){var n=e?pe(h.arr(e)?e.map(Qe):Qe(e)):[];return ye(n,function(a,t,o){return o.indexOf(a)===t})}function yn(e){var n=He(e);return n.map(function(a,t){return{target:a,id:t,total:n.length,transforms:{list:dn(a)}}})}function Yt(e,n){var a=Pe(n);if(/^spring/.test(a.easing)&&(a.duration=sn(a.easing)),h.arr(e)){var t=e.length,o=t===2&&!h.obj(e[0]);o?e={value:e}:h.fnc(n.duration)||(a.duration=n.duration/t)}var l=h.arr(e)?e:[e];return l.map(function(s,u){var r=h.obj(s)&&!h.pth(s)?s:{value:s};return h.und(r.delay)&&(r.delay=u?0:n.delay),h.und(r.endDelay)&&(r.endDelay=u===l.length-1?n.endDelay:0),r}).map(function(s){return be(s,a)})}function Zt(e){for(var n=ye(pe(e.map(function(l){return Object.keys(l)})),function(l){return h.key(l)}).reduce(function(l,s){return l.indexOf(s)<0&&l.push(s),l},[]),a={},t=function(l){var s=n[l];a[s]=e.map(function(u){var r={};for(var y in u)h.key(y)?y==s&&(r.value=u[y]):r[y]=u[y];return r})},o=0;o<n.length;o++)t(o);return a}function Qt(e,n){var a=[],t=n.keyframes;t&&(n=be(Zt(t),n));for(var o in n)h.key(o)&&a.push({name:o,tweens:Yt(n[o],e)});return a}function Kt(e,n){var a={};for(var t in e){var o=ze(e[t],n);h.arr(o)&&(o=o.map(function(l){return ze(l,n)}),o.length===1&&(o=o[0])),a[t]=o}return a.duration=parseFloat(a.duration),a.delay=parseFloat(a.delay),a}function Jt(e,n){var a;return e.tweens.map(function(t){var o=Kt(t,n),l=o.value,s=h.arr(l)?l[1]:l,u=G(s),r=Ve(n.target,e.name,u,n),y=a?a.to.original:r,c=h.arr(l)?l[0]:y,f=G(c)||G(r),d=u||f;return h.und(s)&&(s=y),o.from=Ke(c,d),o.to=Ke(je(s,c),d),o.start=a?a.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=Le(o.easing,o.duration),o.isPath=h.pth(l),o.isPathTargetInsideSVG=o.isPath&&h.svg(n.target),o.isColor=h.col(o.from.original),o.isColor&&(o.round=1),a=o,o})}var pn={css:function(e,n,a){return e.style[n]=a},attribute:function(e,n,a){return e.setAttribute(n,a)},object:function(e,n,a){return e[n]=a},transform:function(e,n,a,t,o){if(t.list.set(n,a),n===t.last||o){var l="";t.list.forEach(function(s,u){l+=u+"("+s+") "}),e.style.transform=l}}};function bn(e,n){var a=yn(e);a.forEach(function(t){for(var o in n){var l=ze(n[o],t),s=t.target,u=G(l),r=Ve(s,o,u,t),y=u||G(r),c=je(vn(l,y),r),f=Ae(s,o);pn[f](s,o,c,t.transforms,!0)}})}function Gt(e,n){var a=Ae(e.target,n.name);if(a){var t=Jt(n,e),o=t[t.length-1];return{type:a,property:n.name,animatable:e,tweens:t,duration:o.end,delay:t[0].delay,endDelay:o.endDelay}}}function Xt(e,n){return ye(pe(e.map(function(a){return n.map(function(t){return Gt(a,t)})})),function(a){return!h.und(a)})}function wn(e,n){var a=e.length,t=function(l){return l.timelineOffset?l.timelineOffset:0},o={};return o.duration=a?Math.max.apply(Math,e.map(function(l){return t(l)+l.duration})):n.duration,o.delay=a?Math.min.apply(Math,e.map(function(l){return t(l)+l.delay})):n.delay,o.endDelay=a?o.duration-Math.max.apply(Math,e.map(function(l){return t(l)+l.duration-l.endDelay})):n.endDelay,o}var Je=0;function $t(e){var n=Ie(on,e),a=Ie(_e,e),t=Qt(a,e),o=yn(e.targets),l=Xt(o,t),s=wn(l,a),u=Je;return Je++,be(n,{id:u,children:[],animatables:o,animations:l,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}var W=[],Fn=(function(){var e;function n(){!e&&(!Ge()||!z.suspendWhenDocumentHidden)&&W.length>0&&(e=requestAnimationFrame(a))}function a(o){for(var l=W.length,s=0;s<l;){var u=W[s];u.paused?(W.splice(s,1),l--):(u.tick(o),s++)}e=s>0?requestAnimationFrame(a):void 0}function t(){z.suspendWhenDocumentHidden&&(Ge()?e=cancelAnimationFrame(e):(W.forEach(function(o){return o._onDocumentVisibility()}),Fn()))}return typeof document<"u"&&document.addEventListener("visibilitychange",t),n})();function Ge(){return!!document&&document.hidden}function z(e){e===void 0&&(e={});var n=0,a=0,t=0,o,l=0,s=null;function u(m){var b=window.Promise&&new Promise(function(I){return s=I});return m.finished=b,b}var r=$t(e);u(r);function y(){var m=r.direction;m!=="alternate"&&(r.direction=m!=="normal"?"normal":"reverse"),r.reversed=!r.reversed,o.forEach(function(b){return b.reversed=r.reversed})}function c(m){return r.reversed?r.duration-m:m}function f(){n=0,a=c(r.currentTime)*(1/z.speed)}function d(m,b){b&&b.seek(m-b.timelineOffset)}function F(m){if(r.reversePlayback)for(var I=l;I--;)d(m,o[I]);else for(var b=0;b<l;b++)d(m,o[b])}function g(m){for(var b=0,I=r.animations,B=I.length;b<B;){var M=I[b],T=M.animatable,E=M.tweens,_=E.length-1,x=E[_];_&&(x=ye(E,function(Fe){return m<Fe.end})[0]||x);for(var O=Y(m-x.start-x.delay,0,x.duration)/x.duration,U=isNaN(O)?1:x.easing(O),L=x.to.strings,ie=x.round,oe=[],we=x.to.numbers.length,Q=void 0,X=0;X<we;X++){var ne=void 0,ce=x.to.numbers[X],fe=x.from.numbers[X]||0;x.isPath?ne=qt(x.value,U*ce,x.isPathTargetInsideSVG):ne=fe+U*(ce-fe),ie&&(x.isColor&&X>2||(ne=Math.round(ne*ie)/ie)),oe.push(ne)}var de=L.length;if(!de)Q=oe[0];else{Q=L[0];for(var te=0;te<de;te++){L[te];var ve=L[te+1],le=oe[te];isNaN(le)||(ve?Q+=le+ve:Q+=le+" ")}}pn[M.type](T.target,M.property,Q,T.transforms),M.currentValue=Q,b++}}function p(m){r[m]&&!r.passThrough&&r[m](r)}function D(){r.remaining&&r.remaining!==!0&&r.remaining--}function C(m){var b=r.duration,I=r.delay,B=b-r.endDelay,M=c(m);r.progress=Y(M/b*100,0,100),r.reversePlayback=M<r.currentTime,o&&F(M),!r.began&&r.currentTime>0&&(r.began=!0,p("begin")),!r.loopBegan&&r.currentTime>0&&(r.loopBegan=!0,p("loopBegin")),M<=I&&r.currentTime!==0&&g(0),(M>=B&&r.currentTime!==b||!b)&&g(b),M>I&&M<B?(r.changeBegan||(r.changeBegan=!0,r.changeCompleted=!1,p("changeBegin")),p("change"),g(M)):r.changeBegan&&(r.changeCompleted=!0,r.changeBegan=!1,p("changeComplete")),r.currentTime=Y(M,0,b),r.began&&p("update"),m>=b&&(a=0,D(),r.remaining?(n=t,p("loopComplete"),r.loopBegan=!1,r.direction==="alternate"&&y()):(r.paused=!0,r.completed||(r.completed=!0,p("loopComplete"),p("complete"),!r.passThrough&&"Promise"in window&&(s(),u(r)))))}return r.reset=function(){var m=r.direction;r.passThrough=!1,r.currentTime=0,r.progress=0,r.paused=!0,r.began=!1,r.loopBegan=!1,r.changeBegan=!1,r.completed=!1,r.changeCompleted=!1,r.reversePlayback=!1,r.reversed=m==="reverse",r.remaining=r.loop,o=r.children,l=o.length;for(var b=l;b--;)r.children[b].reset();(r.reversed&&r.loop!==!0||m==="alternate"&&r.loop===1)&&r.remaining++,g(r.reversed?r.duration:0)},r._onDocumentVisibility=f,r.set=function(m,b){return bn(m,b),r},r.tick=function(m){t=m,n||(n=t),C((t+(a-n))*z.speed)},r.seek=function(m){C(c(m))},r.pause=function(){r.paused=!0,f()},r.play=function(){r.paused&&(r.completed&&r.reset(),r.paused=!1,W.push(r),f(),Fn())},r.reverse=function(){y(),r.completed=!r.reversed,f()},r.restart=function(){r.reset(),r.play()},r.remove=function(m){var b=He(m);Mn(b,r)},r.reset(),r.autoplay&&r.play(),r}function Xe(e,n){for(var a=n.length;a--;)ke(e,n[a].animatable.target)&&n.splice(a,1)}function Mn(e,n){var a=n.animations,t=n.children;Xe(e,a);for(var o=t.length;o--;){var l=t[o],s=l.animations;Xe(e,s),!s.length&&!l.children.length&&t.splice(o,1)}!a.length&&!t.length&&n.pause()}function ea(e){for(var n=He(e),a=W.length;a--;){var t=W[a];Mn(n,t)}}function na(e,n){n===void 0&&(n={});var a=n.direction||"normal",t=n.easing?Le(n.easing):null,o=n.grid,l=n.axis,s=n.from||0,u=s==="first",r=s==="center",y=s==="last",c=h.arr(e),f=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,F=G(c?e[1]:e)||0,g=n.start||0+(c?f:0),p=[],D=0;return function(C,m,b){if(u&&(s=0),r&&(s=(b-1)/2),y&&(s=b-1),!p.length){for(var I=0;I<b;I++){if(!o)p.push(Math.abs(s-I));else{var B=r?(o[0]-1)/2:s%o[0],M=r?(o[1]-1)/2:Math.floor(s/o[0]),T=I%o[0],E=Math.floor(I/o[0]),_=B-T,x=M-E,O=Math.sqrt(_*_+x*x);l==="x"&&(O=-_),l==="y"&&(O=-x),p.push(O)}D=Math.max.apply(Math,p)}t&&(p=p.map(function(L){return t(L/D)*D})),a==="reverse"&&(p=p.map(function(L){return l?L<0?L*-1:-L:Math.abs(D-L)}))}var U=c?(d-f)/D:f;return g+U*(Math.round(p[m]*100)/100)+F}}function ta(e){e===void 0&&(e={});var n=z(e);return n.duration=0,n.add=function(a,t){var o=W.indexOf(n),l=n.children;o>-1&&W.splice(o,1);function s(d){d.passThrough=!0}for(var u=0;u<l.length;u++)s(l[u]);var r=be(a,Ie(_e,e));r.targets=r.targets||e.targets;var y=n.duration;r.autoplay=!1,r.direction=n.direction,r.timelineOffset=h.und(t)?y:je(t,y),s(n),n.seek(r.timelineOffset);var c=z(r);s(c),l.push(c);var f=wn(l,e);return n.delay=f.delay,n.endDelay=f.endDelay,n.duration=f.duration,n.seek(0),n.reset(),n.autoplay&&n.play(),n},n}z.version="3.2.1";z.speed=1;z.suspendWhenDocumentHidden=!0;z.running=W;z.remove=ea;z.get=Ve;z.set=bn;z.convertPx=Oe;z.path=Ut;z.setDashoffset=Nt;z.stagger=na;z.timeline=ta;z.easing=Le;z.penner=un;z.random=function(e,n){return Math.floor(Math.random()*(n-e+1))+e};function aa(e,n=5){let a;return function(...t){clearTimeout(a),a=setTimeout(()=>e.apply(this,t),n)}}function ra({dropzoneRef:e,circleRef:n,isDisabled:a,isReadonly:t,dropEnabled:o,circleOpacity:l,animationSpeed:s=.5,isEditing:u}){const r=j(!1),y=j(0),c=j(0),f=j(0),d=j(0),F=j(!1);let g=null,p=0;const D=()=>{if(F.value)return;F.value=!0;const B=.12*s.value,M=.82+(1-s.value)*.1;let T=0,E=0,_=f.value,x=d.value;const O=()=>{if(!r.value){F.value=!1;return}_=_+(f.value-_)*.3,x=x+(d.value-x)*.3;const U=_-y.value,L=x-c.value;T=T*M+U*B,E=E*M+L*B,y.value+=T,c.value+=E,g=requestAnimationFrame(O)};g=requestAnimationFrame(O)},C=B=>{if(a.value||t.value||!o.value||u.value)return;const M=Date.now();if(!(M-p<16)){if(p=M,B.stopPropagation(),e.value){const T=e.value.getBoundingClientRect();f.value=B.clientX-T.left,d.value=B.clientY-T.top}if(!r.value&&(r.value=!0,e.value)){const T=e.value.getBoundingClientRect(),E=120,_=f.value,x=T.width-f.value,O=d.value,U=T.height-d.value,L=Math.min(_,x,O,U);L===_?(y.value=-E,c.value=d.value):L===x?(y.value=T.width+E,c.value=d.value):L===O?(y.value=f.value,c.value=-E):(y.value=f.value,c.value=T.height+E),n.value&&z({targets:n.value,opacity:[0,l.value],scale:[.4,1],duration:300/s.value,easing:"easeOutCubic"}),D()}}},m=B=>{e.value&&e.value.contains(B.relatedTarget)||(n.value&&r.value?z({targets:n.value,opacity:[l.value,0],scale:[1,.4],duration:200/s.value,easing:"easeOutQuad",complete:()=>{r.value=!1,F.value=!1}}):(r.value=!1,F.value=!1),g&&(cancelAnimationFrame(g),g=null))},b=B=>{if(a.value||t.value||!o.value||u.value)return!1;if(e.value){const M=e.value.getBoundingClientRect();y.value=B.clientX-M.left,c.value=B.clientY-M.top,f.value=y.value,d.value=c.value}return n.value?(F.value=!1,g&&(cancelAnimationFrame(g),g=null),z({targets:n.value,scale:[1,35],opacity:[l.value,l.value],duration:700,easing:"easeOutCubic",complete:function(){z({targets:n.value,opacity:[l.value,0],duration:300,easing:"linear",complete:function(){r.value=!1}})}})):r.value=!1,!0},I=aa(B=>{if(r.value&&e.value){const M=e.value.getBoundingClientRect();f.value=B.clientX-M.left,d.value=B.clientY-M.top}},Math.max(5,16/s.value));return ft(()=>{g&&(cancelAnimationFrame(g),g=null)}),{isDragging:r,mouseX:y,mouseY:c,targetX:f,targetY:d,isAnimating:F,handleDragOver:C,handleDragLeave:m,handleDrop:b,handleMouseMove:I}}const Ne={components:{FileList:xt},props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","add-state","remove-state"],setup(e,{emit:n}){const a=v(()=>!1),{getIcon:t}=wwLib.useIcons(),o=j(null),l=j(null),s=j(null),u=j(null),r=j(!1),y=v(()=>{var i;return((i=e.content)==null?void 0:i.extensionsMessage)||null}),c=v(()=>{var i;return((i=e.content)==null?void 0:i.maxFileMessage)||null}),f=v(()=>{var i;return((i=e.content)==null?void 0:i.labelMessage)||null}),d=v(()=>{var i;return((i=e.content)==null?void 0:i.type)||"single"}),F=v(()=>{var i;return((i=e.content)==null?void 0:i.reorder)||!1}),g=v(()=>{var i;return((i=e.content)==null?void 0:i.drop)!==!1}),p=v(()=>{var i;return((i=e.content)==null?void 0:i.maxFileSize)||10}),D=v(()=>{var i;return((i=e.content)==null?void 0:i.minFileSize)||0}),C=v(()=>{var i;return((i=e.content)==null?void 0:i.maxTotalFileSize)||50}),m=v(()=>{var i;return((i=e.content)==null?void 0:i.maxFiles)||10}),b=v(()=>{var i;return((i=e.content)==null?void 0:i.required)||!1}),I=v(()=>{var i;return((i=e.content)==null?void 0:i.extensions)||"any"}),B=v(()=>{var i;return((i=e.content)==null?void 0:i.customExtensions)||""}),M=v(()=>{var i;return((i=e.content)==null?void 0:i.exposeBase64)||!1}),T=v(()=>{var i;return((i=e.content)==null?void 0:i.exposeBinary)||!1}),E=v(()=>{var i;return((i=e.content)==null?void 0:i.showUploadIcon)!==!1}),_=v(()=>{var i;return((i=e.content)==null?void 0:i.uploadIcon)||"upload"}),x=v(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconColor)||"#666666"}),O=v(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconPosition)||"top"}),U=v(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconSize)||"24px"}),L=v(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconMargin)||"8px"}),ie=v(()=>{var i;return((i=e.content)==null?void 0:i.enableCircleAnimation)!==!1}),oe=v(()=>{var i;return((i=e.content)==null?void 0:i.circleSize)||"80px"}),we=v(()=>{var i;return((i=e.content)==null?void 0:i.circleColor)||Me.value}),Q=v(()=>{var i;return((i=e.content)==null?void 0:i.circleOpacity)!==void 0?e.content.circleOpacity:.5}),X=v(()=>{var i;return((i=e.content)==null?void 0:i.animationSpeed)!==void 0?e.content.animationSpeed:.5}),ne=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderWidth)||"2px"}),ce=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderStyle)||"dashed"}),fe=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderColor)||"#CCCCCC"}),de=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderRadius)||"8px"}),te=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzonePadding)||"20px"}),ve=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneMinHeight)||"120px"}),le=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackground)||"rgba(0, 0, 0, 0)"}),Fe=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackgroundHover)||"rgba(0, 0, 0, 0.01)"}),xn=v(()=>{var i;return((i=e.content)==null?void 0:i.labelFontSize)||"16px"}),Sn=v(()=>{var i;return((i=e.content)==null?void 0:i.labelFontFamily)||"inherit"}),Bn=v(()=>{var i;return((i=e.content)==null?void 0:i.labelFontWeight)||"normal"}),Dn=v(()=>{var i;return((i=e.content)==null?void 0:i.labelColor)||"#333333"}),Cn=v(()=>{var i;return((i=e.content)==null?void 0:i.fileDetailsFontSize)||"12px"}),In=v(()=>{var i;return((i=e.content)==null?void 0:i.fileDetailsColor)||"#888888"}),Me=v(()=>{var i;return((i=e.content)==null?void 0:i.progressBarColor)||"#EEEEEE"}),zn=v(()=>{var w;return(((w=e.content)==null?void 0:w.labelMargin)||"0 0 4px 0").split(" ")[2]||"4px"}),Tn=v(()=>{const i=Me.value;if(!i)return"rgba(85, 85, 85, 0.05)";try{const w=parseInt(i.slice(1,3),16)||85,S=parseInt(i.slice(3,5),16)||85,k=parseInt(i.slice(5,7),16)||85;return`rgba(${w}, ${S}, ${k}, 0.05)`}catch{return"rgba(85, 85, 85, 0.05)"}}),En=v(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackgroundDragging)||"rgba(0, 0, 0, 0.05)"}),_n=v(()=>{var i,w,S,k,P;return{fontFamily:((i=e.content)==null?void 0:i.extensionsMessageFontFamily)||"inherit",fontSize:((w=e.content)==null?void 0:w.extensionsMessageFontSize)||"12px",fontWeight:((S=e.content)==null?void 0:S.extensionsMessageFontWeight)||"normal",color:((k=e.content)==null?void 0:k.extensionsMessageColor)||"#888888",margin:((P=e.content)==null?void 0:P.extensionsMessageMargin)||"0 0 4px 0"}}),Ln=v(()=>{var i,w,S,k,P;return{fontFamily:((i=e.content)==null?void 0:i.maxFileMessageFontFamily)||"inherit",fontSize:((w=e.content)==null?void 0:w.maxFileMessageFontSize)||"12px",fontWeight:((S=e.content)==null?void 0:S.maxFileMessageFontWeight)||"normal",color:((k=e.content)==null?void 0:k.maxFileMessageColor)||"#888888",margin:((P=e.content)==null?void 0:P.maxFileMessageMargin)||"0 0 4px 0"}}),kn=v(()=>{var i,w,S,k,P;return{fontFamily:((i=e.content)==null?void 0:i.labelFontFamily)||"inherit",fontSize:((w=e.content)==null?void 0:w.labelFontSize)||"16px",fontWeight:((S=e.content)==null?void 0:S.labelFontWeight)||"normal",color:((k=e.content)==null?void 0:k.labelColor)||"#333333",margin:((P=e.content)==null?void 0:P.labelMargin)||"0 0 4px 0"}}),$=v(()=>e.wwElementState.props.disabled||!1),ee=v(()=>{var i;return e.wwElementState.props.readonly===void 0?((i=e.content)==null?void 0:i.readonly)||!1:e.wwElementState.props.readonly}),{value:H,setValue:ae}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",defaultValue:[],type:"file",componentType:"element"}),{value:ge,setValue:Pn}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"status",defaultValue:{},type:"any"}),On=nn("_wwForm:useForm",()=>{}),An=v(()=>e.content.fieldName),Vn=v(()=>e.content.validation),jn=v(()=>e.content.customValidation);On(H,{fieldName:An,validation:Vn,customValidation:jn,required:b},{elementState:e.wwElementState,emit:n,sidepanelFormPath:"form",setValue:ae});const se=v(()=>Array.isArray(H.value)?H.value:[]),Rn=v(()=>se.value.length>0);me([ge,se],([i,w])=>{if(i&&typeof i=="object"){const S=w.map(P=>P.name),k=Object.fromEntries(Object.entries(i).filter(([P])=>S.includes(P)));Object.keys(k).length!==Object.keys(i).length&&Pn(k)}});const xe=v(()=>{switch(I.value){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"pdf":return".pdf";case"csv":return".csv";case"excel":return".xls,.xlsx,.xlsm,.xlsb";case"word":return".doc,.docx,.docm";case"json":return".json";case"custom":return B.value;default:return""}});me(()=>_.value,async i=>{if(i&&E.value)try{u.value=await t(i)}catch{u.value=null}else u.value=null},{immediate:!0});const Hn=v(()=>u.value),Nn=j({fileUpload:{value:v(()=>se.value.map(i=>{const w={};for(const S in i)Object.prototype.hasOwnProperty.call(i,S)&&(w[S]=i[S]);return w.name=i.name,w.size=i.size,w.type=i.type,w.lastModified=i.lastModified,w.mimeType=i.mimeType,w.id=i.id,i.base64&&(w.base64=i.base64),i.binary&&(w.binary=i.binary),w})),status:ge}});dt("_wwFileUpload",{files:se,status:ge,acceptedTypes:xe,isDisabled:$,isReadonly:ee,isSingleMode:v(()=>d.value==="single"),content:v(()=>e.content||{})});const{isDragging:Wn,mouseX:Un,mouseY:qn,targetX:Yn,targetY:Zn,isAnimating:Qn,handleDragOver:Kn,handleDragLeave:Jn,handleDrop:Gn,handleMouseMove:Xn}=ra({dropzoneRef:l,circleRef:s,isDisabled:$,isReadonly:ee,dropEnabled:g,circleOpacity:Q,animationSpeed:X,isEditing:a}),$n=()=>{!$.value&&!ee.value&&!a.value&&o.value.click()},et=async i=>{if(!Gn(i)||$.value||ee.value||!g.value)return;const S=i.dataTransfer.files;S.length&&setTimeout(async()=>{await We(S)},1050)},nt=async i=>{const w=i.target.files;w.length&&(await We(w),i.target.value="")},We=async i=>{r.value=!0;const w=Array.from(i);d.value==="single"&&(w.length>1&&n("trigger-event",{name:"error",event:{code:"SINGLE_MODE_MULTIPLE_FILES",data:{message:"Multiple files provided in single file mode",count:w.length,acceptedCount:1}}}),w.splice(1),ae([]));let S=1/0;if(d.value==="multi"&&m.value>0)if(S=m.value-H.value.length,S<=0){n("trigger-event",{name:"error",event:{code:"MAX_FILES_REACHED",data:{message:`Maximum number of files (${m.value}) reached`,maxFiles:m.value,currentCount:H.value.length}}}),wwLib.wwNotification.open({text:{en:`Maximum number of files (${m.value}) reached`},color:"warning"}),r.value=!1;return}else w.length>S&&n("trigger-event",{name:"error",event:{code:"TOO_MANY_FILES",data:{message:`Only ${S} more files can be added`,providedCount:w.length,availableSlots:S,maxFiles:m.value,currentCount:H.value.length}}});const k=w.slice(0,S),P=[],it=d.value==="multi"&&Array.isArray(H.value)?H.value.reduce((A,N)=>A+(N.size||0),0):0;for(const A of k){const N=St(A,{maxFileSize:p.value,minFileSize:D.value,maxTotalFileSize:d.value==="multi"?C.value:void 0,currentTotalSize:d.value==="multi"?it:0,acceptedTypes:xe.value});N.valid?(A.id=`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,A.mimeType=A.type,M.value&&(A.base64=await Ct(A)),T.value&&(A.binary=await It(A)),P.push(A)):(console.warn(`File validation failed: ${N.reason}`),n("trigger-event",{name:"error",event:{code:"VALIDATION_ERROR",data:{message:N.reason,fileName:A.name,fileSize:A.size,fileType:A.type,constraint:N.constraint}}}))}if(P.length>0)if(d.value==="single")ae(P),n("trigger-event",{name:"change",event:{value:P}}),r.value=!1;else{let N=[...[...H.value]];const qe=Se=>{N=[...N,P[Se]],ae(N),Se<P.length-1?setTimeout(()=>qe(Se+1),150):(n("trigger-event",{name:"change",event:{value:N}}),r.value=!1)};setTimeout(()=>qe(0),50);return}r.value=!1},tt=i=>{if($.value||ee.value)return;const w=[...H.value.filter((S,k)=>k!==i)];ae(w),n("trigger-event",{name:"change",event:{value:w}})},at=(i,w)=>{if($.value||ee.value||!F.value)return;const S=[...H.value],[k]=S.splice(i,1);S.splice(w,0,k),ae(S),n("trigger-event",{name:"change",event:{value:S}})},Ue=()=>{ae([])},rt=()=>{switch(I.value){case"image":return"Images";case"video":return"Videos";case"audio":return"Audio files";case"pdf":return"PDF files";case"csv":return"CSV files";case"excel":return"Excel files";case"word":return"Word documents";case"json":return"JSON files";case"custom":return B.value;default:return"All files"}};return wwLib.wwElement.useRegisterElementLocalContext("fileUpload",Nn.value.fileUpload,{clearFiles:{description:"Clear all files",method:Ue,editor:{label:"Clear Files",group:"File Upload",icon:"trash"}}}),me(ee,i=>{n(i?"add-state":"remove-state","readonly")},{immediate:!0}),me($,i=>{n(i?"add-state":"remove-state","disabled")},{immediate:!0}),{status:ge,fileInput:o,isDragging:Wn,fileList:se,hasFiles:Rn,isDisabled:$,isReadonly:ee,acceptedFileTypes:xe,extensionsMessage:y,maxFileMessage:c,openFileExplorer:$n,handleDragOver:Kn,handleDragLeave:Jn,handleDrop:et,handleFileSelection:nt,removeFile:tt,reorderFiles:at,getAllowedTypesLabel:rt,iconHTML:Hn,uploadIconPosition:O,handleMouseMove:Xn,extensionsMessageStyle:_n,maxFileMessageStyle:Ln,labelMessage:f,labelMessageStyle:kn,type:d,reorder:F,drop:g,maxFileSize:p,minFileSize:D,maxFiles:m,required:b,extensions:I,customExtensions:B,showUploadIcon:E,uploadIcon:_,uploadIconColor:x,uploadIconSize:U,uploadIconMargin:L,enableCircleAnimation:ie,circleSize:oe,circleColor:we,circleOpacity:Q,animationSpeed:X,safeDropzoneBorderWidth:ne,safeDropzoneBorderStyle:ce,safeDropzoneBorderColor:fe,safeDropzoneBorderRadius:de,safeDropzonePadding:te,safeDropzoneMinHeight:ve,safeDropzoneBackground:le,safeDropzoneBackgroundHover:Fe,safeDropzoneBackgroundDragging:En,safeLabelFontSize:xn,safeLabelFontFamily:Sn,safeLabelFontWeight:Bn,safeLabelColor:Dn,safeFileDetailsFontSize:Cn,safeFileDetailsColor:In,safeProgressBarColor:Me,safeLabelMarginBottom:zn,safeProgressBarBackground:Tn,dropzoneEl:l,circleEl:s,mouseX:Un,mouseY:qn,targetX:Yn,targetY:Zn,isAnimating:Qn,isProcessing:r,isEditing:a,clearFiles:Ue}}},$e=()=>{tn(e=>({"45ca3c80":e.safeDropzoneBackground,"3d3787e8":e.safeDropzoneBorderWidth,"3d0477d3":e.safeDropzoneBorderStyle,"3c208985":e.safeDropzoneBorderColor,"60c056b0":e.safeDropzoneBorderRadius,76443402:e.safeDropzonePadding,68348487:e.safeDropzoneMinHeight,"00bca43f":e.isEditing?"unset":"pointer","09d26c9c":e.safeDropzoneBackgroundHover,ea709ab6:e.uploadIconSize,"65609d82":e.uploadIconColor,"2617815c":e.uploadIconMargin,"4c840422":e.safeDropzoneBackgroundDragging}))},en=Ne.setup;Ne.setup=en?(e,n)=>($e(),en(e,n)):$e;const ia=["innerHTML"],oa={class:"ww-file-upload__text"},la=["multiple","accept","required","disabled","aria-label"];function sa(e,n,a,t,o,l){const s=an("FileList");return V(),R("div",{class:Ce(["ww-file-upload",{"ww-file-upload--dragging":t.isDragging&&!t.isDisabled&&!t.isReadonly,"ww-file-upload--disabled":t.isDisabled,"ww-file-upload--readonly":t.isReadonly,"ww-file-upload--has-files":t.hasFiles}]),onDragover:n[3]||(n[3]=Be((...u)=>t.handleDragOver&&t.handleDragOver(...u),["prevent"])),onDragleave:n[4]||(n[4]=Be((...u)=>t.handleDragLeave&&t.handleDragLeave(...u),["prevent"])),onDrop:n[5]||(n[5]=Be((...u)=>t.handleDrop&&t.handleDrop(...u),["prevent"])),role:"region","aria-label":"File upload area"},[q("div",{ref:"dropzoneEl",class:"ww-file-upload__dropzone",onClick:n[0]||(n[0]=(...u)=>t.openFileExplorer&&t.openFileExplorer(...u)),onMousemove:n[1]||(n[1]=(...u)=>t.handleMouseMove&&t.handleMouseMove(...u))},[t.isDragging&&!t.isDisabled&&!t.isReadonly&&t.enableCircleAnimation?(V(),R("div",{key:0,ref:"circleEl",class:"ww-file-upload__hover-circle",style:J({left:`${t.mouseX}px`,top:`${t.mouseY}px`,backgroundColor:t.circleColor,opacity:t.circleOpacity,width:t.circleSize,height:t.circleSize})},null,4)):K("",!0),q("div",{class:Ce(["ww-file-upload__content",[`ww-file-upload__content--${t.uploadIconPosition}`]])},[t.showUploadIcon?(V(),R("div",{key:0,class:"ww-file-upload__icon",innerHTML:t.iconHTML},null,8,ia)):K("",!0),q("div",oa,[q("div",{class:"ww-file-upload__label",style:J(t.labelMessageStyle)},re(t.labelMessage),5),t.extensionsMessage?(V(),R("div",{key:0,class:"ww-file-upload__info ww-file-upload__extensions-message",style:J(t.extensionsMessageStyle)},re(t.extensionsMessage),5)):K("",!0),t.maxFileMessage?(V(),R("div",{key:1,class:"ww-file-upload__info ww-file-upload__max-file-message",style:J(t.maxFileMessageStyle)},re(t.maxFileMessage),5)):K("",!0)])],2)],544),t.hasFiles?(V(),rn(s,{key:0,files:t.fileList,status:t.status,type:t.type,"can-reorder":t.reorder,"is-readonly":t.isReadonly,"is-disabled":t.isDisabled,onRemove:t.removeFile,onReorder:t.reorderFiles},null,8,["files","status","type","can-reorder","is-readonly","is-disabled","onRemove","onReorder"])):K("",!0),q("input",{ref:"fileInput",type:"file",class:"ww-file-upload__input",multiple:t.type==="multi",accept:t.acceptedFileTypes,required:t.required&&!t.hasFiles,disabled:t.isDisabled||t.isReadonly,"aria-label":t.labelMessage,onChange:n[2]||(n[2]=(...u)=>t.handleFileSelection&&t.handleFileSelection(...u))},null,40,la)],34)}const va=Te(Ne,[["render",sa],["__scopeId","data-v-6691aea9"]]);export{va as e};

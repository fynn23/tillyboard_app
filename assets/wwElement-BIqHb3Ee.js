import{_ as c,q as d,c as m,o as p,u as s,a as f,m as o,n as w}from"./main-BEqSrhKB.js";const h={props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","add-state","remove-state"],setup(e){const{value:l,setValue:t}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",defaultValue:null,componentType:"element",type:"file",readonly:!0,resettable:!0});return wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"progress",defaultValue:0,componentType:"element",type:"number",readonly:!0}),{variableValue:l,setValue:t}},data(){return{localValue:null,fileName:null}},computed:{isEditing(){return!1},value(){return this.variableValue},accept(){switch(this.content.accept){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"pdf":return".pdf";case"csv":return".csv";case"excel":return".xls,.xlsb,.xlsm,.xlsx";case"word":return".doc,.docm,.docx";case"json":return".json";case"custom":return this.content.acceptCustom;case"any":default:return""}},isReadonly(){return this.wwElementState.props.readonly===void 0?this.content.readonly:this.wwElementState.props.readonly}},watch:{variableValue(e){e===null&&(this.localValue=null,this.fileName=null)},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}},methods:{handleManualInput(e){const l=e.target.value;if(l===this.localValue)return;const t=this.content.multiple,n=this.$refs.inputFile.files;!n||!n.length||(this.localValue=l,this.fileName=n.length>1?`${n.length} files`:n[0].name,this.setValue(t?n:n[0]),this.$emit("trigger-event",{name:"change",event:{domEvent:e,value:t?n:n[0]}}))},openFileExplorer(){this.isEditing||this.isReadonly||this.$refs.inputFile.click()}}},v=["value","name","required","readonly","multiple","accept"];function y(e,l,t,n,r,a){const u=d("wwElement",!0);return p(),m("div",{class:w(["ww-input-file",{editing:a.isEditing}]),onClick:l[1]||(l[1]=(...i)=>a.openFileExplorer&&a.openFileExplorer(...i))},[s(u,o({class:"ww-input-file__button"},t.content.button),null,16),s(u,o({class:"ww-input-file__text"},t.content.text,{"ww-props":{text:r.fileName||"No file chosen"}}),null,16,["ww-props"]),f("input",{ref:"inputFile",value:r.localValue,class:"ww-input-file__input",type:"file",name:t.wwElementState.name,required:t.content.required,readonly:a.isReadonly,multiple:t.content.multiple,accept:a.accept,onInput:l[0]||(l[0]=i=>a.handleManualInput(i))},null,40,v)],2)}const b=c(h,[["render",y],["__scopeId","data-v-86496ef8"]]);export{b as e};

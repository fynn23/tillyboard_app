import{_ as ue,c as v,o as d,d as a,f as p,a as H,P as U,b as j,n as I,t as k,w as C,h as L,i as m,j as x,H as ve,V as de,p as A}from"./main-BYESN2Bt.js";import{s as ce}from"./wwSection-CE2_hyHU.js";const me={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["trigger-event"],setup(i,{emit:n}){var D,S,N;const r=L(()=>!1),e=m(null),c=m(!1),f=m(((D=i.content)==null?void 0:D.startMuted)||!1),l=m((S=i.content)!=null&&S.startMuted?0:((N=i.content)==null?void 0:N.volume)||1),g=m(0),u=m(0),M=m(!1),h=m(!0),V=m(null),T=m(0),{value:De,setValue:F}=wwLib.wwVariable.useComponentVariable({uid:i.uid,name:"currentTime",type:"number",defaultValue:0}),{value:Se,setValue:B}=wwLib.wwVariable.useComponentVariable({uid:i.uid,name:"duration",type:"number",defaultValue:0}),{value:Ne,setValue:z}=wwLib.wwVariable.useComponentVariable({uid:i.uid,name:"isPlaying",type:"boolean",defaultValue:!1}),{value:Re,setValue:X}=wwLib.wwVariable.useComponentVariable({uid:i.uid,name:"framerate",type:"number",defaultValue:0}),O=L(()=>{var t;return((t=i.content)==null?void 0:t.videoSrc)||""}),_=L(()=>u.value<=0?0:g.value/u.value*100);x(()=>{var t;return(t=i.content)==null?void 0:t.videoSrc},t=>{var o;t&&e.value&&(g.value=0,u.value=0,F(0),B(0),e.value.load(),(o=i.content)!=null&&o.autoplay&&!r.value&&P())}),x(()=>{var t;return(t=i.content)==null?void 0:t.volume},t=>{t!==void 0&&e.value&&!f.value&&(e.value.volume=t,l.value=t)}),x(()=>{var t;return(t=i.content)==null?void 0:t.startMuted},t=>{t!==void 0&&e.value&&(e.value.muted=t,f.value=t)});const G=t=>{if(isNaN(t)||t===1/0)return"00:00";const o=Math.floor(t/60),s=Math.floor(t%60);return`${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},J=()=>{e.value&&(g.value=e.value.currentTime,F(g.value))},K=()=>{if(e.value){if(u.value=e.value.duration,B(u.value),e.value)try{e.value.videoTracks&&e.value.videoTracks.length>0?T.value=e.value.videoTracks[0].frameRate||0:setTimeout(()=>{if(e.value&&c.value){const t=e.value.currentTime;let o=0;const s=()=>{var y;if(o++,o>=10||!c.value){const R=(((y=e.value)==null?void 0:y.currentTime)||t)-t;R>0&&(T.value=Math.round(o/R),X(T.value))}else requestAnimationFrame(s)};requestAnimationFrame(s)}},1e3)}catch(t){console.warn("Could not detect framerate:",t)}n("trigger-event",{name:"loaded",event:{duration:u.value}})}},Q=()=>{c.value=!0,z(!0),n("trigger-event",{name:"play",event:{currentTime:g.value}})},W=()=>{c.value=!1,z(!1),n("trigger-event",{name:"pause",event:{currentTime:g.value}})},Y=()=>{var t;c.value=!1,z(!1),n("trigger-event",{name:"ended",event:{}}),(t=i.content)!=null&&t.loop&&e.value&&(e.value.currentTime=0,P())},Z=()=>{e.value&&(l.value=e.value.volume,f.value=e.value.muted,n("trigger-event",{name:"volumeChange",event:{volume:l.value,muted:f.value}}))},P=()=>{if(r.value||!e.value)return;const t=e.value.play();t!==void 0&&t.catch(o=>{console.error("Error playing video:",o)})},q=()=>{r.value||e.value&&e.value.pause()},$=()=>{r.value||e.value&&(c.value?q():P())},ee=t=>{if(r.value||!e.value||u.value<=0)return;const s=t.currentTarget.getBoundingClientRect(),b=(t.clientX-s.left)/s.width*u.value;e.value.currentTime=b,g.value=b,F(b)},te=t=>{if(!e.value||u.value<=0)return;const s=t.currentTarget.getBoundingClientRect(),y=t.clientX-s.left,b=y/s.width;isHovering.value=!0,hoverPosition.value=y,hoverTime.value=b*u.value},ne=t=>{if(r.value||!e.value)return;const o=parseFloat(t);e.value.volume=o,l.value=o,o>0&&e.value.muted&&(e.value.muted=!1,f.value=!1)},le=()=>{r.value||e.value&&(e.value.muted=!e.value.muted,f.value=e.value.muted)},oe=()=>{var o;if(r.value)return;const t=(o=e.value)==null?void 0:o.parentElement;if(t)if(!M.value)t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen();else{const s=wwLib.getFrontDocument();s.exitFullscreen?s.exitFullscreen():s.webkitExitFullscreen?s.webkitExitFullscreen():s.msExitFullscreen&&s.msExitFullscreen()}},ae=()=>{var t,o;((t=i.content)==null?void 0:t.showControls)!==!1&&(h.value=!0,E(),(o=i.content)!=null&&o.autoHideControls&&c.value&&(V.value=setTimeout(()=>{h.value=!1},3e3)))},ie=()=>{var t;(t=i.content)!=null&&t.autoHideControls&&c.value&&(V.value=setTimeout(()=>{h.value=!1},1e3))},E=()=>{V.value&&(clearTimeout(V.value),V.value=null)},w=()=>{const t=wwLib.getFrontDocument();M.value=!!(t.fullscreenElement||t.webkitFullscreenElement||t.msFullscreenElement)};ve(()=>{var o,s;const t=wwLib.getFrontDocument();t.addEventListener("fullscreenchange",w),t.addEventListener("webkitfullscreenchange",w),t.addEventListener("msfullscreenchange",w),e.value&&(((o=i.content)==null?void 0:o.volume)!==void 0&&(e.value.volume=i.content.volume,l.value=i.content.volume),(s=i.content)!=null&&s.startMuted&&(e.value.muted=!0,f.value=!0))}),de(()=>{const t=wwLib.getFrontDocument();t.removeEventListener("fullscreenchange",w),t.removeEventListener("webkitfullscreenchange",w),t.removeEventListener("msfullscreenchange",w),E()});const se=t=>{if(r.value||!e.value)return;const o=parseFloat(t);isNaN(o)||(e.value.currentTime=Math.min(Math.max(0,o),u.value||0))},re=t=>{if(r.value||!e.value||u.value<=0)return;const o=parseFloat(t);if(isNaN(o))return;const y=Math.min(Math.max(0,o),100)/100*u.value;e.value.currentTime=y};return{videoElement:e,isPlaying:c,isMuted:f,volume:l,currentTime:g,duration:u,isFullscreen:M,controlsVisible:h,isHovering,hoverPosition,hoverTime,framerate:T,videoSrc:O,progressPercentage:_,formatTime:G,onTimeUpdate:J,onLoadedMetadata:K,onPlay:Q,onPause:W,onEnded:Y,onVolumeChange:Z,playVideo:P,pauseVideo:q,togglePlay:$,seekVideo:ee,updateHoverPosition:te,setVolume:ne,toggleMute:le,toggleFullscreen:oe,showControls:ae,hideControlsDelayed:ie,clearHideControlsTimeout:E,seekToTime:se,seekToPercentage:re}}},fe=["src","poster","muted","autoplay","loop","playsinline"],ge={key:0,viewBox:"0 0 24 24",class:"play-icon"},ye={key:1,viewBox:"0 0 24 24",class:"pause-icon"},we={class:"progress-bar"},be={class:"hover-time"},Ve={class:"controls-row"},he={key:0,viewBox:"0 0 24 24",class:"play-icon"},Te={key:1,viewBox:"0 0 24 24",class:"pause-icon"},Pe={class:"time-display"},ke={key:0,class:"framerate-display"},Ce={class:"volume-control"},Me={key:0,viewBox:"0 0 24 24",class:"volume-mute-icon"},Fe={key:1,viewBox:"0 0 24 24",class:"volume-low-icon"},ze={key:2,viewBox:"0 0 24 24",class:"volume-high-icon"},Ee={class:"volume-slider-container"},He=["value"],Le={key:0,viewBox:"0 0 24 24",class:"fullscreen-icon"},xe={key:1,viewBox:"0 0 24 24",class:"fullscreen-exit-icon"};function Be(i,n,r,e,c,f){return d(),v("div",{class:j(["custom-video-player",{"controls-visible":e.controlsVisible,"is-playing":e.isPlaying}]),onMousemove:n[16]||(n[16]=(...l)=>e.showControls&&e.showControls(...l)),onMouseleave:n[17]||(n[17]=(...l)=>e.hideControlsDelayed&&e.hideControlsDelayed(...l))},[a("video",{ref:"videoElement",class:"video-element",src:e.videoSrc,poster:r.content.posterImage,muted:r.content.startMuted,autoplay:r.content.autoplay,loop:r.content.loop,playsinline:r.content.playInline,onTimeupdate:n[0]||(n[0]=(...l)=>e.onTimeUpdate&&e.onTimeUpdate(...l)),onLoadedmetadata:n[1]||(n[1]=(...l)=>e.onLoadedMetadata&&e.onLoadedMetadata(...l)),onPlay:n[2]||(n[2]=(...l)=>e.onPlay&&e.onPlay(...l)),onPause:n[3]||(n[3]=(...l)=>e.onPause&&e.onPause(...l)),onEnded:n[4]||(n[4]=(...l)=>e.onEnded&&e.onEnded(...l)),onVolumechange:n[5]||(n[5]=(...l)=>e.onVolumeChange&&e.onVolumeChange(...l)),onClick:n[6]||(n[6]=(...l)=>e.togglePlay&&e.togglePlay(...l))},null,40,fe),r.content.showBigPlayButton?p((d(),v("div",{key:0,class:"big-play-button-container",onClick:n[7]||(n[7]=(...l)=>e.togglePlay&&e.togglePlay(...l))},[a("div",{class:j(["big-play-button",{"is-playing":e.isPlaying}])},[e.isPlaying?(d(),v("svg",ye,n[19]||(n[19]=[a("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(d(),v("svg",ge,n[18]||(n[18]=[a("path",{d:"M8 5v14l11-7z"},null,-1)])))],2)],512)),[[U,!e.isPlaying||e.controlsVisible]]):H("",!0),p(a("div",{class:"video-controls",onMouseenter:n[15]||(n[15]=(...l)=>e.clearHideControlsTimeout&&e.clearHideControlsTimeout(...l))},[a("div",{class:"progress-container",onClick:n[8]||(n[8]=(...l)=>e.seekVideo&&e.seekVideo(...l)),onMousemove:n[9]||(n[9]=(...l)=>e.updateHoverPosition&&e.updateHoverPosition(...l))},[a("div",we,[a("div",{class:"progress-fill",style:I({width:`${e.progressPercentage}%`})},null,4),e.isHovering?(d(),v("div",{key:0,class:"progress-hover",style:I({left:`${e.hoverPosition}px`})},[a("div",be,k(e.formatTime(e.hoverTime)),1)],4)):H("",!0)])],32),a("div",Ve,[a("button",{class:"control-button play-pause",onClick:n[10]||(n[10]=C((...l)=>e.togglePlay&&e.togglePlay(...l),["stop"]))},[e.isPlaying?(d(),v("svg",Te,n[21]||(n[21]=[a("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(d(),v("svg",he,n[20]||(n[20]=[a("path",{d:"M8 5v14l11-7z"},null,-1)])))]),a("div",Pe,[a("span",null,k(e.formatTime(e.currentTime)),1),n[22]||(n[22]=a("span",{class:"time-separator"},"/",-1)),a("span",null,k(e.formatTime(e.duration)),1),e.framerate>0?(d(),v("span",ke,k(e.framerate)+" fps",1)):H("",!0)]),a("div",Ce,[a("button",{class:"control-button volume-button",onClick:n[11]||(n[11]=C((...l)=>e.toggleMute&&e.toggleMute(...l),["stop"]))},[e.isMuted||e.volume===0?(d(),v("svg",Me,n[23]||(n[23]=[a("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,-1)]))):e.volume<.5?(d(),v("svg",Fe,n[24]||(n[24]=[a("path",{d:"M7 9v6h4l5 5V4l-5 5H7z"},null,-1)]))):(d(),v("svg",ze,n[25]||(n[25]=[a("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,-1)])))]),a("div",Ee,[a("input",{type:"range",min:"0",max:"1",step:"0.01",class:"volume-slider",value:e.volume,onInput:n[12]||(n[12]=l=>e.setVolume(l.target.value)),onClick:n[13]||(n[13]=C(()=>{},["stop"]))},null,40,He)])]),a("button",{class:"control-button fullscreen-button",onClick:n[14]||(n[14]=C((...l)=>e.toggleFullscreen&&e.toggleFullscreen(...l),["stop"]))},[e.isFullscreen?(d(),v("svg",xe,n[27]||(n[27]=[a("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)]))):(d(),v("svg",Le,n[26]||(n[26]=[a("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])))])])],544),[[U,r.content.showControls!==!1&&e.controlsVisible]])],34)}const qe=ue(me,[["render",Be],["__scopeId","data-v-4194463d"]]);A.component("wwobject-a3191a7e-88b6-4e90-a36a-d86ae4700a1f",qe);A.component("section-99586bd3-2b15-4d6b-a025-6a50d07ca845",ce);

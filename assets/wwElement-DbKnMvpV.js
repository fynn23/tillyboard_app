import{_ as f,q as p,c as u,o as c,a,u as h,Q as g,s as m,j as O,b as w,a9 as b,d as v}from"./main-BEqSrhKB.js";const k={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0},wwEditorState:{type:Object,required:!0}},data(){return{isOpened:!1,coordinates:{width:0,height:0},dropdownSize:0,isMouseInside:!1,timeoutId:0,resizeObserver:null}},computed:{isEditing(){return!1},style(){const e={},{position:t,alignment:l}=this.content,o=this.coordinates.width+"px",r=this.coordinates.height+"px",i=this.content.offsetX!==void 0?this.content.offsetX:"0px",s=this.content.offsetY!==void 0?this.content.offsetY:"0px";if((d=>{d==="top"||d==="bottom"?e[d]=`calc(${r} + ${s})`:e[d]=`calc(${o} + ${i})`})(this.getOppositeSide(t)),this.content.animated)switch(t){case"top":e["--slideOriginY"]=s;break;case"bottom":e["--slideOriginY"]=`calc(-1 * ${s})`,e["--slideOriginX"]="0px";break;case"left":e["--slideOriginX"]=i,e["--slideOriginY"]="0px";break;case"right":e["--slideOriginX"]=`calc(-1 * ${i})`,e["--slideOriginY"]="0px";break}switch(l){case"start":t==="top"||t==="bottom"?(this.content.animated&&(e["--transformOrigin"]=this.getOppositeSide(t)+" left"),e.left=i,e["--slideOriginX"]="-"+i):(this.content.animated&&(e["--transformOrigin"]="top "+this.getOppositeSide(t)),e.top=s);break;case"center":t==="top"||t==="bottom"?(this.content.animated&&(e["--transformOrigin"]=this.getOppositeSide(t)+" center"),e.transform=`translateX( calc(-50% + (${o} / 2) + ${i}))`,e["--slideOriginX"]="0px"):(this.content.animated&&(e["--transformOrigin"]="center "+this.getOppositeSide(t)),e.transform=`translateY( calc(-50% - (${r} / 2) + ${s}))`,e["--slideOriginY"]=`calc(-0.5 * ((${o} / 2) + ${i}))`);break;case"end":t==="top"||t==="bottom"?(this.content.animated&&(e["--transformOrigin"]="center"),e.right=i,e["--slideOriginX"]=i):(this.content.animated&&(e["--transformOrigin"]="bottom "+this.getOppositeSide(t)),e.bottom=`calc(-1 * ${s})`);break}return e["z-index"]=this.content.dropdownZIndex||"unset",e}},beforeMount(){wwLib.getFrontDocument().addEventListener("click",this.handleClickOutside)},mounted(){const e=new ResizeObserver(this.handleResize),t=this.$refs.dropdownElement;e.observe(t)},unmounted(){clearTimeout(this.timeoutId),this.resizeObserver&&this.resizeObserver.disconnect(),wwLib.getFrontDocument().removeEventListener("click",this.handleClickOutside)},methods:{handleClick(){(this.content.triggerType==="click"||this.wwFrontState.screenSize!=="default"&&!this.isEditing)&&(this.content.disabled||(this.isOpened=!this.isOpened))},closeDropdown(){this.isOpened=!1},handleClickOutside(){!this.isMouseInside&&(this.content.triggerType==="click"||this.content.triggerType==="right-click"||this.wwFrontState.screenSize!=="default")&&(this.content.disabled||(this.isOpened=!1))},handleHoverIn(){this.content.triggerType==="hover"&&this.wwFrontState.screenSize==="default"&&!this.isEditing?(clearTimeout(this.timeoutId),this.content.disabled||(this.isOpened=!0)):this.isMouseInside=!0},handleHoverOut(){this.content.triggerType==="hover"?this.timeoutId=setTimeout(()=>{this.content.disabled||(this.isOpened=!1)},200):this.isMouseInside=!1},handleRightClick(){(this.content.triggerType==="right-click"||this.wwFrontState.screenSize!=="default"&&!this.isEditing)&&(this.content.disabled||(this.isOpened=!this.isOpened))},getOppositeSide(e){return{top:"bottom",bottom:"top",left:"right",right:"left"}[e]},handleResize(e){const t=e[0];this.coordinates.width=t.contentRect.width,this.coordinates.height=t.contentRect.height}}},y={style:{position:"relative"}};function S(e,t,l,o,r,i){const s=p("wwLayout");return c(),u("div",y,[a("div",{ref:"dropdownElement",onClick:t[0]||(t[0]=(...n)=>i.handleClick&&i.handleClick(...n)),onMouseenter:t[1]||(t[1]=(...n)=>i.handleHoverIn&&i.handleHoverIn(...n)),onMouseleave:t[2]||(t[2]=(...n)=>i.handleHoverOut&&i.handleHoverOut(...n)),onContextmenu:t[3]||(t[3]=g((...n)=>i.handleRightClick&&i.handleRightClick(...n),["prevent"]))},[h(s,{class:"layout content-layout",path:"triggerLayout"})],544),a("div",{style:v(i.style),class:"dropdown","ww-responsive":"dropdown"},[a("div",{onMouseenter:t[4]||(t[4]=(...n)=>i.handleHoverIn&&i.handleHoverIn(...n)),onMouseleave:t[5]||(t[5]=(...n)=>i.handleHoverOut&&i.handleHoverOut(...n))},[h(b,{name:this.content.animated?"slide":""},{default:m(()=>[r.isOpened||this.content.forceDisplayEditor&&this.isEditing?(c(),O(s,{key:0,path:"dropdownLayout"})):w("",!0)]),_:1},8,["name"])],32)],4)])}const I=f(k,[["render",S],["__scopeId","data-v-f19b2c19"]]);export{I as e};

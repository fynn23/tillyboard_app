import{_ as Te,i as nn,d as f,b as R,M as ot,e as H,o as V,x as K,f as q,g as G,t as re,n as De,U as tn,h as an,k as lt,j as st,F as ut,p as ct,c as rn,S as dt,v as ft,P as Be,l as me,N as vt}from"./main-CAT7wj_B.js";const Ee={props:{file:{type:Object,required:!0},status:{type:Object,required:!0},index:{type:Number,required:!0},isReadonly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},emits:["remove"],setup(e){const n=nn("_wwFileUpload",{files:f(()=>[]),content:f(()=>({})),isDisabled:f(()=>!1),isReadonly:f(()=>!1),isSingleMode:f(()=>!0),acceptedTypes:f(()=>"")}),a=f(()=>n.files.value.length),t=f(()=>{var c;return((c=n.content)==null?void 0:c.value)||{}}),o=f(()=>{var c;return(c=t.value)==null?void 0:c.showFileInfo}),l=f(()=>{var c,w,g,m,x,S;return{backgroundColor:((c=t.value)==null?void 0:c.fileItemBackground)||"#fff",borderColor:((w=t.value)==null?void 0:w.fileItemBorderColor)||"#eee",borderRadius:((g=t.value)==null?void 0:g.fileItemBorderRadius)||"6px",padding:((m=t.value)==null?void 0:m.fileItemPadding)||"12px",margin:((x=t.value)==null?void 0:x.fileItemMargin)||"0 0 8px 0",boxShadow:((S=t.value)==null?void 0:S.fileItemShadow)||"0 2px 4px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"}}),s=f(()=>{var c,w,g,m;return{fontFamily:((c=t.value)==null?void 0:c.fileNameFontFamily)||"inherit",fontSize:((w=t.value)==null?void 0:w.fileNameFontSize)||"14px",fontWeight:((g=t.value)==null?void 0:g.fileNameFontWeight)||500,color:((m=t.value)==null?void 0:m.fileNameColor)||"inherit"}}),u=f(()=>{var c,w,g,m;return{fontFamily:((c=t.value)==null?void 0:c.fileDetailsFontFamily)||"inherit",fontSize:((w=t.value)==null?void 0:w.fileDetailsFontSize)||"12px",fontWeight:((g=t.value)==null?void 0:g.fileDetailsFontWeight)||"normal",color:((m=t.value)==null?void 0:m.fileDetailsColor)||"#888"}}),r=f(()=>{var c,w,g,m,x,S;return{width:((c=t.value)==null?void 0:c.actionButtonSize)||"28px",height:((w=t.value)==null?void 0:w.actionButtonSize)||"28px",backgroundColor:((g=t.value)==null?void 0:g.actionButtonBackground)||"#fff",color:((m=t.value)==null?void 0:m.actionButtonColor)||"#666",borderRadius:((x=t.value)==null?void 0:x.actionButtonBorderRadius)||"4px",margin:((S=t.value)==null?void 0:S.actionButtonMargin)||"0 0 0 4px"}}),p=f(()=>{const c=e.file.size||0;if(c===0)return"0 B";const w=["B","KB","MB","GB","TB"],g=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,g)).toFixed(2)} ${w[g]}`}),{getIcon:d}=wwLib.useIcons(),v=R(null);return ot(async()=>{try{v.value=await d("lucide/trash")}catch{v.value=null}}),{formattedSize:p,filesCount:a,fileItemStyles:l,fileNameStyles:s,fileDetailsStyles:u,actionButtonStyles:r,content:t,showFileInfo:o,removeIcon:v}}},Ye=()=>{tn(e=>{var n,a,t,o,l,s,u,r,p,d,v,c,w,g,m,x,S,h,b,I,D,M,T,E,_,B,A,j;return{"7b1dfa1a":((n=e.content)==null?void 0:n.fileItemPadding)||"12px","9aaaea80":((a=e.content)==null?void 0:a.fileItemBorderColor)||"#eee",b98e495a:((t=e.content)==null?void 0:t.fileItemBorderRadius)||"6px",cf48deaa:(((o=e.content)==null?void 0:o.fileItemMargin)||"0 0 8px 0").split(" ")[2]||"8px","197e2fc0":((l=e.content)==null?void 0:l.fileItemBackground)||"#fff",c930e7e2:((s=e.content)==null?void 0:s.fileItemHoverBorderColor)||((u=e.content)==null?void 0:u.fileItemBorderColor)||"#ddd","02d0e7a6":((r=e.content)==null?void 0:r.fileItemHoverBackground)||((p=e.content)==null?void 0:p.fileItemBackground)||"#fff","321b2138":((d=e.content)==null?void 0:d.fileItemHoverShadow)||((v=e.content)==null?void 0:v.fileItemShadow)||"0 2px 4px rgba(0, 0, 0, 0.05)","42482b5c":((c=e.content)==null?void 0:c.fileNameFontSize)||"14px",dc1d08be:((w=e.content)==null?void 0:w.fileNameFontWeight)||500,d417b15a:((g=e.content)==null?void 0:g.fileNameColor)||"inherit","768162c7":((m=e.content)==null?void 0:m.fileDetailsFontSize)||"12px","68cc3a24":((x=e.content)==null?void 0:x.fileDetailsColor)||"#888","5ecc39c1":((S=e.content)==null?void 0:S.actionButtonSize)||"28px","2ebba648":((h=e.content)==null?void 0:h.actionButtonBorderRadius)||"4px","3d925ae7":((b=e.content)==null?void 0:b.actionButtonBorderColor)||((I=e.content)==null?void 0:I.fileItemBorderColor)||"#eee","4812c8f9":((D=e.content)==null?void 0:D.actionButtonBackground)||"#fff","1f68a8c2":((M=e.content)==null?void 0:M.actionButtonColor)||"#666","20e437bb":(((T=e.content)==null?void 0:T.actionButtonMargin)||"0 0 0 4px").split(" ")[3]||"4px","26a1da30":((E=e.content)==null?void 0:E.actionButtonHoverBorderColor)||((_=e.content)==null?void 0:_.fileItemHoverBorderColor)||"#ddd","66897d62":((B=e.content)==null?void 0:B.actionButtonHoverBackground)||"#f8f8f8","1f1a1df6":((A=e.content)==null?void 0:A.actionButtonRemoveHoverColor)||((j=e.content)==null?void 0:j.progressBarColor)||"#999"}})},Ze=Ee.setup;Ee.setup=Ze?(e,n)=>(Ye(),Ze(e,n)):Ye;const gt=["aria-label"],mt={class:"ww-file-item__info"},ht={key:0},yt={class:"ww-file-item__actions"},pt=["disabled"],bt=["innerHTML"];function wt(e,n,a,t,o,l){return V(),H("li",{class:De(["ww-file-item",{"ww-file-item--disabled":a.isDisabled}]),style:G(t.fileItemStyles),role:"listitem","aria-label":`File: ${a.file.name}, Size: ${t.formattedSize}`},[a.status&&a.status.uploadProgress!==void 0?(V(),H("div",{key:0,class:"ww-file-item__progress",style:G({width:`${Math.min(100,Math.round(a.status.uploadProgress))}%`,backgroundColor:t.content.progressBarColor||"#EEEEEE"})},null,4)):K("",!0),q("div",mt,[q("div",{class:"ww-file-item__name",style:G(t.fileNameStyles)},re(a.file.name),5),t.showFileInfo?(V(),H("div",{key:0,class:"ww-file-item__details",style:G(t.fileDetailsStyles)},[q("span",null,re(t.formattedSize),1),a.status&&a.status.uploadProgress!==void 0?(V(),H("span",ht," â€¢ "+re(`${Math.round(a.status.uploadProgress)}%`),1)):K("",!0)],4)):K("",!0)]),q("div",yt,[a.isReadonly?K("",!0):(V(),H("button",{key:0,type:"button",class:"ww-file-item__btn ww-file-item__btn--remove",disabled:a.isDisabled||a.isReadonly,onClick:n[0]||(n[0]=s=>e.$emit("remove")),style:G(t.actionButtonStyles),"aria-label":"Remove file"},[q("div",{class:"icon",innerHTML:t.removeIcon},null,8,bt)],12,pt))])],14,gt)}const Ft=Te(Ee,[["render",wt],["__scopeId","data-v-d4438dc4"]]),Mt={name:"FileList",components:{FileItem:Ft},props:{files:{type:Array,required:!0},status:{type:Object,required:!0},type:{type:String,default:"single",validator:e=>["single","multi"].includes(e)},isReadonly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},emits:["remove"],setup(e){return{getFileStatus:a=>!(a!=null&&a.name)||!e.status?{}:e.status[a.name]||{}}}},xt={class:"ww-file-list",role:"list","aria-label":"Uploaded files"};function St(e,n,a,t,o,l){const s=an("FileItem");return V(),H("div",xt,[lt(dt,{name:"file-list-transition",tag:"div",class:"ww-file-list__inner"},{default:st(()=>[(V(!0),H(ut,null,ct(a.files,(u,r)=>(V(),rn(s,{key:u.id||`file-${r}-${u.name}-${u.size}`,file:u,status:t.getFileStatus(u),index:r,"is-readonly":a.isReadonly,"is-disabled":a.isDisabled,onRemove:p=>e.$emit("remove",r)},null,8,["file","status","index","is-readonly","is-disabled","onRemove"]))),128))]),_:1})])}const Bt=Te(Mt,[["render",St],["__scopeId","data-v-b4350705"]]);function Ct(e,n={}){const{maxFileSize:a,minFileSize:t,maxTotalFileSize:o,currentTotalSize:l=0,acceptedTypes:s=""}=n,u=e.size/(1024*1024),r=l/(1024*1024);return t&&u<t?{valid:!1,reason:`File size (${u.toFixed(2)} MB) is less than the minimum allowed size (${t} MB)`,constraint:"MIN_SIZE",details:{minSize:t,actualSize:u}}:a&&u>a?{valid:!1,reason:`File size (${u.toFixed(2)} MB) exceeds the maximum allowed size (${a} MB)`,constraint:"MAX_SIZE",details:{maxSize:a,actualSize:u}}:o&&o>0&&r+u>o?{valid:!1,reason:`Total file size (${(r+u).toFixed(2)} MB) would exceed the maximum allowed (${o} MB)`,constraint:"MAX_TOTAL_SIZE",details:{maxTotalSize:o,currentTotalSize:r,newFileSize:u,resultingTotalSize:r+u}}:s&&!Dt(e,s)?{valid:!1,reason:`File type "${e.type}" is not accepted. Allowed types: ${s}`,constraint:"INVALID_TYPE",details:{allowedTypes:s,fileType:e.type,fileExtension:It(e.name,e.type)}}:{valid:!0}}function Dt(e,n){if(!n||!e||!e.type)return!n;const a=n.split(",").map(l=>l.trim().toLowerCase()),t=e.type.split("/")[0]+"/*";if(a.includes(t)||a.includes(e.type.toLowerCase()))return!0;const o="."+e.name.split(".").pop().toLowerCase();return a.includes(o)}function It(e,n){return e&&e.includes(".")?e.split(".").pop().toLowerCase():n?{"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","application/pdf":"pdf","text/csv":"csv","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/json":"json","text/plain":"txt"}[n]||n.split("/").pop():""}function zt(e){return new Promise((n,a)=>{const t=new FileReader;t.onload=()=>n(t.result),t.onerror=()=>a(new Error("Failed to convert file to Base64")),t.readAsDataURL(e)})}function Tt(e){return new Promise((n,a)=>{const t=new FileReader;t.onload=()=>n(t.result),t.onerror=()=>a(new Error("Failed to convert file to binary")),t.readAsArrayBuffer(e)})}var on={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},_e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Et=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],he={CSS:{},springs:{}};function Y(e,n,a){return Math.min(Math.max(e,n),a)}function ue(e,n){return e.indexOf(n)>-1}function Ce(e,n){return e.apply(null,n)}var y={arr:function(e){return Array.isArray(e)},obj:function(e){return ue(Object.prototype.toString.call(e),"Object")},pth:function(e){return y.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||y.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return y.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return y.hex(e)||y.rgb(e)||y.hsl(e)},key:function(e){return!on.hasOwnProperty(e)&&!_e.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function ln(e){var n=/\(([^)]+)\)/.exec(e);return n?n[1].split(",").map(function(a){return parseFloat(a)}):[]}function sn(e,n){var a=ln(e),t=Y(y.und(a[0])?1:a[0],.1,100),o=Y(y.und(a[1])?100:a[1],.1,100),l=Y(y.und(a[2])?10:a[2],.1,100),s=Y(y.und(a[3])?0:a[3],.1,100),u=Math.sqrt(o/t),r=l/(2*Math.sqrt(o*t)),p=r<1?u*Math.sqrt(1-r*r):0,d=1,v=r<1?(r*u+-s)/p:-s+u;function c(g){var m=n?n*g/1e3:g;return r<1?m=Math.exp(-m*r*u)*(d*Math.cos(p*m)+v*Math.sin(p*m)):m=(d+v*m)*Math.exp(-m*u),g===0||g===1?g:1-m}function w(){var g=he.springs[e];if(g)return g;for(var m=1/6,x=0,S=0;;)if(x+=m,c(x)===1){if(S++,S>=16)break}else S=0;var h=x*m*1e3;return he.springs[e]=h,h}return n?c:w}function _t(e){return e===void 0&&(e=10),function(n){return Math.ceil(Y(n,1e-6,1)*e)*(1/e)}}var Lt=(function(){var e=11,n=1/(e-1);function a(d,v){return 1-3*v+3*d}function t(d,v){return 3*v-6*d}function o(d){return 3*d}function l(d,v,c){return((a(v,c)*d+t(v,c))*d+o(v))*d}function s(d,v,c){return 3*a(v,c)*d*d+2*t(v,c)*d+o(v)}function u(d,v,c,w,g){var m,x,S=0;do x=v+(c-v)/2,m=l(x,w,g)-d,m>0?c=x:v=x;while(Math.abs(m)>1e-7&&++S<10);return x}function r(d,v,c,w){for(var g=0;g<4;++g){var m=s(v,c,w);if(m===0)return v;var x=l(v,c,w)-d;v-=x/m}return v}function p(d,v,c,w){if(!(0<=d&&d<=1&&0<=c&&c<=1))return;var g=new Float32Array(e);if(d!==v||c!==w)for(var m=0;m<e;++m)g[m]=l(m*n,d,c);function x(S){for(var h=0,b=1,I=e-1;b!==I&&g[b]<=S;++b)h+=n;--b;var D=(S-g[b])/(g[b+1]-g[b]),M=h+D*n,T=s(M,d,c);return T>=.001?r(S,M,d,c):T===0?M:u(S,h,h+n,d,c)}return function(S){return d===v&&c===w||S===0||S===1?S:l(x(S),v,w)}}return p})(),un=(function(){var e={linear:function(){return function(t){return t}}},n={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Expo:function(){return function(t){return t?Math.pow(2,10*t-10):0}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var o,l=4;t<((o=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((o*3-2)/22-t,2)}},Elastic:function(t,o){t===void 0&&(t=1),o===void 0&&(o=.5);var l=Y(t,1,10),s=Y(o,.1,2);return function(u){return u===0||u===1?u:-l*Math.pow(2,10*(u-1))*Math.sin((u-1-s/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/s)}}},a=["Quad","Cubic","Quart","Quint"];return a.forEach(function(t,o){n[t]=function(){return function(l){return Math.pow(l,o+2)}}}),Object.keys(n).forEach(function(t){var o=n[t];e["easeIn"+t]=o,e["easeOut"+t]=function(l,s){return function(u){return 1-o(l,s)(1-u)}},e["easeInOut"+t]=function(l,s){return function(u){return u<.5?o(l,s)(u*2)/2:1-o(l,s)(u*-2+2)/2}},e["easeOutIn"+t]=function(l,s){return function(u){return u<.5?(1-o(l,s)(1-u*2))/2:(o(l,s)(u*2-1)+1)/2}}}),e})();function Le(e,n){if(y.fnc(e))return e;var a=e.split("(")[0],t=un[a],o=ln(e);switch(a){case"spring":return sn(e,n);case"cubicBezier":return Ce(Lt,o);case"steps":return Ce(_t,o);default:return Ce(t,o)}}function cn(e){try{var n=document.querySelectorAll(e);return n}catch{return}}function ye(e,n){for(var a=e.length,t=arguments.length>=2?arguments[1]:void 0,o=[],l=0;l<a;l++)if(l in e){var s=e[l];n.call(t,s,l,e)&&o.push(s)}return o}function pe(e){return e.reduce(function(n,a){return n.concat(y.arr(a)?pe(a):a)},[])}function Qe(e){return y.arr(e)?e:(y.str(e)&&(e=cn(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function ke(e,n){return e.some(function(a){return a===n})}function Pe(e){var n={};for(var a in e)n[a]=e[a];return n}function Ie(e,n){var a=Pe(e);for(var t in e)a[t]=n.hasOwnProperty(t)?n[t]:e[t];return a}function be(e,n){var a=Pe(e);for(var t in n)a[t]=y.und(e[t])?n[t]:e[t];return a}function kt(e){var n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return n?"rgba("+n[1]+",1)":e}function Pt(e){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=e.replace(n,function(u,r,p,d){return r+r+p+p+d+d}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),o=parseInt(t[1],16),l=parseInt(t[2],16),s=parseInt(t[3],16);return"rgba("+o+","+l+","+s+",1)"}function At(e){var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(n[1],10)/360,t=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,l=n[4]||1;function s(c,w,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?c+(w-c)*6*g:g<1/2?w:g<2/3?c+(w-c)*(2/3-g)*6:c}var u,r,p;if(t==0)u=r=p=o;else{var d=o<.5?o*(1+t):o+t-o*t,v=2*o-d;u=s(v,d,a+1/3),r=s(v,d,a),p=s(v,d,a-1/3)}return"rgba("+u*255+","+r*255+","+p*255+","+l+")"}function Ot(e){if(y.rgb(e))return kt(e);if(y.hex(e))return Pt(e);if(y.hsl(e))return At(e)}function J(e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(n)return n[1]}function Vt(e){if(ue(e,"translate")||e==="perspective")return"px";if(ue(e,"rotate")||ue(e,"skew"))return"deg"}function ze(e,n){return y.fnc(e)?e(n.target,n.id,n.total):e}function Z(e,n){return e.getAttribute(n)}function Ae(e,n,a){var t=J(n);if(ke([a,"deg","rad","turn"],t))return n;var o=he.CSS[n+a];if(!y.und(o))return o;var l=100,s=document.createElement(e.tagName),u=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;u.appendChild(s),s.style.position="absolute",s.style.width=l+a;var r=l/s.offsetWidth;u.removeChild(s);var p=r*parseFloat(n);return he.CSS[n+a]=p,p}function dn(e,n,a){if(n in e.style){var t=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[n]||getComputedStyle(e).getPropertyValue(t)||"0";return a?Ae(e,o,a):o}}function Oe(e,n){if(y.dom(e)&&!y.inp(e)&&(!y.nil(Z(e,n))||y.svg(e)&&e[n]))return"attribute";if(y.dom(e)&&ke(Et,n))return"transform";if(y.dom(e)&&n!=="transform"&&dn(e,n))return"css";if(e[n]!=null)return"object"}function fn(e){if(y.dom(e)){for(var n=e.style.transform||"",a=/(\w+)\(([^)]*)\)/g,t=new Map,o;o=a.exec(n);)t.set(o[1],o[2]);return t}}function jt(e,n,a,t){var o=ue(n,"scale")?1:0+Vt(n),l=fn(e).get(n)||o;return a&&(a.transforms.list.set(n,l),a.transforms.last=n),t?Ae(e,l,t):l}function Ve(e,n,a,t){switch(Oe(e,n)){case"transform":return jt(e,n,t,a);case"css":return dn(e,n,a);case"attribute":return Z(e,n);default:return e[n]||0}}function je(e,n){var a=/^(\*=|\+=|-=)/.exec(e);if(!a)return e;var t=J(e)||0,o=parseFloat(n),l=parseFloat(e.replace(a[0],""));switch(a[0][0]){case"+":return o+l+t;case"-":return o-l+t;case"*":return o*l+t}}function vn(e,n){if(y.col(e))return Ot(e);if(/\s/g.test(e))return e;var a=J(e),t=a?e.substr(0,e.length-a.length):e;return n?t+n:t}function Re(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Rt(e){return Math.PI*2*Z(e,"r")}function Ht(e){return Z(e,"width")*2+Z(e,"height")*2}function Nt(e){return Re({x:Z(e,"x1"),y:Z(e,"y1")},{x:Z(e,"x2"),y:Z(e,"y2")})}function gn(e){for(var n=e.points,a=0,t,o=0;o<n.numberOfItems;o++){var l=n.getItem(o);o>0&&(a+=Re(t,l)),t=l}return a}function Wt(e){var n=e.points;return gn(e)+Re(n.getItem(n.numberOfItems-1),n.getItem(0))}function mn(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Rt(e);case"rect":return Ht(e);case"line":return Nt(e);case"polyline":return gn(e);case"polygon":return Wt(e)}}function Ut(e){var n=mn(e);return e.setAttribute("stroke-dasharray",n),n}function qt(e){for(var n=e.parentNode;y.svg(n)&&y.svg(n.parentNode);)n=n.parentNode;return n}function hn(e,n){var a=n||{},t=a.el||qt(e),o=t.getBoundingClientRect(),l=Z(t,"viewBox"),s=o.width,u=o.height,r=a.viewBox||(l?l.split(" "):[0,0,s,u]);return{el:t,viewBox:r,x:r[0]/1,y:r[1]/1,w:s,h:u,vW:r[2],vH:r[3]}}function Yt(e,n){var a=y.str(e)?cn(e)[0]:e,t=n||100;return function(o){return{property:o,el:a,svg:hn(a),totalLength:mn(a)*(t/100)}}}function Zt(e,n,a){function t(d){d===void 0&&(d=0);var v=n+d>=1?n+d:0;return e.el.getPointAtLength(v)}var o=hn(e.el,e.svg),l=t(),s=t(-1),u=t(1),r=a?1:o.w/o.vW,p=a?1:o.h/o.vH;switch(e.property){case"x":return(l.x-o.x)*r;case"y":return(l.y-o.y)*p;case"angle":return Math.atan2(u.y-s.y,u.x-s.x)*180/Math.PI}}function Ke(e,n){var a=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,t=vn(y.pth(e)?e.totalLength:e,n)+"";return{original:t,numbers:t.match(a)?t.match(a).map(Number):[0],strings:y.str(e)||n?t.split(a):[]}}function He(e){var n=e?pe(y.arr(e)?e.map(Qe):Qe(e)):[];return ye(n,function(a,t,o){return o.indexOf(a)===t})}function yn(e){var n=He(e);return n.map(function(a,t){return{target:a,id:t,total:n.length,transforms:{list:fn(a)}}})}function Qt(e,n){var a=Pe(n);if(/^spring/.test(a.easing)&&(a.duration=sn(a.easing)),y.arr(e)){var t=e.length,o=t===2&&!y.obj(e[0]);o?e={value:e}:y.fnc(n.duration)||(a.duration=n.duration/t)}var l=y.arr(e)?e:[e];return l.map(function(s,u){var r=y.obj(s)&&!y.pth(s)?s:{value:s};return y.und(r.delay)&&(r.delay=u?0:n.delay),y.und(r.endDelay)&&(r.endDelay=u===l.length-1?n.endDelay:0),r}).map(function(s){return be(s,a)})}function Kt(e){for(var n=ye(pe(e.map(function(l){return Object.keys(l)})),function(l){return y.key(l)}).reduce(function(l,s){return l.indexOf(s)<0&&l.push(s),l},[]),a={},t=function(l){var s=n[l];a[s]=e.map(function(u){var r={};for(var p in u)y.key(p)?p==s&&(r.value=u[p]):r[p]=u[p];return r})},o=0;o<n.length;o++)t(o);return a}function Gt(e,n){var a=[],t=n.keyframes;t&&(n=be(Kt(t),n));for(var o in n)y.key(o)&&a.push({name:o,tweens:Qt(n[o],e)});return a}function Jt(e,n){var a={};for(var t in e){var o=ze(e[t],n);y.arr(o)&&(o=o.map(function(l){return ze(l,n)}),o.length===1&&(o=o[0])),a[t]=o}return a.duration=parseFloat(a.duration),a.delay=parseFloat(a.delay),a}function Xt(e,n){var a;return e.tweens.map(function(t){var o=Jt(t,n),l=o.value,s=y.arr(l)?l[1]:l,u=J(s),r=Ve(n.target,e.name,u,n),p=a?a.to.original:r,d=y.arr(l)?l[0]:p,v=J(d)||J(r),c=u||v;return y.und(s)&&(s=p),o.from=Ke(d,c),o.to=Ke(je(s,d),c),o.start=a?a.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=Le(o.easing,o.duration),o.isPath=y.pth(l),o.isPathTargetInsideSVG=o.isPath&&y.svg(n.target),o.isColor=y.col(o.from.original),o.isColor&&(o.round=1),a=o,o})}var pn={css:function(e,n,a){return e.style[n]=a},attribute:function(e,n,a){return e.setAttribute(n,a)},object:function(e,n,a){return e[n]=a},transform:function(e,n,a,t,o){if(t.list.set(n,a),n===t.last||o){var l="";t.list.forEach(function(s,u){l+=u+"("+s+") "}),e.style.transform=l}}};function bn(e,n){var a=yn(e);a.forEach(function(t){for(var o in n){var l=ze(n[o],t),s=t.target,u=J(l),r=Ve(s,o,u,t),p=u||J(r),d=je(vn(l,p),r),v=Oe(s,o);pn[v](s,o,d,t.transforms,!0)}})}function $t(e,n){var a=Oe(e.target,n.name);if(a){var t=Xt(n,e),o=t[t.length-1];return{type:a,property:n.name,animatable:e,tweens:t,duration:o.end,delay:t[0].delay,endDelay:o.endDelay}}}function ea(e,n){return ye(pe(e.map(function(a){return n.map(function(t){return $t(a,t)})})),function(a){return!y.und(a)})}function wn(e,n){var a=e.length,t=function(l){return l.timelineOffset?l.timelineOffset:0},o={};return o.duration=a?Math.max.apply(Math,e.map(function(l){return t(l)+l.duration})):n.duration,o.delay=a?Math.min.apply(Math,e.map(function(l){return t(l)+l.delay})):n.delay,o.endDelay=a?o.duration-Math.max.apply(Math,e.map(function(l){return t(l)+l.duration-l.endDelay})):n.endDelay,o}var Ge=0;function na(e){var n=Ie(on,e),a=Ie(_e,e),t=Gt(a,e),o=yn(e.targets),l=ea(o,t),s=wn(l,a),u=Ge;return Ge++,be(n,{id:u,children:[],animatables:o,animations:l,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}var U=[],Fn=(function(){var e;function n(){!e&&(!Je()||!z.suspendWhenDocumentHidden)&&U.length>0&&(e=requestAnimationFrame(a))}function a(o){for(var l=U.length,s=0;s<l;){var u=U[s];u.paused?(U.splice(s,1),l--):(u.tick(o),s++)}e=s>0?requestAnimationFrame(a):void 0}function t(){z.suspendWhenDocumentHidden&&(Je()?e=cancelAnimationFrame(e):(U.forEach(function(o){return o._onDocumentVisibility()}),Fn()))}return typeof document<"u"&&document.addEventListener("visibilitychange",t),n})();function Je(){return!!document&&document.hidden}function z(e){e===void 0&&(e={});var n=0,a=0,t=0,o,l=0,s=null;function u(h){var b=window.Promise&&new Promise(function(I){return s=I});return h.finished=b,b}var r=na(e);u(r);function p(){var h=r.direction;h!=="alternate"&&(r.direction=h!=="normal"?"normal":"reverse"),r.reversed=!r.reversed,o.forEach(function(b){return b.reversed=r.reversed})}function d(h){return r.reversed?r.duration-h:h}function v(){n=0,a=d(r.currentTime)*(1/z.speed)}function c(h,b){b&&b.seek(h-b.timelineOffset)}function w(h){if(r.reversePlayback)for(var I=l;I--;)c(h,o[I]);else for(var b=0;b<l;b++)c(h,o[b])}function g(h){for(var b=0,I=r.animations,D=I.length;b<D;){var M=I[b],T=M.animatable,E=M.tweens,_=E.length-1,B=E[_];_&&(B=ye(E,function(Fe){return h<Fe.end})[0]||B);for(var A=Y(h-B.start-B.delay,0,B.duration)/B.duration,j=isNaN(A)?1:B.easing(A),L=B.to.strings,ie=B.round,oe=[],we=B.to.numbers.length,Q=void 0,X=0;X<we;X++){var ne=void 0,ce=B.to.numbers[X],de=B.from.numbers[X]||0;B.isPath?ne=Zt(B.value,j*ce,B.isPathTargetInsideSVG):ne=de+j*(ce-de),ie&&(B.isColor&&X>2||(ne=Math.round(ne*ie)/ie)),oe.push(ne)}var fe=L.length;if(!fe)Q=oe[0];else{Q=L[0];for(var te=0;te<fe;te++){L[te];var ve=L[te+1],le=oe[te];isNaN(le)||(ve?Q+=le+ve:Q+=le+" ")}}pn[M.type](T.target,M.property,Q,T.transforms),M.currentValue=Q,b++}}function m(h){r[h]&&!r.passThrough&&r[h](r)}function x(){r.remaining&&r.remaining!==!0&&r.remaining--}function S(h){var b=r.duration,I=r.delay,D=b-r.endDelay,M=d(h);r.progress=Y(M/b*100,0,100),r.reversePlayback=M<r.currentTime,o&&w(M),!r.began&&r.currentTime>0&&(r.began=!0,m("begin")),!r.loopBegan&&r.currentTime>0&&(r.loopBegan=!0,m("loopBegin")),M<=I&&r.currentTime!==0&&g(0),(M>=D&&r.currentTime!==b||!b)&&g(b),M>I&&M<D?(r.changeBegan||(r.changeBegan=!0,r.changeCompleted=!1,m("changeBegin")),m("change"),g(M)):r.changeBegan&&(r.changeCompleted=!0,r.changeBegan=!1,m("changeComplete")),r.currentTime=Y(M,0,b),r.began&&m("update"),h>=b&&(a=0,x(),r.remaining?(n=t,m("loopComplete"),r.loopBegan=!1,r.direction==="alternate"&&p()):(r.paused=!0,r.completed||(r.completed=!0,m("loopComplete"),m("complete"),!r.passThrough&&"Promise"in window&&(s(),u(r)))))}return r.reset=function(){var h=r.direction;r.passThrough=!1,r.currentTime=0,r.progress=0,r.paused=!0,r.began=!1,r.loopBegan=!1,r.changeBegan=!1,r.completed=!1,r.changeCompleted=!1,r.reversePlayback=!1,r.reversed=h==="reverse",r.remaining=r.loop,o=r.children,l=o.length;for(var b=l;b--;)r.children[b].reset();(r.reversed&&r.loop!==!0||h==="alternate"&&r.loop===1)&&r.remaining++,g(r.reversed?r.duration:0)},r._onDocumentVisibility=v,r.set=function(h,b){return bn(h,b),r},r.tick=function(h){t=h,n||(n=t),S((t+(a-n))*z.speed)},r.seek=function(h){S(d(h))},r.pause=function(){r.paused=!0,v()},r.play=function(){r.paused&&(r.completed&&r.reset(),r.paused=!1,U.push(r),v(),Fn())},r.reverse=function(){p(),r.completed=!r.reversed,v()},r.restart=function(){r.reset(),r.play()},r.remove=function(h){var b=He(h);Mn(b,r)},r.reset(),r.autoplay&&r.play(),r}function Xe(e,n){for(var a=n.length;a--;)ke(e,n[a].animatable.target)&&n.splice(a,1)}function Mn(e,n){var a=n.animations,t=n.children;Xe(e,a);for(var o=t.length;o--;){var l=t[o],s=l.animations;Xe(e,s),!s.length&&!l.children.length&&t.splice(o,1)}!a.length&&!t.length&&n.pause()}function ta(e){for(var n=He(e),a=U.length;a--;){var t=U[a];Mn(n,t)}}function aa(e,n){n===void 0&&(n={});var a=n.direction||"normal",t=n.easing?Le(n.easing):null,o=n.grid,l=n.axis,s=n.from||0,u=s==="first",r=s==="center",p=s==="last",d=y.arr(e),v=parseFloat(d?e[0]:e),c=d?parseFloat(e[1]):0,w=J(d?e[1]:e)||0,g=n.start||0+(d?v:0),m=[],x=0;return function(S,h,b){if(u&&(s=0),r&&(s=(b-1)/2),p&&(s=b-1),!m.length){for(var I=0;I<b;I++){if(!o)m.push(Math.abs(s-I));else{var D=r?(o[0]-1)/2:s%o[0],M=r?(o[1]-1)/2:Math.floor(s/o[0]),T=I%o[0],E=Math.floor(I/o[0]),_=D-T,B=M-E,A=Math.sqrt(_*_+B*B);l==="x"&&(A=-_),l==="y"&&(A=-B),m.push(A)}x=Math.max.apply(Math,m)}t&&(m=m.map(function(L){return t(L/x)*x})),a==="reverse"&&(m=m.map(function(L){return l?L<0?L*-1:-L:Math.abs(x-L)}))}var j=d?(c-v)/x:v;return g+j*(Math.round(m[h]*100)/100)+w}}function ra(e){e===void 0&&(e={});var n=z(e);return n.duration=0,n.add=function(a,t){var o=U.indexOf(n),l=n.children;o>-1&&U.splice(o,1);function s(c){c.passThrough=!0}for(var u=0;u<l.length;u++)s(l[u]);var r=be(a,Ie(_e,e));r.targets=r.targets||e.targets;var p=n.duration;r.autoplay=!1,r.direction=n.direction,r.timelineOffset=y.und(t)?p:je(t,p),s(n),n.seek(r.timelineOffset);var d=z(r);s(d),l.push(d);var v=wn(l,e);return n.delay=v.delay,n.endDelay=v.endDelay,n.duration=v.duration,n.seek(0),n.reset(),n.autoplay&&n.play(),n},n}z.version="3.2.1";z.speed=1;z.suspendWhenDocumentHidden=!0;z.running=U;z.remove=ta;z.get=Ve;z.set=bn;z.convertPx=Ae;z.path=Yt;z.setDashoffset=Ut;z.stagger=aa;z.timeline=ra;z.easing=Le;z.penner=un;z.random=function(e,n){return Math.floor(Math.random()*(n-e+1))+e};function ia(e,n=5){let a;return function(...t){clearTimeout(a),a=setTimeout(()=>e.apply(this,t),n)}}function oa({dropzoneRef:e,circleRef:n,isDisabled:a,isReadonly:t,dropEnabled:o,circleOpacity:l,animationSpeed:s=.5,isEditing:u}){const r=R(!1),p=R(0),d=R(0),v=R(0),c=R(0),w=R(!1);let g=null,m=0;const x=()=>{if(w.value)return;w.value=!0;const D=.12*s.value,M=.82+(1-s.value)*.1;let T=0,E=0,_=v.value,B=c.value;const A=()=>{if(!r.value){w.value=!1;return}_=_+(v.value-_)*.3,B=B+(c.value-B)*.3;const j=_-p.value,L=B-d.value;T=T*M+j*D,E=E*M+L*D,p.value+=T,d.value+=E,g=requestAnimationFrame(A)};g=requestAnimationFrame(A)},S=D=>{if(a.value||t.value||!o.value||u.value)return;const M=Date.now();if(!(M-m<16)){if(m=M,D.stopPropagation(),e.value){const T=e.value.getBoundingClientRect();v.value=D.clientX-T.left,c.value=D.clientY-T.top}if(!r.value&&(r.value=!0,e.value)){const T=e.value.getBoundingClientRect(),E=120,_=v.value,B=T.width-v.value,A=c.value,j=T.height-c.value,L=Math.min(_,B,A,j);L===_?(p.value=-E,d.value=c.value):L===B?(p.value=T.width+E,d.value=c.value):L===A?(p.value=v.value,d.value=-E):(p.value=v.value,d.value=T.height+E),n.value&&z({targets:n.value,opacity:[0,l.value],scale:[.4,1],duration:300/s.value,easing:"easeOutCubic"}),x()}}},h=D=>{e.value&&e.value.contains(D.relatedTarget)||(n.value&&r.value?z({targets:n.value,opacity:[l.value,0],scale:[1,.4],duration:200/s.value,easing:"easeOutQuad",complete:()=>{r.value=!1,w.value=!1}}):(r.value=!1,w.value=!1),g&&(cancelAnimationFrame(g),g=null))},b=D=>{if(a.value||t.value||!o.value||u.value)return!1;if(e.value){const M=e.value.getBoundingClientRect();p.value=D.clientX-M.left,d.value=D.clientY-M.top,v.value=p.value,c.value=d.value}return n.value?(w.value=!1,g&&(cancelAnimationFrame(g),g=null),z({targets:n.value,scale:[1,35],opacity:[l.value,l.value],duration:700,easing:"easeOutCubic",complete:function(){z({targets:n.value,opacity:[l.value,0],duration:300,easing:"linear",complete:function(){r.value=!1}})}})):r.value=!1,!0},I=ia(D=>{if(r.value&&e.value){const M=e.value.getBoundingClientRect();v.value=D.clientX-M.left,c.value=D.clientY-M.top}},Math.max(5,16/s.value));return ft(()=>{g&&(cancelAnimationFrame(g),g=null)}),{isDragging:r,mouseX:p,mouseY:d,targetX:v,targetY:c,isAnimating:w,handleDragOver:S,handleDragLeave:h,handleDrop:b,handleMouseMove:I}}const Ne={components:{FileList:Bt},props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","add-state","remove-state"],setup(e,{emit:n}){const a=f(()=>!1),{getIcon:t}=wwLib.useIcons(),o=R(null),l=R(null),s=R(null),u=R(null),r=R(!1),p=f(()=>{var i;return((i=e.content)==null?void 0:i.extensionsMessage)||null}),d=f(()=>{var i;return((i=e.content)==null?void 0:i.maxFileMessage)||null}),v=f(()=>{var i;return((i=e.content)==null?void 0:i.labelMessage)||null}),c=f(()=>{var i;return((i=e.content)==null?void 0:i.type)||"single"}),w=f(()=>{var i;return((i=e.content)==null?void 0:i.reorder)||!1}),g=f(()=>{var i;return((i=e.content)==null?void 0:i.drop)!==!1}),m=f(()=>{var i;return((i=e.content)==null?void 0:i.maxFileSize)||10}),x=f(()=>{var i;return((i=e.content)==null?void 0:i.minFileSize)||0}),S=f(()=>{var i;return((i=e.content)==null?void 0:i.maxTotalFileSize)||50}),h=f(()=>{var i;return((i=e.content)==null?void 0:i.maxFiles)||10}),b=f(()=>{var i;return((i=e.content)==null?void 0:i.required)||!1}),I=f(()=>{var i;return((i=e.content)==null?void 0:i.extensions)||"any"}),D=f(()=>{var i;return((i=e.content)==null?void 0:i.customExtensions)||""}),M=f(()=>{var i;return((i=e.content)==null?void 0:i.exposeBase64)||!1}),T=f(()=>{var i;return((i=e.content)==null?void 0:i.exposeBinary)||!1}),E=f(()=>{var i;return((i=e.content)==null?void 0:i.showUploadIcon)!==!1}),_=f(()=>{var i;return((i=e.content)==null?void 0:i.uploadIcon)||"upload"}),B=f(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconColor)||"#666666"}),A=f(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconPosition)||"top"}),j=f(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconSize)||"24px"}),L=f(()=>{var i;return((i=e.content)==null?void 0:i.uploadIconMargin)||"8px"}),ie=f(()=>{var i;return((i=e.content)==null?void 0:i.enableCircleAnimation)!==!1}),oe=f(()=>{var i;return((i=e.content)==null?void 0:i.circleSize)||"80px"}),we=f(()=>{var i;return((i=e.content)==null?void 0:i.circleColor)||Me.value}),Q=f(()=>{var i;return((i=e.content)==null?void 0:i.circleOpacity)!==void 0?e.content.circleOpacity:.5}),X=f(()=>{var i;return((i=e.content)==null?void 0:i.animationSpeed)!==void 0?e.content.animationSpeed:.5}),ne=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderWidth)||"2px"}),ce=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderStyle)||"dashed"}),de=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderColor)||"#CCCCCC"}),fe=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBorderRadius)||"8px"}),te=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzonePadding)||"20px"}),ve=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneMinHeight)||"120px"}),le=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackground)||"rgba(0, 0, 0, 0)"}),Fe=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackgroundHover)||"rgba(0, 0, 0, 0.01)"}),xn=f(()=>{var i;return((i=e.content)==null?void 0:i.labelFontSize)||"16px"}),Sn=f(()=>{var i;return((i=e.content)==null?void 0:i.labelFontFamily)||"inherit"}),Bn=f(()=>{var i;return((i=e.content)==null?void 0:i.labelFontWeight)||"normal"}),Cn=f(()=>{var i;return((i=e.content)==null?void 0:i.labelColor)||"#333333"}),Dn=f(()=>{var i;return((i=e.content)==null?void 0:i.fileDetailsFontSize)||"12px"}),In=f(()=>{var i;return((i=e.content)==null?void 0:i.fileDetailsColor)||"#888888"}),Me=f(()=>{var i;return((i=e.content)==null?void 0:i.progressBarColor)||"#EEEEEE"}),zn=f(()=>{var F;return(((F=e.content)==null?void 0:F.labelMargin)||"0 0 4px 0").split(" ")[2]||"4px"}),Tn=f(()=>{const i=Me.value;if(!i)return"rgba(85, 85, 85, 0.05)";try{const F=parseInt(i.slice(1,3),16)||85,C=parseInt(i.slice(3,5),16)||85,k=parseInt(i.slice(5,7),16)||85;return`rgba(${F}, ${C}, ${k}, 0.05)`}catch{return"rgba(85, 85, 85, 0.05)"}}),En=f(()=>{var i;return((i=e.content)==null?void 0:i.dropzoneBackgroundDragging)||"rgba(0, 0, 0, 0.05)"}),_n=f(()=>{var i,F,C,k,P;return{fontFamily:((i=e.content)==null?void 0:i.extensionsMessageFontFamily)||"inherit",fontSize:((F=e.content)==null?void 0:F.extensionsMessageFontSize)||"12px",fontWeight:((C=e.content)==null?void 0:C.extensionsMessageFontWeight)||"normal",color:((k=e.content)==null?void 0:k.extensionsMessageColor)||"#888888",margin:((P=e.content)==null?void 0:P.extensionsMessageMargin)||"0 0 4px 0"}}),Ln=f(()=>{var i,F,C,k,P;return{fontFamily:((i=e.content)==null?void 0:i.maxFileMessageFontFamily)||"inherit",fontSize:((F=e.content)==null?void 0:F.maxFileMessageFontSize)||"12px",fontWeight:((C=e.content)==null?void 0:C.maxFileMessageFontWeight)||"normal",color:((k=e.content)==null?void 0:k.maxFileMessageColor)||"#888888",margin:((P=e.content)==null?void 0:P.maxFileMessageMargin)||"0 0 4px 0"}}),kn=f(()=>{var i,F,C,k,P;return{fontFamily:((i=e.content)==null?void 0:i.labelFontFamily)||"inherit",fontSize:((F=e.content)==null?void 0:F.labelFontSize)||"16px",fontWeight:((C=e.content)==null?void 0:C.labelFontWeight)||"normal",color:((k=e.content)==null?void 0:k.labelColor)||"#333333",margin:((P=e.content)==null?void 0:P.labelMargin)||"0 0 4px 0"}}),$=f(()=>e.wwElementState.props.disabled||!1),ee=f(()=>{var i;return e.wwElementState.props.readonly===void 0?((i=e.content)==null?void 0:i.readonly)||!1:e.wwElementState.props.readonly}),{value:N,setValue:ae}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",defaultValue:[],type:"file",componentType:"element"}),{value:ge,setValue:Pn}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"status",defaultValue:{},type:"any"}),An=nn("_wwForm:useForm",()=>{}),On=f(()=>e.content.fieldName),Vn=f(()=>e.content.validation),jn=f(()=>e.content.customValidation);An(N,{fieldName:On,validation:Vn,customValidation:jn,required:b},{elementState:e.wwElementState,emit:n,sidepanelFormPath:"form",setValue:ae});const se=f(()=>Array.isArray(N.value)?N.value:[]),Rn=f(()=>se.value.length>0);me([ge,se],([i,F])=>{if(i&&typeof i=="object"){const C=F.map(P=>P.name),k=Object.fromEntries(Object.entries(i).filter(([P])=>C.includes(P)));Object.keys(k).length!==Object.keys(i).length&&Pn(k)}});const xe=f(()=>{switch(I.value){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"pdf":return".pdf";case"csv":return".csv";case"excel":return".xls,.xlsx,.xlsm,.xlsb";case"word":return".doc,.docx,.docm";case"json":return".json";case"custom":return D.value;default:return""}});me(()=>_.value,async i=>{if(i&&E.value)try{u.value=await t(i)}catch{u.value=null}else u.value=null},{immediate:!0});const Hn=f(()=>u.value),Nn=R({fileUpload:{value:f(()=>se.value.map(i=>{const F={};for(const C in i)Object.prototype.hasOwnProperty.call(i,C)&&(F[C]=i[C]);return F.name=i.name,F.size=i.size,F.type=i.type,F.lastModified=i.lastModified,F.mimeType=i.mimeType,F.id=i.id,i.base64&&(F.base64=i.base64),i.binary&&(F.binary=i.binary),F})),status:ge}});vt("_wwFileUpload",{files:se,status:ge,acceptedTypes:xe,isDisabled:$,isReadonly:ee,isSingleMode:f(()=>c.value==="single"),content:f(()=>e.content||{})});const{isDragging:Wn,mouseX:Un,mouseY:qn,targetX:Yn,targetY:Zn,isAnimating:Qn,handleDragOver:Kn,handleDragLeave:Gn,handleDrop:Jn,handleMouseMove:Xn}=oa({dropzoneRef:l,circleRef:s,isDisabled:$,isReadonly:ee,dropEnabled:g,circleOpacity:Q,animationSpeed:X,isEditing:a}),$n=()=>{!$.value&&!ee.value&&!a.value&&o.value.click()},et=async i=>{if(!Jn(i)||$.value||ee.value||!g.value)return;const C=i.dataTransfer.files;C.length&&setTimeout(async()=>{await We(C)},1050)},nt=async i=>{const F=i.target.files;F.length&&(await We(F),i.target.value="")},We=async i=>{r.value=!0;const F=Array.from(i);c.value==="single"&&(F.length>1&&n("trigger-event",{name:"error",event:{code:"SINGLE_MODE_MULTIPLE_FILES",data:{message:"Multiple files provided in single file mode",count:F.length,acceptedCount:1}}}),F.splice(1),ae([]));let C=1/0;if(c.value==="multi"&&h.value>0)if(C=h.value-N.value.length,C<=0){n("trigger-event",{name:"error",event:{code:"MAX_FILES_REACHED",data:{message:`Maximum number of files (${h.value}) reached`,maxFiles:h.value,currentCount:N.value.length}}}),wwLib.wwNotification.open({text:{en:`Maximum number of files (${h.value}) reached`},color:"warning"}),r.value=!1;return}else F.length>C&&n("trigger-event",{name:"error",event:{code:"TOO_MANY_FILES",data:{message:`Only ${C} more files can be added`,providedCount:F.length,availableSlots:C,maxFiles:h.value,currentCount:N.value.length}}});const k=F.slice(0,C),P=[],it=c.value==="multi"&&Array.isArray(N.value)?N.value.reduce((O,W)=>O+(W.size||0),0):0;for(const O of k){const W=Ct(O,{maxFileSize:m.value,minFileSize:x.value,maxTotalFileSize:c.value==="multi"?S.value:void 0,currentTotalSize:c.value==="multi"?it:0,acceptedTypes:xe.value});W.valid?(O.id=`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,O.mimeType=O.type,M.value&&(O.base64=await zt(O)),T.value&&(O.binary=await Tt(O)),P.push(O)):(console.warn(`File validation failed: ${W.reason}`),n("trigger-event",{name:"error",event:{code:"VALIDATION_ERROR",data:{message:W.reason,fileName:O.name,fileSize:O.size,fileType:O.type,constraint:W.constraint}}}))}if(P.length>0)if(c.value==="single")ae(P),n("trigger-event",{name:"change",event:{value:P}}),r.value=!1;else{let W=[...[...N.value]];const qe=Se=>{W=[...W,P[Se]],ae(W),Se<P.length-1?setTimeout(()=>qe(Se+1),150):(n("trigger-event",{name:"change",event:{value:W}}),r.value=!1)};setTimeout(()=>qe(0),50);return}r.value=!1},tt=i=>{if($.value||ee.value)return;const F=[...N.value.filter((C,k)=>k!==i)];ae(F),n("trigger-event",{name:"change",event:{value:F}})},at=(i,F)=>{if($.value||ee.value||!w.value)return;const C=[...N.value],[k]=C.splice(i,1);C.splice(F,0,k),ae(C),n("trigger-event",{name:"change",event:{value:C}})},Ue=()=>{ae([])},rt=()=>{switch(I.value){case"image":return"Images";case"video":return"Videos";case"audio":return"Audio files";case"pdf":return"PDF files";case"csv":return"CSV files";case"excel":return"Excel files";case"word":return"Word documents";case"json":return"JSON files";case"custom":return D.value;default:return"All files"}};return wwLib.wwElement.useRegisterElementLocalContext("fileUpload",Nn.value.fileUpload,{clearFiles:{description:"Clear all files",method:Ue,editor:{label:"Clear Files",group:"File Upload",icon:"trash"}}}),me(ee,i=>{n(i?"add-state":"remove-state","readonly")},{immediate:!0}),me($,i=>{n(i?"add-state":"remove-state","disabled")},{immediate:!0}),{status:ge,fileInput:o,isDragging:Wn,fileList:se,hasFiles:Rn,isDisabled:$,isReadonly:ee,acceptedFileTypes:xe,extensionsMessage:p,maxFileMessage:d,openFileExplorer:$n,handleDragOver:Kn,handleDragLeave:Gn,handleDrop:et,handleFileSelection:nt,removeFile:tt,reorderFiles:at,getAllowedTypesLabel:rt,iconHTML:Hn,uploadIconPosition:A,handleMouseMove:Xn,extensionsMessageStyle:_n,maxFileMessageStyle:Ln,labelMessage:v,labelMessageStyle:kn,type:c,reorder:w,drop:g,maxFileSize:m,minFileSize:x,maxFiles:h,required:b,extensions:I,customExtensions:D,showUploadIcon:E,uploadIcon:_,uploadIconColor:B,uploadIconSize:j,uploadIconMargin:L,enableCircleAnimation:ie,circleSize:oe,circleColor:we,circleOpacity:Q,animationSpeed:X,safeDropzoneBorderWidth:ne,safeDropzoneBorderStyle:ce,safeDropzoneBorderColor:de,safeDropzoneBorderRadius:fe,safeDropzonePadding:te,safeDropzoneMinHeight:ve,safeDropzoneBackground:le,safeDropzoneBackgroundHover:Fe,safeDropzoneBackgroundDragging:En,safeLabelFontSize:xn,safeLabelFontFamily:Sn,safeLabelFontWeight:Bn,safeLabelColor:Cn,safeFileDetailsFontSize:Dn,safeFileDetailsColor:In,safeProgressBarColor:Me,safeLabelMarginBottom:zn,safeProgressBarBackground:Tn,dropzoneEl:l,circleEl:s,mouseX:Un,mouseY:qn,targetX:Yn,targetY:Zn,isAnimating:Qn,isProcessing:r,isEditing:a,clearFiles:Ue}}},$e=()=>{tn(e=>({"45ca3c80":e.safeDropzoneBackground,"3d3787e8":e.safeDropzoneBorderWidth,"3d0477d3":e.safeDropzoneBorderStyle,"3c208985":e.safeDropzoneBorderColor,"60c056b0":e.safeDropzoneBorderRadius,76443402:e.safeDropzonePadding,68348487:e.safeDropzoneMinHeight,"00bca43f":e.isEditing?"unset":"pointer","09d26c9c":e.safeDropzoneBackgroundHover,ea709ab6:e.uploadIconSize,"65609d82":e.uploadIconColor,"2617815c":e.uploadIconMargin,"4c840422":e.safeDropzoneBackgroundDragging}))},en=Ne.setup;Ne.setup=en?(e,n)=>($e(),en(e,n)):$e;const la=["innerHTML"],sa={class:"ww-file-upload__text"},ua=["multiple","accept","required","disabled","aria-label"];function ca(e,n,a,t,o,l){const s=an("FileList");return V(),H("div",{class:De(["ww-file-upload",{"ww-file-upload--dragging":t.isDragging&&!t.isDisabled&&!t.isReadonly,"ww-file-upload--disabled":t.isDisabled,"ww-file-upload--readonly":t.isReadonly,"ww-file-upload--has-files":t.hasFiles}]),onDragover:n[3]||(n[3]=Be((...u)=>t.handleDragOver&&t.handleDragOver(...u),["prevent"])),onDragleave:n[4]||(n[4]=Be((...u)=>t.handleDragLeave&&t.handleDragLeave(...u),["prevent"])),onDrop:n[5]||(n[5]=Be((...u)=>t.handleDrop&&t.handleDrop(...u),["prevent"])),role:"region","aria-label":"File upload area"},[q("div",{ref:"dropzoneEl",class:"ww-file-upload__dropzone",onClick:n[0]||(n[0]=(...u)=>t.openFileExplorer&&t.openFileExplorer(...u)),onMousemove:n[1]||(n[1]=(...u)=>t.handleMouseMove&&t.handleMouseMove(...u))},[t.isDragging&&!t.isDisabled&&!t.isReadonly&&t.enableCircleAnimation?(V(),H("div",{key:0,ref:"circleEl",class:"ww-file-upload__hover-circle",style:G({left:`${t.mouseX}px`,top:`${t.mouseY}px`,backgroundColor:t.circleColor,opacity:t.circleOpacity,width:t.circleSize,height:t.circleSize})},null,4)):K("",!0),q("div",{class:De(["ww-file-upload__content",[`ww-file-upload__content--${t.uploadIconPosition}`]])},[t.showUploadIcon?(V(),H("div",{key:0,class:"ww-file-upload__icon",innerHTML:t.iconHTML},null,8,la)):K("",!0),q("div",sa,[q("div",{class:"ww-file-upload__label",style:G(t.labelMessageStyle)},re(t.labelMessage),5),t.extensionsMessage?(V(),H("div",{key:0,class:"ww-file-upload__info ww-file-upload__extensions-message",style:G(t.extensionsMessageStyle)},re(t.extensionsMessage),5)):K("",!0),t.maxFileMessage?(V(),H("div",{key:1,class:"ww-file-upload__info ww-file-upload__max-file-message",style:G(t.maxFileMessageStyle)},re(t.maxFileMessage),5)):K("",!0)])],2)],544),t.hasFiles?(V(),rn(s,{key:0,files:t.fileList,status:t.status,type:t.type,"can-reorder":t.reorder,"is-readonly":t.isReadonly,"is-disabled":t.isDisabled,onRemove:t.removeFile,onReorder:t.reorderFiles},null,8,["files","status","type","can-reorder","is-readonly","is-disabled","onRemove","onReorder"])):K("",!0),q("input",{ref:"fileInput",type:"file",class:"ww-file-upload__input",multiple:t.type==="multi",accept:t.acceptedFileTypes,required:t.required&&!t.hasFiles,disabled:t.isDisabled||t.isReadonly,"aria-label":t.labelMessage,onChange:n[2]||(n[2]=(...u)=>t.handleFileSelection&&t.handleFileSelection(...u))},null,40,ua)],34)}const ma=Te(Ne,[["render",ca],["__scopeId","data-v-6691aea9"]]);export{ma as e};

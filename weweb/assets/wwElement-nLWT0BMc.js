import{d as h}from"./vuedraggable.umd-C01xZK6E.js";import{_ as g,h as d,c,o as f,j as r,k as s,f as v}from"./main-CAT7wj_B.js";const y={components:{draggable:h},inject:{customHandler:{defaultValue:null},customDragHandler:{defaultValue:null}},props:{wwElementState:{type:Object,required:!0},content:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["trigger-event"],setup(e){const{value:t,setValue:o}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"isDragging",type:"boolean",defaultValue:!1,readonly:!0});return{isDragging:t,setDrag:o}},data:()=>({internalItems:[]}),methods:{onChange(e){this.customHandler&&this.customHandler(e,{...this.wwElementState.props,updatedStackItems:this.internalItems}),e.moved&&this.$emit("trigger-event",{name:"item:moved",event:{item:e.moved.element,oldIndex:e.moved.oldIndex,newIndex:e.moved.newIndex,updatedList:this.internalItems}}),e.added&&this.$emit("trigger-event",{name:"item:added",event:{item:e.added.element,newIndex:e.added.newIndex,updatedList:this.internalItems}}),e.removed&&this.$emit("trigger-event",{name:"item:removed",event:{item:e.removed.element,oldIndex:e.removed.oldIndex,updatedList:this.internalItems}})}},computed:{isEditing(){return!1},items(){const e=this.wwElementState.props.items?this.wwElementState.props.items:this.content.items,t=wwLib.wwCollection.getCollectionData(e);return Array.isArray(t)?t:[]},group(){return this.wwElementState.props.group?this.wwElementState.props.group:this.content.group},sortable(){return this.wwElementState.props.sortable?this.wwElementState.props.sortable:this.content.sortable},itemKey(){return this.wwElementState.props.itemKey||"id"},handle(){var e;return(e=this.wwElementState.props.handle)!=null&&e.length?this.wwElementState.props.handle:this.content.customDragHandle?this.content.handleClass||"draggable":null},isReadonly(){return!!(this.wwElementState.props.readonly||this.content.readonly)}},watch:{items:{immediate:!0,deep:!0,handler:function(e){this.internalItems=[...e]}},isDragging(e){this.customDragHandler&&this.customDragHandler(e,{...this.wwElementState.props})},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}}},b={class:"draggable-item"};function I(e,t,o,l,E,n){var m;const i=d("wwLayout"),u=d("wwLayoutItemContext"),p=d("draggable");return f(),c(p,{modelValue:e.internalItems,"onUpdate:modelValue":t[0]||(t[0]=a=>e.internalItems=a),"item-key":n.itemKey,clone:a=>a,group:n.group,sort:n.sortable,handle:(m=n.handle)!=null&&m.length?`.${n.handle}`:null,disabled:n.isEditing||n.isReadonly,onChange:n.onChange,onStart:t[1]||(t[1]=a=>l.setDrag(!0)),onEnd:t[2]||(t[2]=a=>l.setDrag(!1))},{header:r(()=>[s(i,{path:"headerElement"})]),item:r(({element:a,index:w})=>[v("div",b,[s(u,{index:w,item:null,"is-repeat":"",data:a,"repeated-items":e.internalItems},{default:r(()=>[s(i,{path:"itemElement"})]),_:2},1032,["index","data","repeated-items"])])]),footer:r(()=>[s(i,{path:"footerElement"})]),_:1},8,["modelValue","item-key","clone","group","sort","handle","disabled","onChange"])}const x=g(y,[["render",I],["__scopeId","data-v-233935b9"]]);export{x as e};

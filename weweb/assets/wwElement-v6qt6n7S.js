import{_ as T,h as j,e as c,o as r,c as b,x as d,m as f,F as k,P as O,j as p,k as L,W as M,g as z,d as y,l as B,b as I,X as q}from"./main-CAT7wj_B.js";function K(){function n(e,a){switch(e){case"fade":return"fade-transition";case"slide-in":switch(a){default:return"slide-in-left-transition";case"left":return"slide-in-left-transition";case"right":return"slide-in-right-transition";case"top":return"slide-in-top-transition";case"bottom":return"slide-in-bottom-transition"}case"zoom":return"zoom-transition";default:return""}}function l(e,a,g,s){const t={position:"fixed"};switch(e){case"left":t.left=0;break;case"right":t.right=0;break;case"custom":t.left=g;break;default:t.left="50%",t["--translate-x"]="-50%";break}switch(a){case"top":t.top=0;break;case"bottom":t.bottom=0;break;case"custom":t.top=s;break;default:t.top="50%",t["--translate-y"]="-50%";break}return t}function o(e){const a={position:"fixed"};switch(e){case"left":Object.assign(a,{height:"100dvh",top:0,bottom:0,left:0});break;case"right":Object.assign(a,{height:"100dvh",top:0,bottom:0,right:0});break;case"top":Object.assign(a,{width:"100dvw",top:0,left:0,right:0});break;case"bottom":Object.assign(a,{width:"100dvw",bottom:0,left:0,right:0});break}return a}return{getModalStyle:l,getSheetStyle:o,getTransitionName:n}}const V={props:{content:{type:Object,required:!0},uid:{type:String,required:!0}},emits:["trigger-event"],setup(n,{emit:l}){const{getModalStyle:o,getSheetStyle:e,getTransitionName:a}=K(),g=y(()=>n.content.animationDuration+"ms"),s=y(()=>a(n.content.animation,n.content.slideInDirection)),{value:t,setValue:S}=wwLib.wwVariable.useComponentVariable({uid:n.uid,name:"open",type:"boolean",defaultValue:!1,componentType:"element"}),v=i=>{S(i),l("trigger-event",{name:i?"open":"close",event:{open:i}}),l("trigger-event",{name:"change",event:{open:i}})};function w(){v(!t.value)}function h(){v(!0)}function m(){v(!1)}function _(){wwLib.getFrontDocument().addEventListener("keydown",C)}function E(){wwLib.getFrontDocument().removeEventListener("keydown",C)}function C(i){i.key==="Escape"&&D()}function D(){u.value||!n.content.escClose||m()}B(()=>t.value,i=>{n.content.preventScroll&&!u.value&&(i?(wwLib.getFrontDocument().body.style.overflow="hidden",wwLib.getFrontDocument().documentElement.style.overflow="hidden"):(wwLib.getFrontDocument().body.style.removeProperty("overflow"),wwLib.getFrontDocument().documentElement.style.removeProperty("overflow"))),i?_():E()});const u=y(()=>!1);wwLib.wwElement.useRegisterElementLocalContext("dialog",I({isOpen:t}),{toggleDialog:{method:w,editor:{label:"Toggle",description:"Toggle the dialog state."}},openDialog:{method:h,editor:{label:"Open",description:"Open the dialog."}},closeDialog:{method:m,editor:{label:"Close",description:"Close the dialog."}}});const F=y(()=>{let i={};switch(n.content.type){case"modal":i=o(n.content.sideModal,n.content.align,n.content.customPositionX,n.content.customPositionY);break;case"sheet":i=e(n.content.sideSheet);break}return i});function x(){n.content.overlayClickCloses&&!u.value&&m()}function N(){n.content.clickOutsideCloses&&!u.value&&m()}function P(){!n.content.triggerClickOpens||u.value||w()}return q(()=>{E(),wwLib.getFrontDocument().body.style.removeProperty("overflow"),wwLib.getFrontDocument().documentElement.style.removeProperty("overflow")}),{toggleDialog:w,openDialog:h,closeDialog:m,contentStyle:F,isOpen:t,transitionName:s,animationDuration:g,isEditing:u,onEscapeKeyDown:D,handleOverlayClick:x,onTriggerClick:P,handleOutsideClick:N}}},X={key:0},R={key:0};function U(n,l,o,e,a,g){const s=j("wwElement",!0);return r(),c("div",{style:z(o.content.animation?{"--transition-duration":e.animationDuration,"--transition-easing":o.content.animationEasing}:null),role:"dialog"},[o.content.trigger?(r(),b(s,f({key:0},o.content.triggerElement,{role:"dialog",onClick:l[0]||(l[0]=t=>e.onTriggerClick())}),null,16)):d("",!0),e.isOpen?(r(),c(k,{key:1},[e.isEditing?d("",!0):(r(),c(k,{key:0},[o.content.clickOutsideCloses?(r(),c("div",{key:0,class:"pointer-capture",onClick:l[1]||(l[1]=O(t=>e.closeDialog(),["stop"]))})):o.content.preventInteractionsOutside&&!o.content.overlay?(r(),c("div",{key:1,class:"pointer-capture",onClick:O(t=>null,["stop"])})):d("",!0)],64)),o.content.overlay?(r(),b(s,f({key:1,ref:"overlayElement"},o.content.overlayElement,{role:"dialog",onClick:l[2]||(l[2]=t=>e.handleOverlayClick())}),null,16)):d("",!0)],64)):d("",!0),e.transitionName?(r(),b(M,{key:2,name:e.transitionName},{default:p(()=>[e.isOpen?(r(),c("div",X,[L(s,f(o.content.contentElement,{role:"dialog",style:{...e.contentStyle},class:"ww-dialog"}),null,16,["style"])])):d("",!0)]),_:1},8,["name"])):(r(),c(k,{key:3},[e.isOpen?(r(),c("div",R,[L(s,f(o.content.contentElement,{style:{...e.contentStyle},role:"dialog",class:"ww-dialog"}),null,16,["style"])])):d("",!0)],64))],4)}const A=T(V,[["render",U]]);export{A as e};
